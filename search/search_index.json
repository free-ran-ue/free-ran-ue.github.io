{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"free-ran-ue","text":""},{"location":"#introduction","title":"Introduction","text":"<p>free-ran-ue is a next-generation open-source 5G RAN/UE project developed by Alonza0314.</p> <p>The primary goal of this project is to create a next-generation RAN/UE simulator for testing the NR-DC (New Radio Dual Connectivity) feature in free5GC.</p> <p>A key technical innovation of free-ran-ue is the implementation of userspace GTP-U, replacing the traditional kernel-space GTP5G. This approach provides greater flexibility and control over GTP packet manipulation, making it easier to manage and customize data plane traffic.</p>"},{"location":"#support-features","title":"Support Features","text":"<ul> <li>Fundamental support for UE registration and PDU session establishment in both control and data planes</li> <li>Advanced feature: Support for NR-DC (New Radio Dual Connectivity), enabling simultaneous data plane connections across two gNBs</li> <li>Multiple UEs: Launch multiple UEs with a single command.</li> </ul> <p>For more information on how to use free-ran-ue, please refer to the User Guide.</p>"},{"location":"doc-5g-core-book/en/","title":"5G Core Easy Learning: free5GC and free-ran-ue","text":""},{"location":"doc-5g-core-book/en/author/","title":"About the Author","text":""},{"location":"doc-5g-core-book/en/part1-history/chapter1/","title":"Chapter 1\uff1aFrom 4G to 5G \u2014 Evolution of Core Network Architecture","text":""},{"location":"doc-5g-core-book/en/part1-history/chapter2/","title":"Chapter 2\uff1a5G Core Network Overview from 3GPP Perspective","text":""},{"location":"doc-5g-core-book/en/part2-free5gc/chapter3/","title":"Chapter 3\uff1afree5GC Overall Architecture and Module Introduction","text":""},{"location":"doc-5g-core-book/en/part2-free5gc/chapter4/","title":"Chapter 4\uff1aAMF Deep Dive","text":""},{"location":"doc-5g-core-book/en/part2-free5gc/chapter5/","title":"Chapter 5\uff1aSMF, UPF and User Plane Procedures","text":""},{"location":"doc-5g-core-book/en/part2-free5gc/chapter6/","title":"Chapter 6\uff1aOther Network Functions","text":""},{"location":"doc-5g-core-book/en/part2-free5gc/chapter7/","title":"Chapter 7\uff1aNon-3GPP Access","text":""},{"location":"doc-5g-core-book/en/part3-deploy/chapter8/","title":"Chapter 8\uff1afree5GC Deployment and Configuration","text":""},{"location":"doc-5g-core-book/en/part3-deploy/chapter9/","title":"Chapter 9\uff1aMulti-Node / Multi-UPF Deployment","text":""},{"location":"doc-5g-core-book/en/part4-free-ran-ue/chapter10/","title":"Chapter 10\uff1aWhy Do We Need a RAN/UE Simulator?","text":""},{"location":"doc-5g-core-book/en/part4-free-ran-ue/chapter11/","title":"Chapter 11\uff1aArchitecture Design of free-ran-ue","text":""},{"location":"doc-5g-core-book/en/part4-free-ran-ue/chapter12/","title":"Chapter 12\uff1aHow the Simulator Integrates with free5GC","text":""},{"location":"doc-5g-core-book/zh/","title":"5G \u6838\u5fc3\u7db2\u8f15\u9b06\u5b78\uff1afree5GC \u8207 RAN/UE \u6a21\u64ec\u5668","text":"<p>Important</p> <p>\u6b61\u8fce\u4f86\u5230\u300a5G Core Book\u300b\uff01</p> <p>\u672c\u66f8\u6703\u7528\u6700\u6709\u6548\u7387\u7684\u65b9\u5f0f\u5e36\u9818\u8b80\u8005\u641e\u61c2 5G \u6838\u5fc3\u7db2\u8def\u3001\u90e8\u7f72 free5GC \u4ee5\u53ca\u6253\u9020\u81ea\u5df1\u7684 RAN/UE \u6a21\u64ec\u5668\uff01\u8b93\u5373\u4f7f\u662f\u65b0\u624b\u5c0f\u767d\u4e5f\u53ef\u4ee5\u6210\u70ba\u8d70\u5728\u79d1\u6280\u524d\u7aef\u7684 5G \u6838\u5fc3\u7db2\u8def\u5927\u5e2b\uff01</p>"},{"location":"doc-5g-core-book/zh/#_1","title":"\u70ba\u4ec0\u9ebc\u6703\u6709\u9019\u672c\u66f8\uff1f","text":"<p>\u7b46\u8005\u5728\u525b\u8e0f\u5165 5G \u9818\u57df\u6642\uff0c\u7e3d\u89ba\u5f97\u6574\u500b\u4e16\u754c\u975e\u5e38\u62bd\u8c61\u3002\u6a19\u6e96\u6587\u4ef6\u88e1\u5145\u6eff\u4e86\u5927\u91cf\u4ecb\u9762\u3001\u7a0b\u5e8f\u8207\u7e2e\u5beb\uff1aAMF\u3001SMF\u3001UPF\u3001N1/N2/N3\u3001PDU Session\u2026\u2026</p> <p>\u5c0d\u65bc\u8a31\u591a\u521d\u5b78\u8005\u800c\u8a00\uff0c\u5728\u95b1\u8b80 3GPP \u898f\u683c\u6216\u8a66\u5716\u7406\u89e3\u6295\u5f71\u7247\u6642\uff0c\u5f80\u5f80\u6703\u9047\u5230\u5e7e\u500b\u5171\u540c\u7684\u75db\u9ede\uff1a</p> <ul> <li>\u540d\u8a5e\u7e2e\u5beb\u592a\u591a\uff1a\u770b\u5230\u4e00\u9577\u4e32\u7e2e\u5beb\uff0c\u537b\u5f88\u96e3\u7acb\u5373\u5c0d\u61c9\u5230\u5b83\u5011\u7684\u529f\u80fd\u3002</li> <li>\u6982\u5ff5\u592a\u62bd\u8c61\uff1a\u77e5\u9053\u7db2\u5143\u540d\u7a31\uff0c\u537b\u7121\u6cd5\u9023\u7d50\u5230\u5be6\u969b\u5c01\u5305\u8207\u771f\u5be6\u6d41\u7a0b\u3002</li> <li>3GPP \u5354\u5b9a\u904e\u65bc\u9f90\u5927\uff1a\u898f\u683c\u5167\u5bb9\u6975\u5176\u8a73\u7d30\u4e14\u8907\u96dc\uff0c\u8b93\u4eba\u96e3\u4ee5\u627e\u5230\u4e0b\u624b\u9ede\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u7b46\u8005\u5e0c\u671b\u900f\u904e\u6700\u7c21\u55ae\u3001\u6700\u76f4\u89c0\u3001\u6700\u5be6\u4f5c\u5c0e\u5411\u7684\u65b9\u5f0f\uff0c\u5e36\u9818\u8b80\u8005\u9032\u5165 5G \u7684\u4e16\u754c\uff0c\u4e26\u4e00\u6b65\u6b65\u5be6\u73fe\u5c6c\u65bc\u81ea\u5df1\u7684 5G \u6838\u5fc3\u7db2\u8def\u74b0\u5883\u3002</p>"},{"location":"doc-5g-core-book/zh/#_2","title":"\u9019\u672c\u66f8\u7684\u5167\u5bb9\u9069\u5408\u8ab0\uff1f","text":"<ul> <li>\u525b\u5165\u9580 5G \u7684\u5b78\u751f\u6216\u5de5\u7a0b\u5e2b\uff0c\u9700\u8981\u4e00\u500b\u6709\u8108\u7d61\u7684\u5b78\u7fd2\u8def\u7dda\u3002</li> <li>\u5df2\u7d93\u4e86\u89e3 4G/EPC\uff0c\u60f3\u641e\u61c2 5GC \u65b0\u589e\u4e86\u4ec0\u9ebc\u3001\u6539\u4e86\u4ec0\u9ebc\u3002</li> <li>\u5c0d free5GC \u6709\u8208\u8da3\uff0c\u60f3\u770b\u61c2\u5be6\u4f5c\u67b6\u69cb\u8207\u5404\u6a21\u7d44\u7684\u89d2\u8272\u3002</li> <li>\u60f3\u8981\u4e00\u5957\u53ef\u91cd\u73fe\u7684 5G \u74b0\u5883\uff0c\u5305\u542b\u6838\u5fc3\u7db2\u8207 RAN/UE \u6a21\u64ec\u5668\u3002</li> </ul> <p>\u4e0d\u9700\u8981\u4e00\u958b\u59cb\u5c31\u5f88\u719f 3GPP \u898f\u683c\uff0c\u4f46\u5982\u679c\u4f60\u6709\u57fa\u672c\u7684\u7db2\u8def\uff08IP/TCP/UDP\uff09\u3001Linux \u64cd\u4f5c\u3001Docker \u6216 Kubernetes \u7d93\u9a57\uff0c\u6703\u8b80\u5f97\u66f4\u9806\uff01</p>"},{"location":"doc-5g-core-book/zh/#_3","title":"\u672c\u66f8\u7684\u7d50\u69cb\u8207\u95b1\u8b80\u5efa\u8b70","text":"<p>\u672c\u7cfb\u5217\u5927\u81f4\u5206\u70ba\u56db\u500b\u90e8\u5206\uff08\u53ef\u4f9d\u9700\u6c42\u8df3\u8b80\uff09\uff1a</p> <ul> <li> <p>Part I \u2014 5G \u6838\u5fc3\u7db2\u8def\u7684\u57fa\u790e\u8207\u6f14\u9032\u80cc\u666f</p> <p>\u5f9e 4G EPC \u5230 5G Core \u7684\u6f14\u8b8a\u30013GPP \u5c0d 5GC \u7684\u6574\u9ad4\u8996\u89d2\uff0c\u5e6b\u4f60\u5efa\u7acb\u5927\u5730\u5716\u3002</p> </li> <li> <p>Part II \u2014 free5GC \u5168\u67b6\u69cb\u6df1\u5ea6\u89e3\u6790</p> <p>\u9010\u4e00\u62c6\u89e3 AMF\u3001SMF\u3001UPF \u7b49\u6838\u5fc3\u7db2\u5143\uff0c\u5c0d\u7167\u5be6\u969b\u6a21\u7d44\u8207\u6d41\u7a0b\u3002</p> </li> <li> <p>Part III \u2014 free5GC \u5be6\u6230\u90e8\u7f72\u8207\u5e38\u898b\u554f\u984c</p> <p>\u5f9e\u55ae\u6a5f\u74b0\u5883\u5230\u591a\u7bc0\u9ede\u3001\u591a UPF \u7684\u90e8\u7f72\u6a21\u5f0f\uff08docker / k8s\uff09\uff0c\u4e26\u6574\u7406\u5e38\u898b\u5751\u8207\u6392\u932f\u601d\u8def\u3002</p> </li> <li> <p>Part IV \u2014 free-ran-ue \u6a21\u64ec\u5668</p> <p>\u8aaa\u660e\u70ba\u4ec0\u9ebc\u9700\u8981 RAN/UE \u6a21\u64ec\u5668\u3001free-ran-ue \u7684\u8a2d\u8a08\u7406\u5ff5\uff0c\u4ee5\u53ca\u5982\u4f55\u8207 free5GC \u6574\u5408\u8207\u9032\u884c\u5be6\u9a57\u3002</p> </li> </ul> <p>\u5982\u679c\u4f60\u662f\u7b2c\u4e00\u6b21\u63a5\u89f8 5G\uff1a</p> <ol> <li>\u5efa\u8b70\u5148\u5b8c\u6574\u770b\u5b8c Part I\uff0c\u5efa\u7acb\u6574\u9ad4\u67b6\u69cb\u6982\u5ff5\u3002</li> <li>\u518d\u4f9d\u8208\u8da3\u9078\u64c7 Part II / Part III \u505a\u6df1\u5165\u6216\u5be6\u4f5c\u3002</li> <li>\u6700\u5f8c\u95b1\u8b80 Part IV\uff0c\u7528 free-ran-ue \u5be6\u969b\u8dd1\u4e00\u8f2a End-to-End \u6e2c\u8a66\u3002</li> </ol>"},{"location":"doc-5g-core-book/zh/#_4","title":"\u5be6\u9a57\u74b0\u5883\u8207\u958b\u6e90\u5c08\u6848","text":"<p>\u672c\u7cfb\u5217\u6703\u5927\u91cf\u4f7f\u7528\u4ee5\u4e0b\u958b\u6e90\u5c08\u6848\uff1a</p> <ul> <li> <p>free5GC\uff1a\u958b\u6e90 5G Core \u5c08\u6848</p> <p>\u5b98\u65b9\u7db2\u7ad9\u8207\u539f\u59cb\u78bc\u8acb\u53c3\u8003 free5GC \u5b98\u65b9\u8cc7\u6e90 \u8207\u5176 GitHub\u3002</p> </li> <li> <p>free-ran-ue\uff1a\u672c\u5c08\u6848\u63d0\u4f9b\u7684 RAN/UE \u6a21\u64ec\u5668  </p> <p>\u539f\u59cb\u78bc\u8207\u6587\u4ef6\u4f4d\u65bc GitHub\u3002</p> </li> </ul> <p>\u6587\u4e2d\u6240\u6709\u5be6\u9a57\u6b65\u9a5f\u90fd\u76e1\u91cf\u505a\u5230\uff1a</p> <ul> <li>\u53ef\u91cd\u73fe\uff1a\u540c\u6a23\u7684\u6307\u4ee4\u8207\u8a2d\u5b9a\uff0c\u4f60\u4e5f\u80fd\u5728\u81ea\u5df1\u7684\u74b0\u5883\u8dd1\u8d77\u4f86\u3002</li> <li>\u9010\u6b65\u89e3\u91cb\uff1a\u4e0d\u53ea\u7d66\u6307\u4ee4\uff0c\u4e5f\u8aaa\u660e\u70ba\u4ec0\u9ebc\u8981\u9019\u6a23\u505a\u3001\u80cc\u5f8c\u5c0d\u61c9\u5230\u54ea\u500b\u7db2\u5143\u6216\u6d41\u7a0b\u3002</li> </ul>"},{"location":"doc-5g-core-book/zh/author/","title":"\u4f5c\u8005\u4ecb\u7d39","text":"\u675c\u5cef Alonza <p>Intern @ Saviah</p> <p>Committer @ free5GC</p> <p>PTRA @ Academia Sinica</p> <p>MS @ NYCU</p> <p>Hi \u6211\u662f\u675c\u5cef\uff0c\u76ee\u524d\u662f NYCU \u7684\u78a9\u58eb\u751f\u3002\u4e3b\u8981\u5c08\u6ce8\u65bc 5G \u6838\u5fc3\u7db2\u8def\uff08free5GC\uff09\u548c RAN/UE \u6a21\u64ec\u5668\u7684\u958b\u767c\u8207\u7814\u7a76\u3002</p> <p>\u5728\u5b78\u7fd2\u548c\u7814\u7a76 5G \u7684\u904e\u7a0b\u4e2d\uff0c\u6211\u767c\u73fe\u8a31\u591a\u521d\u5b78\u8005\u90fd\u9762\u81e8\u8457\u540c\u6a23\u7684\u56f0\u5883\uff1a\u7121\u5f9e\u4e0b\u624b\u3002\u56e0\u6b64\uff0c\u6211\u6c7a\u5b9a\u6574\u7406\u81ea\u5df1\u7684\u5b78\u7fd2\u904e\u7a0b\u548c\u5be6\u6230\u7d93\u9a57\uff0c\u5beb\u6210\u9019\u672c\u66f8\uff0c\u5e0c\u671b\u5e6b\u52a9\u66f4\u591a\u4eba\u5feb\u901f\u9032\u5165 5G \u7684\u4e16\u754c\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter1/","title":"\u7b2c 1 \u7ae0\uff1a\u5f9e 4G \u5230 5G \u2014 \u6838\u5fc3\u7db2\u67b6\u69cb\u7684\u6f14\u8b8a","text":""},{"location":"doc-5g-core-book/zh/part1-history/chapter1/#11","title":"1.1 \u4ec0\u9ebc\u662f\u6838\u5fc3\u7db2\u8def\uff1f","text":"<p>\u6211\u5011\u53ef\u4ee5\u628a\u6838\u5fc3\u7db2\u8def\u60f3\u50cf\u6210\u300c\u96fb\u4fe1\u7cfb\u7d71\u7684\u5927\u8166\u300d\uff0c\u8ca0\u8cac\u5728\u7528\u6236\u8a2d\u5099\uff08\u624b\u6a5f\u3001UE\uff09\u548c\u5916\u90e8\u4e16\u754c\uff08\u4f8b\u5982\u7db2\u969b\u7db2\u8def\u3001\u4f01\u696d\u5c08\u7db2\u3001\u5176\u4ed6\u71df\u904b\u5546\u7db2\u8def\uff09\u4e4b\u9593\u505a\u5404\u7a2e\u6c7a\u7b56\u8207\u5354\u8abf\u3002\u7576\u4e00\u652f\u624b\u6a5f\u958b\u6a5f\u3001\u8a3b\u518a\u3001\u4e0a\u7db2\u3001\u6253\u96fb\u8a71\u3001\u6216\u662f\u4f7f\u7528\u5404\u7a2e App \u7684\u6642\u5019\uff0c\u80cc\u5f8c\u5927\u90e8\u5206\u95dc\u9375\u7684\u63a7\u5236\u908f\u8f2f\uff0c\u90fd\u662f\u7531\u6838\u5fc3\u7db2\u8def\u5728\u8655\u7406\u3002</p> <p>\u6838\u5fc3\u7db2\u8def\u7684\u529f\u80fd\u53ef\u4ee5\u5927\u81f4\u5206\u6210\u5e7e\u500b\u9762\u5411\uff1a</p> <ol> <li> <p>\u7528\u6236\u8a3b\u518a</p> <p>\u8ca0\u8cac\u8fa8\u8b58\u300c\u4f60\u662f\u8ab0\u300d\uff0c\u78ba\u8a8d\u4f60\u662f\u5426\u662f\u5408\u6cd5\u7528\u6236\u3001\u4f60\u7684\u9580\u865f\u662f\u5426\u6709\u6548\u3001\u6709\u6c92\u6709\u6b20\u8cbb\u3001\u5141\u4e0d\u5141\u8a31\u6f2b\u904a\u7b49\u3002\u4ee5 4G/5G \u4f86\u8aaa\uff0c\u9019\u6703\u727d\u6d89\u5230\u9451\u6b0a\uff08Authentication\uff09\u3001\u4f4d\u7f6e\u767b\u9304\uff08Registration/Attach\uff09\uff0c\u4ee5\u53ca\u70ba\u6bcf\u500b\u7528\u6236\u5efa\u7acb\u5c0d\u61c9\u7684\u6703\u8a71\u4e0a\u4e0b\u6587\uff08Session/Context\uff09\u3002</p> </li> <li> <p>\u8cc7\u6e90\u7ba1\u7406</p> <p>\u7576\u7528\u6236\u958b\u59cb\u50b3\u8f38\u6578\u64da\uff08\u4f8b\u5982\u958b YouTube\u3001\u958b Teams\uff09\u3001\u6216\u5efa\u7acb\u8a9e\u97f3\u901a\u8a71\u6642\uff0c\u6838\u5fc3\u7db2\u8def\u9700\u8981\u70ba\u9019\u4e9b\u6d41\u91cf\u5206\u914d\u9069\u7576\u7684\u8cc7\u6e90\u3002\u9019\u5305\u542b\uff1a</p> <ul> <li>\u5efa\u7acb\u8207\u91cb\u653e EPS Bearer\uff084G\uff09 / PDU Session\uff085G\uff09</li> <li>\u914d\u7f6e QoS\uff08\u5982\u5ef6\u9072\u3001\u512a\u5148\u9806\u5e8f\u3001\u4fdd\u8b49\u983b\u5bec\uff09</li> <li>\u8207 RAN \u5354\u8abf\u7121\u7dda\u8cc7\u6e90\u4f7f\u7528\uff08\u4f8b\u5982\u54ea\u4e9b\u4f7f\u7528\u8005\u53ef\u4ee5\u62ff\u5230\u6bd4\u8f03\u9ad8\u512a\u5148\u6b0a\uff09</li> </ul> </li> <li> <p>\u6d41\u91cf\u5c0e\u5411</p> <p>\u6838\u5fc3\u7db2\u8def\u6c7a\u5b9a\u300c\u9019\u4e9b\u5c01\u5305\u8981\u5f80\u54ea\u88e1\u8d70\u300d\u3002\u4f8b\u5982\uff1a</p> <ul> <li>\u4e0a\u7db2\u6d41\u91cf\u8981\u9001\u5230\u54ea\u4e00\u500b P-GW\uff084G\uff09 / UPF\uff085G\uff09</li> <li>\u7279\u5b9a\u670d\u52d9\uff08VoLTE\u3001VoNR\u3001IMS\uff09\u662f\u5426\u9700\u8981\u9001\u5230\u7279\u6b8a\u7684\u61c9\u7528\u4f3a\u670d\u5668</li> </ul> <p>\u5728 5G \u67b6\u69cb\u4e0b\uff0c\u9019\u4e5f\u6703\u727d\u6d89\u5230 Uplink Classifier\uff08UL CL\uff09\u3001\u5206\u6d41\uff08Traffic Steering\uff09 \u7b49\u8a2d\u8a08\u3002</p> </li> <li> <p>\u8a08\u8cbb</p> <p>\u96fb\u4fe1\u71df\u904b\u5546\u9700\u8981\u77e5\u9053\u6bcf\u500b\u7528\u6236\u7528\u4e86\u591a\u5c11\u6d41\u91cf\u3001\u901a\u4e86\u591a\u4e45\u7684\u96fb\u8a71\u3001\u662f\u5426\u4f7f\u7528\u4e86\u7279\u5b9a\u7684\u589e\u503c\u670d\u52d9\uff0c\u624d\u80fd\u9032\u884c\u5f8c\u7e8c\u7684\u8a08\u8cbb\u8207\u5c0d\u5e33\u3002\u6838\u5fc3\u7db2\u8def\u6703\uff1a</p> <ul> <li>\u8490\u96c6\u4f7f\u7528\u91cf\u8cc7\u8a0a\uff08\u6d41\u91cf\u3001\u6642\u9593\u3001\u4e8b\u4ef6\uff09</li> <li>\u7522\u751f\u8a08\u8cbb\u7d00\u9304</li> <li>\u8207\u8a08\u8cbb\u7cfb\u7d71\u4e92\u52d5\uff0c\u652f\u63f4\u5373\u6642\uff08oneline\uff09\u6216\u96e2\u7dda(offline)\u8a08\u8cbb</li> </ul> </li> </ol> <p>\u7e3d\u7d50\u4f86\u8aaa\uff0c\u7121\u8ad6\u662f 2G\u30013G\u30014G \u9084\u662f 5G\uff0c\u6838\u5fc3\u7db2\u8def\u7684\u672c\u8cea\u90fd\u6c92\u6709\u6539\u8b8a\uff1a\u8ca0\u8cac\u300c\u8a8d\u4eba\u3001\u914d\u8cc7\u6e90\u3001\u6c7a\u5b9a\u8def\u7dda\u3001\u7b97\u9322\u300d\u3002\u5dee\u5225\u53ea\u662f\u5728\u4e0d\u540c\u4e16\u4ee3\u4e2d\uff0c\u5354\u5b9a\u3001\u4ecb\u9762\u8207\u529f\u80fd\u62c6\u5206\u65b9\u5f0f\u4e0d\u65b7\u6f14\u9032\uff0c\u4f7f\u5f97\u6838\u5fc3\u7db2\u8def\u53ef\u4ee5\u652f\u63f4\u66f4\u591a\u6a23\u7684\u670d\u52d9\u3001\u66f4\u7d30\u7dfb\u7684 QoS\uff0c\u4ee5\u53ca\u66f4\u9ad8\u7684\u5f48\u6027\u8207\u53ef\u7a0b\u5f0f\u5316\u80fd\u529b\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter1/#12-4g-epc","title":"1.2 4G EPC","text":""},{"location":"doc-5g-core-book/zh/part1-history/chapter1/#121-epc","title":"1.2.1 EPC \u67b6\u69cb\u7e3d\u89bd","text":"<p>\u5728 4G \u7cfb\u7d71\u4e2d\uff0cEPC\uff08Evolved Packet Core\uff0c\u6f14\u9032\u5c01\u5305\u6838\u5fc3\u7db2\u8def\uff09\u8ca0\u8cac\u628a\u7121\u7dda\u63a5\u53d6\uff08eNodeB\uff09\u8207\u5404\u7a2e\u5916\u90e8\u7db2\u8def\uff08\u4f8b\u5982 Internet\u3001\u4f01\u696d\u5c08\u7db2\uff09\u4e32\u63a5\u8d77\u4f86\u3002\u4e0b\u9762\u7c21\u55ae\u4ecb\u7d39\u5e7e\u500b\u5728 EPC \u4e2d\u6700\u6838\u5fc3\u7684\u7db2\u5143\uff1aHSS\u3001MME\u3001S-GW\u3001P-GW \u4ee5\u53ca eNodeB\u3002</p> <p></p> <ul> <li> <p>HSS\uff08Home Subscriber Server\uff09</p> <ul> <li>\u5132\u5b58\u7528\u6236\u7684\u57fa\u672c\u8cc7\u6599\uff1a\u4f8b\u5982 IMSI\u3001MSISDN\u3001\u670d\u52d9\u6b0a\u9650\u3001\u6f2b\u904a\u6b0a\u9650\u7b49</li> <li>\u5132\u5b58\u8207\u9451\u6b0a\u76f8\u95dc\u7684\u91d1\u9470\u8207\u53c3\u6578\uff0c\u7528\u4f86\u548c UE \u505a\u5b89\u5168\u9a57\u8b49</li> <li>\u63d0\u4f9b\u7528\u6236\u6240\u5c6c\u7684\u7db2\u8def\u4f4d\u7f6e\u8207\u6f2b\u904a\u8cc7\u8a0a\uff0c\u8b93 MME \u80fd\u627e\u5230\u6b63\u78ba\u7684\u7528\u6236\u8207\u7db2\u8def</li> </ul> </li> <li> <p>MME\uff08Mobility Management Entity\uff09</p> <ul> <li>\u8ca0\u8cac UE \u7684\u8a3b\u518a\uff08Attach\uff09\u8207\u91cb\u653e\u6d41\u7a0b</li> <li>\u8ca0\u8cac\u884c\u52d5\u6027\u7ba1\u7406\uff08Mobility Management\uff09\uff0c\u4f8b\u5982\u8ffd\u8e64 UE \u6240\u5728\u7684 eNodeB\u3001\u5207\u63db\uff08Handover\uff09\u5354\u8abf</li> <li>\u8ca0\u8cac\u9a57\u8b49\u7528\u6236\u8eab\u5206\uff08\u900f\u904e\u8207 HSS \u6e9d\u901a\uff09\uff0c\u6c7a\u5b9a\u662f\u5426\u5141\u8a31\u8a72 UE \u4f7f\u7528\u7db2\u8def</li> <li>\u5728\u5efa\u7acb\u6578\u64da\u627f\u8f09\u6642\uff0c\u8207 S-GW / P-GW \u5354\u8abf\uff0c\u5efa\u7acb\u5c0d\u61c9\u7684 EPS Bearer</li> </ul> </li> <li> <p>S-GW\uff08Serving Gateway\uff09</p> <ul> <li>\u8ca0\u8cac\u5728 eNodeB \u8207 P-GW \u4e4b\u9593\u8f49\u9001\u4f7f\u7528\u8005\u9762\uff08User Plane\uff09\u5c01\u5305</li> <li>\u7576 UE \u5728\u4e0d\u540c eNodeB \u6216\u4e0d\u540c\u5340\u57df\u4e4b\u9593\u79fb\u52d5\u6642\uff0cS-GW \u53ef\u4ee5\u4f5c\u70ba\u6578\u64da\u6d41\u91cf\u7684\u7a69\u5b9a\u9328\u9ede\uff0c\u6e1b\u5c11\u8def\u5f91\u91cd\u5efa\u7684\u6210\u672c</li> <li>\u8ca0\u8cac\u90e8\u4efd\u8a08\u8cbb\u8207\u6d41\u91cf\u7d71\u8a08\u76f8\u95dc\u529f\u80fd\uff0c\u63d0\u4f9b\u7d66\u5f8c\u7aef\u7cfb\u7d71\u4f7f\u7528</li> </ul> </li> <li> <p>P-GW\uff08Packet Data Network Gateway\uff09</p> <ul> <li>\u8ca0\u8cac\u70ba UE \u5206\u914d IP \u4f4d\u5740\uff0c\u8b93 UE \u53ef\u4ee5\u548c Internet \u6216\u4f01\u696d\u5c08\u7db2\u901a\u8a0a</li> <li>\u8ca0\u8cac\u57f7\u884c\u5404\u7a2e\u7b56\u7565\u8207\u8a08\u8cbb\u63a7\u5236\uff08\u8207 PCRF \u4e92\u52d5\uff09\uff0c\u4f8b\u5982\u983b\u5bec\u9650\u5236\u3001\u963b\u64cb/\u5141\u8a31\u7279\u5b9a\u670d\u52d9\u3001\u6d41\u91cf\u6574\u5f62\u7b49</li> <li>\u5e38\u5e38\u662f\u4f01\u696d\u5c08\u7db2\u3001IMS \u7cfb\u7d71\u6216\u5404\u7a2e\u61c9\u7528\u4f3a\u670d\u5668\u7684\u532f\u5165\u9ede</li> </ul> </li> <li> <p>eNodeB\uff08Evolved Node B\uff09</p> <ul> <li>4G \u57fa\u5730\u53f0</li> <li>\u8ca0\u8cac\u7121\u7dda\u96fb\u8cc7\u6e90\u7ba1\u7406\uff1a\u5305\u62ec\u6392\u7a0b\u3001\u8abf\u8b8a\u7de8\u78bc\u3001\u529f\u7387\u63a7\u5236\u7b49</li> <li>\u5c07 UE \u7684\u7121\u7dda\u4fe1\u865f\u8f49\u6210 IP \u5c01\u5305\uff0c\u900f\u904e S1-U \u4ecb\u9762\u9001\u5f80 S-GW</li> <li>\u900f\u904e S1-MME \u4ecb\u9762\u8207 MME \u6e9d\u901a\u63a7\u5236\u8a0a\u865f\uff08\u50cf\u662f RRC \u9023\u7dda\u3001Attach\u3001TAU \u7b49\uff09</li> <li>\u652f\u63f4 eNodeB \u4e4b\u9593\u7684 X2 \u4ecb\u9762\uff0c\u7528\u65bc\u5207\u63db\uff08Handover\uff09\u8207\u8ca0\u8f09\u5e73\u8861</li> </ul> </li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter1/#122-2g3g4g","title":"1.2.2 2G/3G/4G \u7684\u6838\u5fc3\u7db2\u8def\u9650\u5236","text":"<p>\u5728 2G/3G/4G \u7684\u6642\u4ee3\uff0c\u6838\u5fc3\u7db2\u8def\u96d6\u7136\u5df2\u7d93\u53ef\u4ee5\u652f\u63f4\u8a9e\u97f3\u3001\u7c21\u8a0a\u8207\u884c\u52d5\u4e0a\u7db2\uff0c\u4f46\u5728\u67b6\u69cb\u8207\u529f\u80fd\u4e0a\uff0c\u4ecd\u5b58\u5728\u5e7e\u500b\u95dc\u9375\u9650\u5236\uff0c\u8b93\u5b83\u5f88\u96e3\u6eff\u8db3\u5f8c\u4f86 5G \u6240\u8ffd\u6c42\u7684\u9ad8\u5f48\u6027\u3001\u9ad8\u6548\u7387\u8207\u591a\u6a23\u5316\u670d\u52d9\u9700\u6c42\uff1a</p> <ul> <li> <p>\u67b6\u69cb\u5c01\u9589\u3001\u7db2\u5143\u7d81\u6b7b</p> <ul> <li>\u591a\u6578\u529f\u80fd\u88ab\u6253\u5305\u5728\u5c11\u6578\u5927\u578b\u7db2\u5143\u4e2d\uff08\u5982 SGSN/GGSN\u3001MME/S-GW/P-GW\uff09\uff0c\u5f7c\u6b64\u9ad8\u5ea6\u8026\u5408\u3002</li> <li>\u60f3\u8981\u65b0\u589e\u529f\u80fd\u6216\u512a\u5316\u8def\u5f91\uff0c\u5e38\u5e38\u6703\u53d7\u5230\u8a2d\u5099\u5ee0\u5546\u8207\u65e2\u6709\u4ecb\u9762\u7684\u9650\u5236\uff0c\u7f3a\u4e4f\u5f48\u6027\u3002</li> </ul> </li> <li> <p>\u63a7\u5236\u9762\u8207\u4f7f\u7528\u8005\u9762\u7684\u5206\u96e2\u4e0d\u5920\u5fb9\u5e95</p> <ul> <li>\u96d6\u7136\u5728 4G EPC \u4e2d\u5df2\u7d93\u958b\u59cb\u5207\u5206\u63a7\u5236\u9762\uff08MME\uff09\u548c\u4f7f\u7528\u8005\u9762\uff08S-GW/P-GW\uff09\uff0c\u4f46\u5728\u5be6\u4f5c\u8207\u90e8\u7f72\u4e0a\uff0c\u4ecd\u7d93\u5e38\u4ee5\u300c\u6574\u5957\u8a2d\u5099\u300d\u601d\u7dad\u70ba\u4e3b\u3002</li> <li>\u5c0d\u65bc\u5f8c\u4f86\u5e0c\u671b\u505a\u5230\u7684\u96c6\u4e2d\u63a7\u5236\u3001\u591a\u9ede\u5206\u6d41\u3001\u908a\u7de3\u8a08\u7b97\uff08MEC\uff09\u7b49\u5834\u666f\uff0c\u652f\u63f4\u5ea6\u6709\u9650\u3002</li> </ul> </li> <li> <p>\u670d\u52d9\u985e\u578b\u76f8\u5c0d\u55ae\u4e00\uff0cQoS \u5f48\u6027\u6709\u9650</p> <ul> <li>\u4e3b\u8981\u670d\u52d9\u578b\u614b\u662f\u300c\u884c\u52d5\u4e0a\u7db2 + \u8a9e\u97f3/\u7c21\u8a0a\u300d\uff0c\u5c0d IoT\u3001\u8d85\u9ad8\u53ef\u9760\u4f4e\u5ef6\u9072\uff08URLLC\uff09\u3001\u5782\u76f4\u7522\u696d\u5c08\u7db2\u7b49\u5834\u666f\u7684\u539f\u751f\u652f\u63f4\u4e0d\u8db3\u3002</li> <li>QoS \u96d6\u7136\u6709\u7b49\u7d1a\u5340\u5206\uff0c\u4f46\u96e3\u4ee5\u505a\u5230\u91dd\u5c0d\u4e0d\u540c\u696d\u52d9\u3001\u4e0d\u540c\u4f01\u696d\u5ba2\u6236\uff0c\u9032\u884c\u7d30\u7dfb\u53c8\u53ef\u7a0b\u5f0f\u5316\u7684\u7b56\u7565\u63a7\u5236\u3002</li> </ul> </li> <li> <p>\u64f4\u5c55\u6027\u8207\u90e8\u7f72\u6a21\u5f0f\u53d7\u9650\u65bc\u786c\u9ad4</p> <ul> <li>\u50b3\u7d71\u6838\u5fc3\u7db2\u8def\u591a\u534a\u4ee5\u5be6\u9ad4\u8a2d\u5099\u6216\u865b\u64ec\u6a5f\u70ba\u4e3b\uff0c\u5782\u76f4\u64f4\u5145\uff08scale up\uff09\u70ba\u4e3b\uff0c\u6a6b\u5411\u64f4\u5c55\uff08scale out\uff09\u80fd\u529b\u6709\u9650\u3002</li> <li>\u96e3\u4ee5\u914d\u5408\u6d41\u91cf\u9ad8\u5cf0\u6216\u81e8\u6642\u6d3b\u52d5\uff08\u4f8b\u5982\u5927\u578b\u6f14\u5531\u6703\u3001\u9ad4\u80b2\u8cfd\u4e8b\uff09\u5feb\u901f\u8abf\u6574\u8cc7\u6e90\uff0c\u66f4\u96e3\u505a\u5230\u300c\u6309\u9700\u3001\u5f48\u6027\u300d\u7684\u96f2\u539f\u751f\u90e8\u7f72\u3002</li> </ul> </li> <li> <p>\u5c0d\u96f2\u539f\u751f\u8207\u5207\u7247\uff08Network Slicing\uff09\u7684\u652f\u63f4\u4e0d\u8db3</p> <ul> <li>2G/3G/4G \u7684\u8a2d\u8a08\u4e26\u672a\u4ee5\u300c\u591a\u79df\u6236\u3001\u591a\u5207\u7247\u300d\u70ba\u524d\u63d0\uff0c\u901a\u5e38\u662f\u4e00\u5f35\u7db2\u8def\u670d\u52d9\u6240\u6709\u7528\u6236\u3002</li> <li>\u8981\u70ba\u4e0d\u540c\u4f01\u696d\u3001\u884c\u696d\u5ba2\u88fd\u5316\u4e00\u7d44\u6838\u5fc3\u7db2\u8def\u908f\u8f2f\u6216\u8cc7\u6e90\u5207\u7247\uff0c\u6210\u672c\u9ad8\u3001\u5f48\u6027\u5dee\uff0c\u4e5f\u4e0d\u6613\u81ea\u52d5\u5316\u3002</li> </ul> </li> </ul> <p>\u4e5f\u56e0\u70ba\u4e0a\u8ff0\u9019\u4e9b\u9650\u5236\uff0c\u7576\u884c\u52d5\u7db2\u8def\u5f9e\u300c\u55ae\u4e00\u5927\u773e\u670d\u52d9\u300d\u8d70\u5411\u300c\u591a\u5143\u5782\u76f4\u5834\u666f\u300d\u6642\uff0c\u539f\u6709 2G/3G/4G \u7684\u6838\u5fc3\u7db2\u8def\u67b6\u69cb\u5c31\u986f\u5f97\u5403\u529b\uff0c\u9019\u4e5f\u6210\u70ba 5G \u91cd\u65b0\u8a2d\u8a08\u6838\u5fc3\u7db2\u8def\uff085GC\uff09\u3001\u5c0e\u5165\u670d\u52d9\u5316\u67b6\u69cb\uff08SBA\uff09\u3001\u96f2\u539f\u751f\u8207\u7db2\u8def\u5207\u7247\uff08Network Slicing\uff09\u7b49\u6982\u5ff5\u7684\u91cd\u8981\u80cc\u666f\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter1/#13-5g-5gc","title":"1.3 5G \u6838\u5fc3\u7db2\u8def\uff085GC\uff09\u7684\u9700\u6c42\u8207\u8a2d\u8a08\u7406\u5ff5","text":""},{"location":"doc-5g-core-book/zh/part1-history/chapter1/#131-5g","title":"1.3.1 5G \u6838\u5fc3\u7db2\u8def\u7684\u9700\u6c42","text":"<p>5G \u4e26\u4e0d\u662f\u55ae\u7d14\u628a 4G\u300c\u52a0\u5feb\u4e00\u9ede\u300d\u800c\u5df2\uff0c\u800c\u662f\u8981\u540c\u6642\u652f\u63f4\u4e09\u7a2e\u5b8c\u5168\u4e0d\u540c\u7279\u6027\u7684\u670d\u52d9\u985e\u578b\uff0c\u9019\u4e09\u5927\u5834\u666f\u4e5f\u76f4\u63a5\u6c7a\u5b9a\u4e86 5GC \u7684\u8a2d\u8a08\u65b9\u5411\uff1a</p> <ul> <li> <p>eMBB\uff08enhanced Mobile Broadband\uff0c\u52a0\u5f37\u578b\u884c\u52d5\u5bec\u983b\uff09</p> <p>\u4e3b\u8981\u76ee\u6a19\u662f\u300c\u66f4\u9ad8\u7684\u901f\u7387\u8207\u66f4\u5927\u7684\u5bb9\u91cf\u300d\uff0c\u4f8b\u5982 4K/8K \u4e32\u6d41\u3001AR/VR\u3001\u96f2\u7aef\u904a\u6232\u7b49\u3002 \u5c0d\u6838\u5fc3\u7db2\u4f86\u8aaa\uff0c\u5fc5\u9808\u80fd\u5920\u652f\u63f4\u5927\u91cf\u9ad8\u983b\u5bec\u6d41\u91cf\uff0c\u4e26\u5728\u9ad8\u8ca0\u8f09\u60c5\u6cc1\u4e0b\u7dad\u6301\u7a69\u5b9a\u7684 QoS\uff08\u4f8b\u5982\u541e\u5410\u91cf\u3001\u5ef6\u9072\u3001\u4e1f\u5305\u7387\uff09\u3002</p> </li> <li> <p>URLLC\uff08Ultra-Reliable Low Latency Communications\uff0c\u8d85\u9ad8\u53ef\u9760\u4f4e\u5ef6\u9072\u901a\u8a0a\uff09</p> <p>\u91dd\u5c0d\u81ea\u52d5\u99d5\u99db\u3001\u9060\u7aef\u624b\u8853\u3001\u5de5\u696d\u63a7\u5236\u7b49\u5834\u666f\uff0c\u8981\u6c42\u300c\u6beb\u79d2\u7d1a\u751a\u81f3\u6b21\u6beb\u79d2\u7d1a\u5ef6\u9072\u300d\u4ee5\u53ca\u6975\u9ad8\u53ef\u9760\u5ea6\u3002 \u9019\u4ee3\u8868\u6838\u5fc3\u7db2\u8def\u5fc5\u9808\u76e1\u53ef\u80fd\u7e2e\u77ed\u8cc7\u6599\u8def\u5f91\uff0c\u4e26\u5141\u8a31\u5c07\u4f7f\u7528\u8005\u9762\u529f\u80fd\u4e0b\u6c89\u5230\u908a\u7de3\uff08MEC\uff09\uff0c\u540c\u6642\u63d0\u4f9b\u66f4\u7d30\u7dfb\u7684\u512a\u5148\u6b0a\u8207\u4fdd\u8b77\u6a5f\u5236\u3002</p> </li> <li> <p>mMTC\uff08massive Machine Type Communications\uff0c\u5927\u898f\u6a21\u6a5f\u5668\u578b\u901a\u8a0a\uff09</p> <p>\u9762\u5411\u6d77\u91cf IoT \u88dd\u7f6e\uff0c\u4f8b\u5982\u667a\u6167\u96fb\u8868\u3001\u611f\u6e2c\u5668\u3001\u7a7f\u6234\u88dd\u7f6e\u7b49\uff0c\u6bcf\u500b\u88dd\u7f6e\u672c\u8eab\u6d41\u91cf\u4e0d\u9ad8\uff0c\u4f46\u300c\u6578\u91cf\u6975\u5927\u300d\u3002 \u6838\u5fc3\u7db2\u9700\u8981\u80fd\u652f\u63f4\u9ad8\u5bc6\u5ea6\u8a3b\u518a\u3001\u4f4e\u6210\u672c\u9023\u7dda\uff0c\u4ee5\u53ca\u9069\u5408\u9577\u6642\u9593\u5f85\u6a5f\u3001\u9593\u6b47\u6027\u4e0a\u5831\u7684\u9023\u7dda\u6a21\u5f0f\uff08\u4f8b\u5982 5G \u7684\u7bc0\u80fd\u8207\u7701\u96fb\u8a2d\u8a08\uff09\u3002</p> </li> </ul> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u591a\u6a23\u5316 IoT \u8207\u5782\u76f4\u884c\u696d\u670d\u52d9\u7684\u7206\u767c\uff0c\u4e5f\u5c0d 5GC \u63d0\u51fa\u4e86\u65b0\u7684\u8981\u6c42\uff1a</p> <ul> <li>\u4e0d\u540c\u4f01\u696d / \u884c\u696d\uff08\u5982\u5de5\u5ee0\u3001\u81ea\u99d5\u8eca\u3001\u91ab\u7642\uff09\u5c0d\u5b89\u5168\u3001\u9694\u96e2\u6027\u3001\u5ef6\u9072\u8207\u53ef\u9760\u5ea6\u7684\u9700\u6c42\u5dee\u7570\u6975\u5927  </li> <li>\u50b3\u7d71\u300c\u4e00\u5f35\u7db2\u8def\u670d\u52d9\u6240\u6709\u4eba\u300d\u7684\u6a21\u5f0f\u5df2\u7d93\u4e0d\u6577\u4f7f\u7528\uff0c\u9700\u8981\u80fd\u5920\u91dd\u5c0d\u4e0d\u540c\u5ba2\u6236\u3001\u4e0d\u540c\u61c9\u7528\uff0c\u5feb\u901f\u6253\u9020\u5ba2\u88fd\u5316\u7684\u7db2\u8def\u300c\u5207\u7247\u300d\u8207\u7b56\u7565  </li> <li>\u7db2\u8def\u672c\u8eab\u5fc5\u9808\u66f4\u5bb9\u6613\u8207 IT / Cloud \u74b0\u5883\u6574\u5408\uff0c\u652f\u63f4\u81ea\u52d5\u5316\u90e8\u7f72\u3001\u5f48\u6027\u64f4\u5c55\u8207 DevOps \u6a21\u5f0f</li> </ul> <p>\u9019\u4e9b\u9700\u6c42\u5171\u540c\u63a8\u52d5\u4e86 5G \u6838\u5fc3\u7db2\u8def\u5f9e\u300c\u50b3\u7d71\u96fb\u4fe1\u8a2d\u5099\u300d\u8d70\u5411\u300c\u96f2\u539f\u751f\u670d\u52d9\u5316\u67b6\u69cb\u300d\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter1/#132-5g","title":"1.3.2 5G \u6838\u5fc3\u7db2\u8def\u7684\u8a2d\u8a08\u7406\u5ff5","text":"<p>\u70ba\u4e86\u6eff\u8db3\u4e0a\u8ff0\u9700\u6c42\uff0c3GPP \u5728\u8a2d\u8a08 5GC \u6642\uff0c\u6838\u5fc3\u7406\u5ff5\u5927\u81f4\u53ef\u6b78\u7d0d\u70ba\u4e09\u500b\u95dc\u9375\u65b9\u5411\uff1a</p> <ul> <li> <p>SBA\uff08Service-Based Architecture\uff0c\u670d\u52d9\u5316\u67b6\u69cb\uff09\u5f15\u5165</p> <p>5GC \u4e0d\u518d\u4ee5\u300c\u55ae\u4e00\u5927\u578b\u7db2\u5143\u300d\u70ba\u4e2d\u5fc3\uff0c\u800c\u662f\u5c07\u6838\u5fc3\u529f\u80fd\u62c6\u5206\u6210\u591a\u500b\u7db2\u8def\u529f\u80fd\uff08NF\uff09\uff0c\u4f8b\u5982 AMF\u3001SMF\u3001UPF\u3001UDM\u3001PCF \u7b49\uff0c\u4e26\u900f\u904e HTTP + JSON / REST \u98a8\u683c \u7684\u4ecb\u9762\u9032\u884c\u4e92\u52d5\u3002 \u6bcf\u500b NF \u5c0d\u5916\u63d0\u4f9b\u6e05\u695a\u5b9a\u7fa9\u7684\u300c\u670d\u52d9\u300d\uff0c\u5176\u4ed6 NF \u53ea\u8981\u900f\u904e\u670d\u52d9\u540d\u7a31\u5c31\u80fd\u767c\u73fe\u4e26\u547c\u53eb\u5b83\uff0c\u9019\u7a2e\u8a2d\u8a08\uff1a</p> <ul> <li>\u8b93\u7db2\u8def\u529f\u80fd\u53ef\u4ee5\u7368\u7acb\u958b\u767c\u3001\u5347\u7d1a\u8207\u64f4\u5c55  </li> <li>\u66f4\u5bb9\u6613\u5c0e\u5165\u5fae\u670d\u52d9\u8207\u5bb9\u5668\u5316\uff08\u5982 Kubernetes\uff09  </li> <li>\u8b93\u96fb\u4fe1\u7db2\u8def\u66f4\u63a5\u8fd1\u4e00\u822c IT / Cloud \u7cfb\u7d71\u7684\u8a2d\u8a08\u6a21\u5f0f</li> </ul> </li> <li> <p>CUPS\uff08Control and User Plane Separation\uff0c\u63a7\u5236\u9762\u8207\u4f7f\u7528\u8005\u9762\u5206\u96e2\uff09\u652f\u63f4</p> <p>\u96d6\u7136 4G EPC \u5c31\u5df2\u958b\u59cb\u505a CUPS\uff0c\u4f46\u5728 5GC \u4e2d\uff0c\u63a7\u5236\u9762\uff08\u4f8b\u5982 AMF\u3001SMF\uff09\u8207\u4f7f\u7528\u8005\u9762\uff08UPF\uff09\u5206\u96e2\u5f97\u66f4\u5fb9\u5e95\u3002 \u5982\u6b64\u4e00\u4f86\uff1a</p> <ul> <li>\u63a7\u5236\u9762\u53ef\u4ee5\u96c6\u4e2d\u90e8\u7f72\u3001\u7d71\u4e00\u7ba1\u7406\u908f\u8f2f\u8207\u7b56\u7565  </li> <li>\u4f7f\u7528\u8005\u9762\uff08UPF\uff09\u53ef\u4ee5\u4f9d\u7167\u9700\u6c42\u5206\u6563\u5230\u908a\u7de3\u6216\u4e0d\u540c\u5730\u7406\u4f4d\u7f6e\uff0c\u7e2e\u77ed\u8cc7\u6599\u8def\u5f91\u3001\u964d\u4f4e\u5ef6\u9072  </li> <li>\u66f4\u5bb9\u6613\u6839\u64da\u6d41\u91cf\u578b\u614b\u8207\u670d\u52d9\u9700\u6c42\uff0c\u7368\u7acb\u5c0d\u63a7\u5236\u9762\u6216\u4f7f\u7528\u8005\u9762\u505a\u64f4\u7e2e\u5bb9\uff08scale in/out\uff09</li> </ul> </li> <li> <p>\u96f2\u539f\u751f\u8207\u7db2\u8def\u5207\u7247\uff08Network Slicing\uff09</p> <p>5GC \u5f9e\u8a2d\u8a08\u4e4b\u521d\u5c31\u8003\u616e\u5728\u96f2\u74b0\u5883\u4e0a\u904b\u884c\uff0c\u652f\u63f4\u5bb9\u5668\u5316\u3001\u5fae\u670d\u52d9\u8207\u81ea\u52d5\u5316\u7de8\u6392\u3002 \u5728\u6b64\u57fa\u790e\u4e0a\uff0c5GC \u5f15\u5165\u4e86 Network Slicing \u6982\u5ff5\uff1a\u5728\u540c\u4e00\u5957\u7269\u7406\u7db2\u8def\u4e0a\uff0c\u908f\u8f2f\u4e0a\u5207\u51fa\u591a\u500b\u7aef\u5230\u7aef\u7684\u300c\u865b\u64ec\u7db2\u8def\u300d\uff0c\u6bcf\u4e00\u500b\u5207\u7247\u53ef\u4ee5\u6709\uff1a</p> <ul> <li>\u4e0d\u540c\u7684\u7db2\u8def\u529f\u80fd\u7d44\u5408\u8207\u914d\u7f6e  </li> <li>\u4e0d\u540c\u7684 QoS \u7b56\u7565\u3001\u5b89\u5168\u7b49\u7d1a\u8207\u7ba1\u7406\u908f\u8f2f  </li> <li>\u5c0d\u61c9\u4e0d\u540c\u5ba2\u6236\u6216\u884c\u696d\u5834\u666f\uff08\u4f8b\u5982\uff1a\u4e00\u500b\u5207\u7247\u5c08\u9580\u7d66 mMTC\uff0c\u4e00\u500b\u7d66 URLLC \u5de5\u696d\u63a7\u5236\uff09  </li> </ul> </li> </ul> <p>\u900f\u904e SBA\u3001CUPS \u4ee5\u53ca\u96f2\u539f\u751f\u5207\u7247\u7b49\u8a2d\u8a08\uff0c5G \u6838\u5fc3\u7db2\u8def\u76f8\u8f03\u65bc\u904e\u53bb\u4e16\u4ee3\uff0c\u5f9e\u300c\u55ae\u4e00\u7528\u9014\u3001\u96e3\u4ee5\u8b8a\u66f4\u7684\u96fb\u4fe1\u5c08\u7db2\u300d\u9010\u6b65\u6f14\u9032\u70ba\u300c\u53ef\u7a0b\u5f0f\u5316\u3001\u53ef\u5207\u7247\u3001\u53ef\u5ba2\u88fd\u5316\u7684\u901a\u7528\u6578\u4f4d\u57fa\u790e\u8a2d\u65bd\u300d\uff0c\u70ba\u5f8c\u7e8c\u66f4\u591a\u5275\u65b0\u61c9\u7528\u9810\u7559\u4e86\u7a7a\u9593\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter1/#14","title":"1.4 \u672c\u7ae0\u5c0f\u7d50","text":"<p>\u672c\u7ae0\u5f9e\u300c\u4ec0\u9ebc\u662f\u6838\u5fc3\u7db2\u8def\u300d\u51fa\u767c\uff0c\u8aaa\u660e\u4e86\u6838\u5fc3\u7db2\u5728\u884c\u52d5\u901a\u8a0a\u7cfb\u7d71\u4e2d\u7684\u89d2\u8272\uff1a\u8ca0\u8cac\u8a8d\u8b49\u7528\u6236\u3001\u5206\u914d\u8207\u7ba1\u7406\u8cc7\u6e90\u3001\u6c7a\u5b9a\u6d41\u91cf\u8def\u5f91\uff0c\u4ee5\u53ca\u652f\u63f4\u8a08\u8cbb\u8207\u5c0d\u5e33\uff0c\u662f\u6574\u500b\u7db2\u8def\u7684\u300c\u5927\u8166\u300d\u3002\u63a5\u8457\uff0c\u6211\u5011\u56de\u9867\u4e86 4G EPC \u7684\u6574\u9ad4\u67b6\u69cb\u8207\u5404\u500b\u95dc\u9375\u7db2\u5143\uff08HSS\u3001MME\u3001S-GW\u3001P-GW\u3001eNodeB\uff09\u7684\u8077\u8cac\uff0c\u4e26\u9ede\u51fa 2G/3G/4G \u4e16\u4ee3\u5728\u67b6\u69cb\u5c01\u9589\u3001C/U \u5206\u96e2\u4e0d\u8db3\u3001\u670d\u52d9\u578b\u614b\u55ae\u4e00\u3001\u64f4\u5c55\u6027\u8207\u96f2\u539f\u751f\u80fd\u529b\u7b49\u65b9\u9762\u7684\u9650\u5236\u3002</p> <p>\u5728\u6b64\u57fa\u790e\u4e0a\uff0c\u6211\u5011\u7e3d\u7d50\u4e86 5G \u6838\u5fc3\u7db2\u8def\uff085GC\uff09\u8a95\u751f\u7684\u9700\u6c42\u8207\u8a2d\u8a08\u7406\u5ff5\uff1a\u70ba\u4e86\u652f\u63f4 eMBB\u3001URLLC\u3001mMTC \u7b49\u591a\u6a23\u5316\u5834\u666f\uff0c\u4ee5\u53ca\u5782\u76f4\u884c\u696d\u8207\u4f01\u696d\u5c08\u7db2\u7684\u5dee\u7570\u5316\u9700\u6c42\uff0c5GC \u5fc5\u9808\u8d70\u5411\u670d\u52d9\u5316\u67b6\u69cb\uff08SBA\uff09\u3001\u66f4\u5fb9\u5e95\u7684 CUPS \u5206\u96e2\uff0c\u4ee5\u53ca\u96f2\u539f\u751f\u8207\u7db2\u8def\u5207\u7247\u3002\u9019\u4e9b\u8a2d\u8a08\u8b93\u6838\u5fc3\u7db2\u5f9e\u50b3\u7d71\u5c01\u9589\u8a2d\u5099\uff0c\u6f14\u9032\u70ba\u53ef\u7a0b\u5f0f\u5316\u3001\u53ef\u5ba2\u88fd\u5316\u7684\u6578\u4f4d\u57fa\u790e\u8a2d\u65bd\u3002\u5f8c\u7e8c\u7ae0\u7bc0\u5c07\u5728\u9019\u500b\u6b77\u53f2\u8108\u7d61\u4e4b\u4e0a\uff0c\u5f9e 3GPP \u7684\u89d2\u5ea6\u66f4\u7cfb\u7d71\u5730\u4ecb\u7d39 5G \u6838\u5fc3\u7db2\u7684\u529f\u80fd\u8207\u67b6\u69cb\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/","title":"\u7b2c 2 \u7ae0\uff1a5G \u6838\u5fc3\u7db2 3GPP \u89d2\u5ea6\u7e3d\u89bd","text":"<p>\u5728\u7b2c\u4e00\u7ae0\u88e1\uff0c\u6211\u5011\u5f9e\u300c\u70ba\u4ec0\u9ebc\u9700\u8981\u6838\u5fc3\u7db2\u8def\u300d\u8207\u300c4G EPC \u7684\u6f14\u9032\u8207\u9650\u5236\u300d\u958b\u59cb\u8ac7\u8d77\u3002 \u5f9e\u9019\u4e00\u7ae0\u958b\u59cb\uff0c\u6211\u5011\u6703\u7528 3GPP \u7684\u8996\u89d2\uff0c\u4f86\u770b\u6574\u500b 5G \u7cfb\u7d71\uff085GS\uff09\u7684\u8a2d\u8a08\uff1a \u6a19\u6e96\u600e\u9ebc\u8a02\u3001\u7cfb\u7d71\u5927\u81f4\u9577\u4ec0\u9ebc\u6a23\u5b50\u30015G \u88e1\u5e38\u88ab\u63d0\u5230\u7684 SBA\u3001\u63a5\u53e3\uff08N1/N2/N3\u2026\uff09\u5230\u5e95\u662f\u4ec0\u9ebc\u610f\u601d\u3002</p> <p>Important</p> <p>\u672c\u7ae0\u7684\u76ee\u6a19\u4e0d\u662f\u8b93\u4f60\u80cc\u4e0b\u6240\u6709\u7de8\u865f\uff0c\u800c\u662f\u5148\u5efa\u7acb\u4e00\u500b\u7a7a\u9593\u611f\uff1a  </p> <p>\u77e5\u9053\u300c5G \u7cfb\u7d71\u5927\u81f4\u9577\u600e\u6a23\u300d\u3001\u300c\u63a7\u5236\u9762\u8ddf\u4f7f\u7528\u8005\u9762\u600e\u9ebc\u5206\u300d\uff0c\u8a73\u7d30\u7684\u95dc\u9375\u6982\u5ff5\u5305\u542b\u5404\u500b NF \u7684\u5be6\u969b\u4f5c\u7528\u4e4b\u5f8c\u9084\u6703\u518d\u7d30\u8b1b\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#21-3gpp-5g","title":"2.1 3GPP \u8207 5G \u7cfb\u7d71\u6a19\u6e96\u5316\u6982\u8ff0","text":"<p>\u8981\u7406\u89e3 5G \u6838\u5fc3\u7db2\uff0c\u7b2c\u4e00\u6b65\u5176\u5be6\u662f\u641e\u61c2\uff1a\u8ab0\u5728\u8a02\u898f\u683c\uff1f\u898f\u683c\u9577\u4ec0\u9ebc\u6a23\u5b50\uff1f</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#211-3gpp","title":"2.1.1 3GPP \u662f\u4ec0\u9ebc\uff1f","text":"<p>3GPP\uff083rd Generation Partnership Project\uff09\u662f\u4e00\u500b\u570b\u969b\u6027\u6a19\u6e96\u7d44\u7e54\uff0c\u8ca0\u8cac\u5236\u5b9a 3G\u30014G\u30015G \u76f8\u95dc\u7684\u6280\u8853\u6a19\u6e96\u3002 \u5b83\u4e0d\u662f\u4e00\u5bb6\u516c\u53f8\uff0c\u800c\u662f\u4e00\u500b\u300c\u5408\u4f5c\u5e73\u53f0\u300d\uff0c\u6210\u54e1\u5305\u542b\u8a2d\u5099\u5546\u3001\u71df\u904b\u5546\u3001\u6676\u7247\u5546\u3001\u7814\u7a76\u55ae\u4f4d\u7b49\u3002</p> <p>\u5728 3GPP \u88e1\uff0c\u5927\u81f4\u53ef\u4ee5\u5206\u6210\u4e09\u5927\u65b9\u5411\u7684\u5de5\u4f5c\u7d44\uff1a</p> <ul> <li> <p>SA\uff08Service &amp; System Aspects\uff09</p> <p>\u8ca0\u8cac\u300c\u6574\u9ad4\u67b6\u69cb\u300d\u8207\u300c\u670d\u52d9\u9700\u6c42\u300d\u7684\u8a2d\u8a08\u3002 \u4f8b\u5982\uff1a5G \u7cfb\u7d71\uff085GS\uff09\u7684\u6574\u9ad4\u67b6\u69cb\u3001\u7db2\u8def\u529f\u80fd\u600e\u9ebc\u5207\u5206\u3001\u6709\u54ea\u4e9b\u63a5\u53e3\u3001\u652f\u63f4\u54ea\u4e9b\u670d\u52d9\u985e\u578b\u7b49\uff0c\u90fd\u662f\u5728 SA \u9019\u908a\u8a0e\u8ad6\u3002</p> </li> <li> <p>RAN\uff08Radio Access Network\uff09</p> <p>\u5c08\u6ce8\u5728\u300c\u7121\u7dda\u63a5\u53d6\u6280\u8853\u300d\uff0c\u4e5f\u5c31\u662f NR\uff08New Radio\uff09\u7684\u5354\u5b9a\u3001\u8a0a\u865f\u8a2d\u8a08\u3001\u7a7a\u53e3\u76f8\u95dc\u898f\u683c\u3002 \u5e38\u807d\u5230\u7684 38.xxx \u7cfb\u5217\uff08\u4f8b\u5982 38.300\u300138.331\uff09\uff0c\u5c31\u662f\u898f\u5b9a RAN \u7684\u898f\u683c\u66f8\u3002</p> </li> <li> <p>CT\uff08Core Network &amp; Terminals\uff09</p> <p>\u8ca0\u8cac\u300c\u6838\u5fc3\u7db2\u8207\u7d42\u7aef\u76f8\u95dc\u7684\u5354\u5b9a\u8207\u8a0a\u4ee4\u300d\u3002 \u4f8b\u5982 UE \u5982\u4f55\u8ddf\u6838\u5fc3\u7db2\u4ea4\u63e1\u3001NAS/NGAP \u8a0a\u4ee4\u9577\u4ec0\u9ebc\u6a23\u5b50\uff0c\u9084\u6709\u5404\u7a2e\u547c\u53eb\u6d41\u7a0b\u7684\u7d30\u7bc0\uff0c\u90fd\u5728 CT \u88e1\u88ab\u5b9a\u7fa9\u3002</p> </li> </ul> <p>Tip</p> <p>\u53ef\u4ee5\u7c21\u55ae\u9019\u6a23\u8a18\uff1a</p> <ul> <li>SA\uff1a\u6c7a\u5b9a 5G \u9577\u4ec0\u9ebc\u6a23\u5b50\uff08\u67b6\u69cb\u8207\u670d\u52d9\uff09</li> <li>RAN\uff1a\u6c7a\u5b9a\u7121\u7dda\u600e\u9ebc\u50b3</li> <li>CT\uff1a\u6c7a\u5b9a\u8a0a\u4ee4\u600e\u9ebc\u8d70\u3001\u6d41\u7a0b\u600e\u9ebc\u8dd1</li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#212-23501-23502-23503","title":"2.1.2 23.501 / 23.502 / 23.503 \u7684\u89d2\u8272","text":"<p>\u5728 5G \u6838\u5fc3\u7db2\u76f8\u95dc\u7684\u6587\u4ef6\u88e1\uff0c\u6700\u5e38\u88ab\u63d0\u5230\u7684\u4e09\u500b TS\uff08Technical Specification\uff09\u662f\uff1a</p> <ul> <li> <p>TS 23.501 - \u7cfb\u7d71\u67b6\u69cb\uff08System Architecture\uff09</p> <p>\u9019\u4efd\u6587\u4ef6\u4e3b\u8981\u5728\u5b9a\u7fa9\u300c5G \u7cfb\u7d71\u6574\u9ad4\u67b6\u69cb\u300d\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u6709\u54ea\u4e9b\u7db2\u8def\u529f\u80fd\uff08NF\uff09\uff0c\u4f8b\u5982 AMF\u3001SMF\u3001UPF \u7b49</li> <li>\u5b83\u5011\u4e4b\u9593\u6709\u54ea\u4e9b\u63a5\u53e3\uff08N1\u3001N2\u3001N3\u3001N4\u3001N6\u3001Nn\u2026\uff09</li> <li>\u4e0d\u540c\u670d\u52d9\u5834\u666f\uff08eMBB/URLLC/mMTC\uff09\u5728\u67b6\u69cb\u4e0a\u7684\u652f\u63f4\u65b9\u5f0f</li> </ul> <p>\u53ef\u4ee5\u628a 23.501 \u60f3\u6210\u300c5G \u7684\u5efa\u7bc9\u85cd\u5716\u300d\u3002</p> </li> <li> <p>TS 23.502 - \u7a0b\u5e8f\u8207\u6d41\u7a0b\uff08Procedures\uff09</p> <p>\u5c08\u9580\u63cf\u8ff0\u300c\u4e8b\u60c5\u767c\u751f\u6642\uff0c\u7cfb\u7d71\u600e\u9ebc\u904b\u4f5c\u300d\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>UE \u5982\u4f55\u8a3b\u518a\uff08Registration\uff09  </li> <li>\u5982\u4f55\u5efa\u7acb\u8207\u91cb\u653e PDU Session  </li> <li>Handover \u5927\u81f4\u600e\u9ebc\u9032\u884c</li> </ul> </li> </ul> <p>Tip</p> <p>\u53ef\u4ee5\u7c21\u55ae\u9019\u6a23\u8a18\uff1a</p> <ul> <li>23.501 \u662f\u300c5GSA \u7684\u5efa\u7bc9\u85cd\u5716\u300d\u3002</li> <li>23.502 \u662f\u300c\u5728\u9019\u68df\u5efa\u7bc9\u88e1\uff0c\u5927\u5bb6\u9047\u5230\u5404\u7a2e\u60c5\u5883\u6642\u7684\u4f5c\u696d\u624b\u518a\u300d</li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#213-38x-ran","title":"2.1.3 38.x \u7cfb\u5217\u8207 RAN \u4fe1\u4ee4","text":"<p>\u525b\u525b\u63d0\u5230\u7684\u90fd\u662f\u6838\u5fc3\u7db2\u8def\u6bd4\u8f03\u76f8\u95dc\u7684\u6587\u4ef6\uff0c\u800c\u5728 5G \u7121\u7dda\u63a5\u53d6\uff08RAN\uff09\u9019\u4e00\u5074\uff0c\u4f60\u6703\u5e38\u770b\u5230 38.xxx \u958b\u982d\u7684\u6587\u4ef6\uff1a</p> <ul> <li>\u4f8b\u5982 TS 38.300\uff1a\u63cf\u8ff0 NR \u8207 NG-RAN \u7684\u6574\u9ad4\u67b6\u69cb</li> <li>TS 38.331\uff1a\u5b9a\u7fa9 RRC\uff08Radio Resource Control\uff09\u5354\u5b9a\uff0c\u4e5f\u5c31\u662f UE \u548c gNB \u4e4b\u9593\u7684\u63a7\u5236\u8a0a\u4ee4</li> <li>\u9084\u6709\u4e00\u7cfb\u5217 38.3xx/38.4xx \u6587\u4ef6\uff0c\u63cf\u8ff0\u5be6\u9ad4\u5c64\u3001MAC\u3001RLC\u3001PDCP \u7b49\u7d30\u7bc0</li> </ul> <p>\u9019\u4e9b\u6587\u4ef6\u4e3b\u8981\u95dc\u5fc3\u7684\u662f\u300cUE \u2194 gNB\uff08\u57fa\u5730\u53f0\uff09\u300d\u4e4b\u9593\u600e\u9ebc\u4e92\u52d5\uff0c\u800c\u672c\u66f8\u805a\u7126\u5728 \u6838\u5fc3\u7db2\uff085GC\uff09\uff0c\u6240\u4ee5\u53ea\u6703\u5728\u5fc5\u8981\u7684\u5730\u65b9\u7c21\u55ae\u5e36\u904e RAN \u8a0a\u4ee4\uff0c\u5e6b\u52a9\u4f60\u5efa\u7acb\u524d\u5f8c\u95dc\u806f\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#214-5gc-nr-5gs","title":"2.1.4 5GC + NR = 5GS","text":"<p>\u5728 3GPP \u7684\u5b9a\u7fa9\u88e1\uff0c\u300c5G \u7cfb\u7d71\uff085GS\uff09\u300d\u5305\u542b\u5169\u500b\u4e3b\u8981\u90e8\u5206\uff1a</p> <ul> <li>5GC\uff085G Core\uff09\uff1a\u4e5f\u5c31\u662f\u672c\u66f8\u4e3b\u8981\u8981\u4ecb\u7d39\u7684\u6838\u5fc3\u7db2  </li> <li>NR\uff08New Radio\uff09/ NG-RAN\uff1a\u65b0\u7684\u7121\u7dda\u63a5\u53d6\u7db2\u8def\uff08gNB \u7b49\uff09</li> </ul> <p>\u5169\u8005\u52a0\u8d77\u4f86\uff0c\u624d\u69cb\u6210\u4e00\u500b\u5b8c\u6574\u7684 5G \u7cfb\u7d71\u3002 \u6240\u4ee5\u4f60\u53ef\u4ee5\u628a 5GS \u7406\u89e3\u70ba\uff1a\u300c5GC + NR \u6240\u7d44\u6210\u7684\u6574\u9ad4\u7db2\u8def\u300d\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#22-5g-5gs-overview","title":"2.2 5G \u7cfb\u7d71\u7e3d\u89bd\uff085GS Overview\uff09","text":"<p>\u5728\u6df1\u5165\u7d30\u7bc0\u4e4b\u524d\uff0c\u6211\u5011\u5148\u7528\u4e00\u500b\u7c21\u55ae\u7684\u89d2\u5ea6\u4f86\u770b\u6574\u500b 5G \u7cfb\u7d71\u5927\u81f4\u9577\u4ec0\u9ebc\u6a23\u5b50\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#221-ue-ran-5gc-dn","title":"2.2.1 UE \u2013 RAN \u2013 5GC \u2013 DN\uff1a\u5f9e\u624b\u6a5f\u5230\u670d\u52d9\u7684\u8def\u5f91","text":"<p>\u5f9e\u4f7f\u7528\u8005\u7684\u89d2\u5ea6\u4f86\u770b\uff0c\u4e00\u652f\u624b\u6a5f\uff08UE\uff09\u8981\u7528\u7db2\u8def\uff0c\u5927\u81f4\u6703\u7d93\u904e\u9019\u5e7e\u5c64\uff1a</p> <p></p> <ul> <li>UE\uff08User Equipment\uff09\uff1a\u624b\u6a5f\u3001CPE\u3001IoT \u88dd\u7f6e\u7b49  </li> <li>RAN\uff08\u7121\u7dda\u63a5\u53d6\u7db2\uff0c\u9019\u88e1\u662f gNB / NG-RAN\uff09\uff1a\u8ca0\u8cac\u628a\u7121\u7dda\u8a0a\u865f\u8f49\u6210\u5c01\u5305\uff0c\u4e26\u63a5\u5230\u6838\u5fc3\u7db2  </li> <li>5GC\uff085G Core\uff09\uff1a\u8655\u7406\u8a3b\u518a\u3001\u8eab\u5206\u3001\u8def\u7531\u3001\u653f\u7b56\u3001\u8a08\u8cbb\u7b49\u908f\u8f2f  </li> <li>DN\uff08Data Network\uff09\uff1a\u8cc7\u6599\u7db2\u8def\uff0c\u53ef\u80fd\u662f Internet\u3001\u4f01\u696d\u5c08\u7db2\u3001\u516c\u6709\u96f2 VPC\u3001IMS \u7db2\u8def\u7b49</li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#222-ran-core","title":"2.2.2 RAN \u8207 Core \u7684\u5206\u5de5","text":"<ul> <li> <p>RAN \u6bd4\u8f03\u50cf\u300c\u63a5\u5165\u7ad9\u300d</p> <ul> <li>\u7ba1\u7406\u7121\u7dda\u96fb\u8cc7\u6e90\uff1a\u8ab0\u53ef\u4ee5\u50b3\u3001\u50b3\u591a\u5c11\u3001\u7528\u4ec0\u9ebc\u8abf\u8b8a</li> <li>\u8ca0\u8cac\u628a\u6bcf\u652f UE \u7684\u6578\u64da\uff0c\u5305\u88dd\u597d\u9001\u5f80\u6838\u5fc3\u7db2</li> </ul> </li> <li> <p>Core \u6bd4\u8f03\u50cf\u300c\u6307\u63ee\u4e2d\u5fc3 + \u4ea4\u901a\u5206\u6d41\u7ad9\u300d</p> <ul> <li>\u6c7a\u5b9a UE \u662f\u8ab0\u3001\u80fd\u4e0d\u80fd\u4e0a\u7db2\u3001\u8a72\u8d70\u54ea\u689d\u8def</li> <li>\u6c7a\u5b9a\u9019\u4e9b\u5c01\u5305\u8981\u9001\u5230\u54ea\u4e00\u500b DN\u3001\u8981\u5957\u4ec0\u9ebc QoS \u548c\u653f\u7b56</li> </ul> </li> </ul> <p>\u9019\u7a2e\u5206\u5de5\u65b9\u5f0f\uff0c\u8ddf 4G \u6642\u4ee3\u5f88\u50cf\uff0c\u4f46\u5728 5G \u88e1\u6703\u66f4\u6e05\u695a\u5730\u628a\u63a7\u5236\u9762\u8207\u4f7f\u7528\u8005\u9762\u5206\u958b\uff0c\u65b9\u4fbf\u505a\u512a\u5316\u8207\u5f48\u6027\u90e8\u7f72\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#23-sbaservice-based-architecture","title":"2.3 SBA\uff08Service-Based Architecture\uff09","text":"<p>\u5728 4G EPC \u88e1\uff0c\u5f88\u591a\u7db2\u5143\u4e4b\u9593\u662f\u900f\u904e Diameter \u6216\u5176\u4ed6\u50b3\u7d71\u96fb\u4fe1\u5354\u5b9a\u4f86\u6e9d\u901a\u3002 \u5230\u4e86 5G \u6838\u5fc3\u7db2\uff0c3GPP \u505a\u4e86\u4e00\u500b\u5f88\u5927\u7684\u6539\u8b8a\uff1a\u6539\u7528 HTTP + JSON \u98a8\u683c\u7684 Service-Based Architecture\uff08SBA\uff09\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#231-diameter-http-json","title":"2.3.1 \u70ba\u4ec0\u9ebc\u6368\u68c4 Diameter\uff0c\u6539\u7528 HTTP + JSON\uff1f","text":"<p>\u4e3b\u8981\u6709\u5e7e\u500b\u539f\u56e0\uff1a</p> <ul> <li>\u5e0c\u671b\u8b93\u96fb\u4fe1\u7db2\u8def\u66f4\u63a5\u8fd1\u4e00\u822c IT / Cloud \u7684\u6280\u8853\u68e7\uff0c\u65b9\u4fbf\u5c0e\u5165\u73fe\u6709\u5de5\u5177\u8207\u751f\u614b\u7cfb</li> <li>\u8b93\u7db2\u5143\u4e4b\u9593\u7684\u4e92\u52d5\u66f4\u50cf\u300c\u5fae\u670d\u52d9\u300d\uff1a\u6bcf\u500b\u7db2\u5143\u63d0\u4f9b\u4e00\u7d44\u6e05\u695a\u5b9a\u7fa9\u7684 API  </li> <li>\u76f8\u6bd4 Diameter\uff0cHTTP \u5728\u591a\u8def\u8907\u7528\u3001\u5ef6\u9072\u8207\u90e8\u7f72\u9748\u6d3b\u6027\u4e0a\u8f03\u6709\u512a\u52e2</li> </ul> <p>\u5c0d\u958b\u767c\u8005\u8207\u7814\u7a76\u8005\u4f86\u8aaa\uff0c\u9019\u4e5f\u4ee3\u8868\u4f60\u53ef\u4ee5\u7528\u6bd4\u8f03\u719f\u6089\u7684 Web \u6280\u8853\u4f86\u7406\u89e3\u8207\u5be6\u4f5c\u90e8\u5206 5GC \u908f\u8f2f\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#232-service-based-interfacesbi","title":"2.3.2 \u4ec0\u9ebc\u662f Service-Based Interface\uff08SBI\uff09\uff1f","text":"<p>\u5728 SBA \u4e2d\uff0c\u7db2\u8def\u529f\u80fd\uff08NF\uff09\u5c0d\u5916\u63d0\u4f9b\u300cService\u300d\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>AMF \u63d0\u4f9b\u8207 UE \u8a3b\u518a\u76f8\u95dc\u7684\u670d\u52d9</li> <li>SMF \u63d0\u4f9b\u8207 PDU Session \u7ba1\u7406\u76f8\u95dc\u7684\u670d\u52d9</li> <li>PCF \u63d0\u4f9b\u7b56\u7565\u8207\u63a7\u5236\u76f8\u95dc\u7684\u670d\u52d9</li> </ul> <p>\u9019\u4e9b\u670d\u52d9\u900f\u904e\u4e00\u500b\u7d71\u4e00\u7684\u6982\u5ff5\u4ecb\u9762\u2014\u2014 SBI\uff08Service-Based Interface\uff09 \u2014\u2014\u4f86\u4e92\u901a\uff0c\u5be6\u969b\u4e0a\u5c31\u662f\u4e00\u7d44 HTTP + JSON \u7684 API\u3002</p> <p>Tip</p> <p>\u53ef\u4ee5\u628a SBA \u60f3\u50cf\u6210\uff1a\u300c5GC \u88e1\u6bcf\u500b\u7db2\u5143\u90fd\u662f\u4e00\u500b Service Provider\uff0c\u5f7c\u6b64\u900f\u904e REST \u98a8\u683c\u7684 API \u4f86\u53eb\u5c0d\u65b9\u300d\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#233-sba","title":"2.3.3 SBA \u7684\u512a\u52e2","text":"<p>\u76f8\u8f03\u65bc\u50b3\u7d71\u7db2\u5143\u5c0d\u7db2\u5143\u7684\u56fa\u5b9a\u4ecb\u9762\uff0cSBA \u5e36\u4f86\u4e86\u5e7e\u500b\u660e\u986f\u7684\u512a\u9ede\uff1a</p> <ul> <li>\u53ef\u64f4\u5c55\uff1a\u67d0\u500b NF \u58d3\u529b\u592a\u5927\u6642\uff0c\u53ef\u4ee5\u958b\u66f4\u591a\u5be6\u4f8b\uff0c\u53ea\u8981\u90fd\u5728 NRF \u8a3b\u518a\uff0c\u5c31\u80fd\u88ab\u52d5\u614b\u4f7f\u7528\u3002</li> <li>\u53ef\u66ff\u63db\uff1a\u540c\u4e00\u7a2e NF\uff0c\u53ef\u4ee5\u6709\u4e0d\u540c\u5ee0\u5546\u6216\u4e0d\u540c\u7248\u672c\u4e26\u5b58\uff0c\u900f\u904e API \u4ecb\u9762\u4f86\u505a\u517c\u5bb9\u3002</li> <li>\u53ef\u4e92\u901a\uff1a\u53ea\u8981\u9075\u5b88\u540c\u6a23\u7684 API \u898f\u683c\uff0c\u4e0d\u540c\u5be6\u4f5c\u4e4b\u9593\u5c31\u6709\u6a5f\u6703\u4e92\u901a\uff0c\u964d\u4f4e\u5ee0\u5546\u7d81\u5b9a\u3002</li> <li>\u6613\u6e2c\u8a66\uff1a\u958b\u767c\u8207\u6e2c\u8a66\u4eba\u54e1\u53ef\u4ee5\u91dd\u5c0d\u55ae\u4e00 NF \u6216\u55ae\u4e00 API \u9032\u884c\u6e2c\u8a66\uff0c\u800c\u4e0d\u4e00\u5b9a\u8981\u628a\u6574\u500b\u7cfb\u7d71\u90fd\u62c9\u8d77\u4f86\u3002</li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#24-5g-n1-n2-n3-n4-n6-sba","title":"2.4 5G \u63a5\u53e3\u8207\u5354\u5b9a\u5206\u985e\uff08N1 / N2 / N3 / N4 / N6 / SBA\uff09","text":"<p>\u9019\u4e00\u7bc0\u662f\u672c\u7ae0\u6700\u6838\u5fc3\u7684\u90e8\u5206\u4e4b\u4e00\uff0c\u6211\u5011\u6703\u7528\u300c\u63a7\u5236\u9762 vs \u4f7f\u7528\u8005\u9762\u300d\u4f86\u6574\u7406 5G \u88e1\u5e38\u898b\u7684\u63a5\u53e3\u540d\u7a31\u3002</p> <p></p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#241","title":"2.4.1 \u63a7\u5236\u9762\u63a5\u53e3","text":"<p>\u63a7\u5236\u9762\u4e3b\u8981\u8ca0\u8cac\u300c\u4ea4\u8ac7\u8207\u5354\u8abf\u300d\uff0c\u4e0d\u662f\u5be6\u969b\u627f\u8f09\u5927\u91cf\u8cc7\u6599\u3002\u5e38\u898b\u7684\u63a5\u53e3\u6709\uff1a</p> <ul> <li> <p>N1\uff1aUE \u2194 5GC\uff08NAS\uff09</p> <ul> <li>UE \u8207 5GC \u4e4b\u9593\u7684\u9ad8\u5c64\u63a7\u5236\u8a0a\u4ee4\uff0c\u4f8b\u5982 Registration\u3001PDU Session \u5efa\u7acb\u8acb\u6c42\u7b49\u3002</li> <li>\u8a0a\u4ee4\u5167\u5bb9\u7a31\u70ba NAS\uff08Non-Access Stratum\uff09\uff0c\u5be6\u969b\u662f\u900f\u904e RAN \u8f49\u9001\u5230 AMF\u3002</li> </ul> </li> <li> <p>N2\uff1aRAN \u2194 5GC\uff08NGAP\uff09</p> <ul> <li>gNB \u8207 5GC\uff08AMF\uff09\u4e4b\u9593\u7684\u63a7\u5236\u4ecb\u9762\u3002</li> <li>\u4f7f\u7528\u7684\u5354\u5b9a\u662f NGAP\uff0c\u8ca0\u8cac\u50cf\u662f UE Context \u8a2d\u5b9a\u3001Handover \u63a7\u5236\u3001PDU Session \u76f8\u95dc\u63a7\u5236\u8a0a\u606f\u7b49\u3002</li> </ul> </li> <li> <p>N4\uff1aSMF \u2194 UPF\uff08PFCP\uff09</p> <ul> <li>SMF \u900f\u904e N4 \u6307\u793a UPF \u5982\u4f55\u5efa\u7acb\u6216\u66f4\u65b0\u8f49\u9001\u898f\u5247\uff08\u4f8b\u5982\u5c01\u5305\u8a72\u5f80\u54ea\u4e00\u500b DN\u3001\u7528\u4ec0\u9ebc QoS\uff09\u3002</li> </ul> </li> <li> <p>Nn\uff1a5GC NF \u2194 NF\uff08SBA / HTTP/2\uff09</p> <ul> <li>\u9019\u662f\u4e00\u500b\u7d71\u7a31\uff0c\u7528\u4f86\u8868\u793a 5GC \u5167\u90e8\u5404\u500b\u7db2\u8def\u529f\u80fd\uff08NF\uff09\u4e4b\u9593\u7684 Service-Based \u4e92\u52d5\u3002  </li> <li>\u5be6\u969b\u4e0a\u4f7f\u7528 HTTP/2 + JSON\uff08\u5373\u6211\u5011\u524d\u9762\u63d0\u5230\u7684 SBI\uff09\uff0c\u4f8b\u5982 AMF \u8207 SMF\u3001SMF \u8207 PCF \u7b49\u7684\u4e92\u52d5\u3002</li> </ul> </li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#242","title":"2.4.2 \u4f7f\u7528\u8005\u9762\u63a5\u53e3","text":"<p>\u4f7f\u7528\u8005\u9762\u5247\u662f\u300c\u771f\u6b63\u8f09\u8457\u4f60\u770b\u5f71\u7247\u3001\u958b\u7db2\u9801\u3001\u50b3\u8cc7\u6599\u7684\u5c01\u5305\u300d\u7684\u8def\u5f91\uff1a</p> <ul> <li> <p>N3\uff1aRAN \u2194 UPF\uff08GTP-U\uff09</p> <ul> <li>gNB \u8207 UPF \u4e4b\u9593\u7684\u4f7f\u7528\u8005\u9762\u901a\u9053\u3002  </li> <li>\u4f7f\u7528 GTP-U \u5354\u5b9a\u4f86\u5c01\u88dd UE \u7684 IP \u5c01\u5305\uff0c\u985e\u4f3c\u65bc 4G \u88e1\u7684 S1-U\u3002</li> </ul> </li> <li> <p>N6\uff1aUPF \u2194 DN\uff08Data Network\uff09</p> <ul> <li>UPF \u8207\u5916\u90e8\u8cc7\u6599\u7db2\u8def\uff08\u4f8b\u5982 Internet\u3001\u4f01\u696d\u5c08\u7db2\uff09\u4e4b\u9593\u7684\u9023\u63a5\u3002</li> </ul> </li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#25-5g","title":"2.5 5G \u6838\u5fc3\u6d41\u7a0b\u6982\u8ff0","text":"<p>\u9019\u4e00\u7bc0\u53ea\u7528\u300c\u6982\u5ff5\u5c64\u9762\u300d\u4f86\u4ecb\u7d39\u5e7e\u500b 5G \u88e1\u6700\u91cd\u8981\u7684\u6d41\u7a0b\uff1a\u4e0d\u6df1\u5165\u6bcf\u500b\u7db2\u5143\u7684\u7d30\u90e8\u884c\u70ba\uff0c\u800c\u662f\u5e6b\u4f60\u5148\u770b\u5230\u6574\u9ad4\u6545\u4e8b\u7dda\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#251-registration-nas-ngap","title":"2.5.1 Registration \u7a0b\u5e8f\uff08NAS / NGAP\uff09","text":"<p>Registration \u53ef\u4ee5\u8996\u70ba 5G \u88e1\u7684\u300c\u8a3b\u518a / \u767b\u5165\u7a0b\u5e8f\u300d\uff0c\u5927\u81f4\u4e0a\u5305\u542b\u9019\u5e7e\u500b\u95dc\u9375\u6b65\u9a5f\uff1a</p> <ol> <li>UE \u767c\u8d77 Registration Request\uff1aUE \u958b\u6a5f\u6216\u9032\u5165 5G \u7db2\u8def\u6642\uff0c\u900f\u904e RAN \u628a NAS \u8a3b\u518a\u8acb\u6c42\u9001\u5230 AMF\u3002</li> <li>\u5efa\u7acb UE Context\uff1aAMF \u6536\u5230\u8acb\u6c42\u5f8c\uff0c\u6703\u70ba\u9019\u500b UE \u5efa\u7acb\u4e00\u4efd\u300c\u4e0a\u4e0b\u6587\uff08Context\uff09\u300d\uff0c\u88e1\u9762\u5305\u542b\u8eab\u5206\u3001\u4f4d\u7f6e\u3001\u80fd\u529b\u7b49\u8cc7\u8a0a\u3002</li> <li>\u5b89\u5168\u76f8\u95dc\u7a0b\u5e8f\uff1a\u5305\u542b\u8eab\u5206\u9a57\u8b49\uff08Authentication\uff09\u3001\u5b89\u5168\u6a21\u5f0f\u8a2d\u5b9a\uff08Security Mode\uff09\uff0c\u78ba\u4fdd\u5f8c\u7e8c\u8a0a\u4ee4\u8207\u8cc7\u6599\u90fd\u662f\u5728\u52a0\u5bc6\u8207\u53d7\u4fdd\u8b77\u7684\u72c0\u614b\u4e0b\u9032\u884c\u3002</li> <li>Registration Complete\uff1a\u7576\u96d9\u65b9\u5b8c\u6210\u5fc5\u8981\u7684\u4ea4\u63db\u8207\u8a2d\u5b9a\u5f8c\uff0cUE \u6703\u56de\u8986 Registration Complete\uff0c\u8868\u793a\u5b83\u5df2\u7d93\u6b63\u5f0f\u300c\u767b\u5165\u300d\u5230 5G \u7db2\u8def\u3002</li> </ol> <p>Tip</p> <p>\u8a3b\u518a\u7684\u7a0b\u5e8f\u5c31\u662f UE \u958b\u6a5f\u6216\u662f\u95dc\u9589\u98db\u884c\u6a21\u5f0f\u6642\uff0c\u5c0d\u6838\u5fc3\u7db2\u8def\u767c\u8d77\u7684\u7b2c\u4e00\u500b\u9032\u5165\u7a0b\u5e8f\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#252-pdu-session","title":"2.5.2 PDU Session \u7a0b\u5e8f","text":"<p>\u5728 4G \u88e1\uff0c\u6211\u5011\u5e38\u8b1b Bearer\uff1b\u5728 5G \u88e1\uff0c\u5c0d\u61c9\u7684\u6838\u5fc3\u6982\u5ff5\u662f PDU Session\uff0c\u4f60\u53ef\u4ee5\u628a PDU Session \u60f3\u6210\uff1a\u300cUE \u8207\u67d0\u500b\u8cc7\u6599\u7db2\u8def\uff08DN\uff09\u4e4b\u9593\u7684\u4e00\u689d\u908f\u8f2f\u9023\u7dda\u300d\u3002</p> <p>\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b\uff1a</p> <ol> <li>UE \u8acb\u6c42\u5efa\u7acb PDU Session\uff1a\u7576 UE \u60f3\u8981\u4e0a\u7db2\u6216\u9023\u5230\u67d0\u500b\u670d\u52d9\u6642\uff0c\u6703\u767c\u9001 PDU Session Establishment Request\u3002</li> <li>SM \u63a7\u5236\u5e73\u9762\u5efa\u7acb\u5c0d\u61c9\u7684\u908f\u8f2f\uff1a\u6838\u5fc3\u7db2\u88e1\u7684 SMF \u6703\u6c7a\u5b9a\u9019\u500b PDU Session \u8981\u9023\u5230\u54ea\u4e00\u500b UPF\u3001\u54ea\u4e00\u500b DN \u4ee5\u53ca\u8981\u7d66\u4ec0\u9ebc\u6a23\u7684 QoS \u8a2d\u5b9a</li> <li>UP \u5efa\u7acb GTP-U \u8def\u5f91\uff1a\u900f\u904e N3\uff08RAN \u2194 UPF\uff09\u8207 N6\uff08UPF \u2194 DN\uff09\uff0c\u5be6\u969b\u69cb\u6210\u9019\u689d Session \u7684\u4f7f\u7528\u8005\u9762\u8def\u5f91\u3002</li> </ol> <p>\u4e4b\u5f8c UE \u7684\u8cc7\u6599\u5c01\u5305\uff0c\u5c31\u6703\u6cbf\u8457\u9019\u689d PDU Session \u88ab\u8f49\u9001\uff0c\u800c\u4e00\u500b UE \u540c\u6642\u53ef\u4ee5\u6709\u591a\u500b PDU Session\uff0c\u5206\u5225\u5c0d\u61c9\u4e0d\u540c\u7684\u670d\u52d9\u6216\u7db2\u8def\u3002</p> <p>Tip</p> <p>PDU session \u7684\u5efa\u7acb\u5c31\u662f\u70ba\u4e86\u5efa\u7acb\u4e00\u689d\u5f9e UE \u5230 DN \u7684\u908f\u8f2f\u9023\u7dda\uff01</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#253-handover","title":"2.5.3 Handover \u6982\u5ff5","text":"<p>Handover\uff08\u5207\u63db\uff09\u6307\u7684\u662f UE \u5728\u79fb\u52d5\u904e\u7a0b\u4e2d\uff0c\u5f9e\u4e00\u500b\u57fa\u5730\u53f0\u5207\u63db\u5230\u53e6\u5916\u4e00\u500b\u57fa\u5730\u53f0\uff0c\u4f46\u9023\u7dda\u4e0d\u4e2d\u65b7\u7684\u904e\u7a0b\u3002</p> <p>\u9019\u88e1\u53ea\u8981\u7406\u89e3\u5169\u4ef6\u4e8b\uff1a</p> <ul> <li> <p>\u63a7\u5236\u9762\u7684\u9077\u79fb\uff1a\u7cfb\u7d71\u9700\u8981\u66f4\u65b0 UE \u7684\u4f4d\u7f6e\u8cc7\u8a0a\uff0c\u8b93\u6838\u5fc3\u7db2\u77e5\u9053 UE \u73fe\u5728\u662f\u900f\u904e\u54ea\u4e00\u500b RAN \u9023\u9032\u4f86\u7684\u3002</p> </li> <li> <p>\u4f7f\u7528\u8005\u9762\u8def\u5f91\u7684\u5207\u63db\uff1a\u70ba\u4e86\u8b93\u5c01\u5305\u7e7c\u7e8c\u9806\u5229\u62b5\u9054 UE\uff0c\u9700\u8981\u628a\u539f\u672c\u901a\u5f80\u820a gNB \u7684\u8def\u5f91\uff0c\u6539\u6210\u901a\u5f80\u65b0 gNB\uff0c\u5728\u67d0\u4e9b\u60c5\u6cc1\u4e0b\uff0cUPF \u7684\u8def\u5f91\u4e5f\u53ef\u80fd\u9700\u8981\u8abf\u6574\u3002</p> </li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#26-qos-flow-5qi5g-4g-qos","title":"2.6 QoS Flow \u8207 5QI\uff1a5G \u8207 4G QoS \u6a21\u578b\u5dee\u7570","text":"<p>QoS\uff08Quality of Service\uff09\u662f\u884c\u52d5\u7db2\u8def\u88e1\u7684\u4e00\u500b\u91cd\u8981\u4e3b\u984c\uff0c\u5728 4G \u88e1\uff0c\u6211\u5011\u5e38\u8b1b\u300cBearer\u300d\uff1b\u5230\u4e86 5G\uff0cQoS Flow \u8b8a\u6210\u4e86\u66f4\u6838\u5fc3\u7684\u6982\u5ff5\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#261-4g-bearer-vs-5g-qos-flow","title":"2.6.1 4G Bearer vs 5G QoS Flow","text":"<ul> <li>\u5728 4G \u88e1\uff0c\u4e00\u500b EPS Bearer \u901a\u5e38\u5c0d\u61c9\u4e00\u7d44 QoS \u8a2d\u5b9a\uff0cUE \u8207\u6838\u5fc3\u7db2\u6703\u70ba\u7279\u5b9a\u670d\u52d9\u5efa\u7acb\u6216\u8abf\u6574 Bearer\u3002</li> <li>\u5728 5G \u88e1\uff0cPDU Session \u662f\u4e00\u689d\u300c\u4e3b\u96a7\u9053\u300d\uff0c\u5e95\u4e0b\u53ef\u4ee5\u639b\u591a\u500b QoS Flow\uff0c\u6bcf\u500b Flow \u6709\u81ea\u5df1\u7684 QoS \u7279\u6027\u3002</li> </ul> <p>Note</p> <p>\u9019\u4ee3\u8868\u4ec0\u9ebc\uff1f</p> <p>\u540c\u4e00\u689d PDU Session \u88e1\uff0c\u4e0d\u540c\u7a2e\u985e\u7684\u6d41\u91cf\uff0c\u53ef\u4ee5\u8d70\u4e0d\u540c\u7684 QoS Flow\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u540c\u4e00\u652f\u624b\u6a5f\uff0c\u4e00\u689d PDU Session \u540c\u6642\u627f\u8f09\u4e00\u822c\u4e0a\u7db2\u8207\u5373\u6642\u8a9e\u97f3</li> <li>\u7db2\u8def\u53ef\u4ee5\u70ba\u8a9e\u97f3\u6d41\u91cf\u7d66\u8f03\u9ad8\u512a\u5148\u6b0a\u3001\u8f03\u4f4e\u5ef6\u9072\uff0c\u800c\u4e00\u822c\u4e0a\u7db2\u5247\u63a1\u7528\u8f03\u5bec\u9b06\u7684\u8a2d\u5b9a</li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#262-flow-level-qosqfi5qigbr-non-gbrmbr","title":"2.6.2 Flow-level QoS\uff1aQFI\u30015QI\u3001GBR / Non-GBR\u3001MBR","text":"<p>\u5728 5G \u88e1\uff0c\u6bcf\u4e00\u500b QoS Flow \u6703\u6709\u4e00\u4e9b\u95dc\u9375\u5c6c\u6027\uff08\u672c\u66f8\u5f8c\u9762\u6703\u518d\u7d30\u62c6\uff09\uff0c\u9019\u88e1\u5148\u9ede\u51fa\u5e7e\u500b\u540d\u8a5e\uff1a</p> <ul> <li>QFI\uff08QoS Flow Identifier\uff09\uff1a\u7528\u4f86\u8b58\u5225\u4e00\u500b QoS Flow \u7684 ID\u3002</li> <li> <p>5QI\uff085G QoS Identifier\uff09\uff1a\u5b9a\u7fa9\u9019\u500b Flow \u4f7f\u7528\u4ec0\u9ebc\u6a23\u7684 QoS \u6a21\u677f\u3002</p> <ul> <li>\u5ef6\u9072\u8981\u6c42</li> <li>\u512a\u5148\u6b0a\u7b49\u7d1a</li> <li>\u4e1f\u5305\u5bb9\u5fcd\u5ea6</li> </ul> </li> <li> <p>GBR / Non-GBR\uff1a</p> <ul> <li>GBR\uff08Guaranteed Bit Rate\uff09\uff1a\u4fdd\u8b49\u4e00\u5b9a\u983b\u5bec</li> <li>Non-GBR\uff1a\u4e0d\u4fdd\u8b49\u983b\u5bec\uff0c\u591a\u6578\u4e00\u822c\u8cc7\u6599\u670d\u52d9\u5c6c\u65bc\u6b64\u985e</li> </ul> </li> <li> <p>MBR\uff08Maximum Bit Rate\uff09\uff1a</p> <ul> <li>\u9867\u540d\u601d\u7fa9\u662f\u300c\u6700\u5927\u983b\u5bec\u4e0a\u9650\u300d\uff0c\u5e38\u642d\u914d GBR \u4e00\u8d77\u51fa\u73fe</li> <li>\u53ef\u4ee5\u7c21\u55ae\u7406\u89e3\u70ba\uff1aGBR \u662f\u300c\u81f3\u5c11\u8981\u7d66\u5230\u9019\u9ebc\u591a\u300d\uff0cMBR \u662f\u300c\u6700\u591a\u53ea\u80fd\u5230\u9019\u9ebc\u591a\u300d</li> <li>\u7cfb\u7d71\u900f\u904e MBR\uff0c\u907f\u514d\u67d0\u500b Flow \u5728\u7db2\u8def\u8cc7\u6e90\u5f88\u5145\u8db3\u6642\u300c\u5403\u5230\u592a\u80a5\u300d\uff0c\u5f71\u97ff\u5230\u5176\u4ed6\u4f7f\u7528\u8005\u6216\u5176\u4ed6\u670d\u52d9</li> </ul> </li> </ul> <p>\u900f\u904e\u9019\u6a23\u7684\u8a2d\u8a08\uff0c5G \u53ef\u4ee5\u66f4\u5f48\u6027\u5730\u652f\u63f4 eMBB\u3001URLLC\u3001mMTC \u7b49\u4e0d\u540c\u5834\u666f\uff0c\u5728\u540c\u4e00\u689d PDU Session \u88e1\uff0c\u5c0d\u4e0d\u540c\u985e\u578b\u7684\u6d41\u91cf\u7d66\u4e88\u4e0d\u540c\u7d1a\u5225\u7684\u5f85\u9047\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#27-5g","title":"2.7 5G \u5b89\u5168\u6982\u8ad6","text":"<p>\u5b89\u5168\u662f 5G \u8a2d\u8a08\u4e2d\u7684\u91cd\u8981\u4e00\u74b0\uff0c\u4f46\u672c\u66f8\u4e0d\u6703\u5728\u9019\u4e00\u7ae0\u6df1\u5165\u52a0\u5bc6\u6f14\u7b97\u6cd5\u6216\u6578\u5b78\u7d30\u7bc0\uff0c\u800c\u662f\u5148\u7528\u5e7e\u500b\u95dc\u9375\u8a5e\uff0c\u5efa\u7acb\u4f60\u5c0d 5G \u5b89\u5168\u6a5f\u5236\u7684\u57fa\u672c\u5370\u8c61\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#271-5g-akaauthentication-and-key-agreement","title":"2.7.1 5G AKA\uff08Authentication and Key Agreement\uff09","text":"<p>5G \u7e7c\u627f\u4e26\u5ef6\u4f38\u4e86\u4ee5\u5f80\u4e16\u4ee3\u7684 AKA \u67b6\u69cb\uff1a</p> <ul> <li>\u900f\u904e UE \u8207\u7db2\u8def\u4e4b\u9593\u7684\u6311\u6230\u8207\u56de\u61c9\uff0c\u78ba\u8a8d\u96d9\u65b9\u8eab\u5206  </li> <li>\u540c\u6642\u5354\u5546\u51fa\u5f8c\u7e8c\u7528\u4f86\u4fdd\u8b77\u8a0a\u4ee4\u8207\u8cc7\u6599\u7684\u91d1\u9470</li> </ul> <p>\u4f60\u53ef\u4ee5\u628a\u5b83\u60f3\u50cf\u6210\u300c\u96d9\u65b9\u5148\u4e92\u76f8\u78ba\u8a8d\u6211\u771f\u7684\u662f\u6211\u3001\u4f60\u771f\u7684\u662f\u4f60\uff0c\u7136\u5f8c\u4e00\u8d77\u6c7a\u5b9a\u8981\u7528\u4ec0\u9ebc\u9470\u5319\u9396\u9580\u300d\u3002</p>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#272-suci-supi","title":"2.7.2 SUCI / SUPI\uff1a\u96b1\u79c1\u4fdd\u8b77","text":"<p>\u5728 5G \u88e1\uff0c\u70ba\u4e86\u66f4\u597d\u5730\u4fdd\u8b77\u7528\u6236\u96b1\u79c1\uff0c\u5f15\u5165\u4e86\uff1a</p> <ul> <li> <p>SUPI\uff08Subscription Permanent Identifier\uff09\uff1a\u985e\u4f3c\u300c\u771f\u5be6\u8eab\u5206\u300d\uff08\u4f8b\u5982\u5c0d\u61c9\u5230 IMSI\uff09\u3002</p> </li> <li> <p>SUCI\uff08Subscription Concealed Identifier\uff09\uff1a\u662f\u7d93\u904e\u52a0\u5bc6\u4fdd\u8b77\u5f8c\u7684\u8eab\u5206\u6a19\u8b58\uff0c\u7528\u65bc\u7a7a\u53e3\u50b3\u8f38\uff0c\u9019\u6a23\u4e00\u4f86\uff0c\u5373\u4f7f\u6709\u4eba\u5728\u7121\u7dda\u4ecb\u9762\u4e0a\u5077\u807d\uff0c\u4e5f\u4e0d\u5bb9\u6613\u76f4\u63a5\u770b\u51fa\u7528\u6236\u7684\u771f\u5be6\u8eab\u5206\u3002</p> </li> </ul>"},{"location":"doc-5g-core-book/zh/part1-history/chapter2/#28","title":"2.8 \u672c\u7ae0\u5c0f\u7d50","text":"<p>\u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u5011\u5f9e 3GPP \u7684\u89d2\u5ea6\uff0c\u5c0d 5G \u7cfb\u7d71\u8207\u6838\u5fc3\u7db2\u505a\u4e86\u4e00\u6b21\u300c\u9ad8\u7a7a\u4fef\u77b0\u300d\uff1a</p> <ul> <li>\u7406\u89e3\u4e86 3GPP \u7684\u89d2\u8272\uff0c\u4ee5\u53ca SA / RAN / CT \u5728 5G \u6a19\u6e96\u5316\u4e2d\u7684\u5206\u5de5</li> <li>\u4e86\u89e3\u4e86 23.501 / 23.502 / 23.503 \u5728\u67b6\u69cb\u3001\u7a0b\u5e8f\u8207\u653f\u7b56\u4e0a\u7684\u5b9a\u4f4d</li> <li>\u770b\u5230\u4e86 5GS = 5GC + NR \u7684\u6574\u9ad4\u7d50\u69cb\uff0c\u4ee5\u53ca UE \u2013 RAN \u2013 5GC \u2013 DN \u7684\u5927\u81f4\u95dc\u4fc2</li> <li>\u5efa\u7acb\u4e86\u5c0d \u63a7\u5236\u9762\uff08N1/N2/N4/Nn\uff09\u8207\u4f7f\u7528\u8005\u9762\uff08N3/N6\uff09\u5206\u96e2 \u7684\u57fa\u672c\u6982\u5ff5</li> <li>\u521d\u6b65\u8a8d\u8b58\u4e86 SBA\u3001Service-Based Interface\uff08SBI\uff09\u7684\u89d2\u8272</li> <li>\u7528\u6d41\u7a0b\u7406\u89e3\u4e86 Registration\u3001PDU Session \u8207 Handover \u7684\u5927\u81f4\u6545\u4e8b\u7dda</li> <li>\u770b\u5230\u4e86 5G QoS Flow / 5QI \u8207 4G Bearer \u6a21\u578b\u4e4b\u9593\u7684\u5dee\u7570</li> <li>\u5c0d 5G \u7684\u57fa\u672c\u5b89\u5168\u6982\u5ff5\uff08AKA\u3001SUCI/SUPI\u3001\u5b89\u5168\u6a21\u5f0f\uff09\u6709\u4e86\u7b2c\u4e00\u6b21\u5370\u8c61</li> </ul> <p>\u63a5\u4e0b\u4f86\u7684\u7ae0\u7bc0\uff0c\u6211\u5011\u6703\u5f9e 5G \u7684\u67b6\u69cb\u51fa\u767c\uff0c\u900f\u904e\u5206\u6790\u958b\u6e90\u5c08\u6848 free5GC \u9010\u6b65\u5f80\u4e0b\u62c6\u89e3\u5404\u500b\u7db2\u8def\u5143\u4ef6\uff08\u4f8b\u5982 AMF\u3001SMF\u3001UPF\u2026\uff09\u7684\u89d2\u8272\u8207\u5167\u90e8\u6d41\u7a0b\uff0c\u8b93\u4f60\u80fd\u5920\u5f9e\u300c\u770b\u61c2\u6574\u9ad4\u5730\u5716\u300d\uff0c\u4e00\u8def\u8d70\u5230\u300c\u770b\u61c2\u6bcf\u4e00\u689d\u8def\u7dda\u4e0a\u767c\u751f\u4e86\u4ec0\u9ebc\u4e8b\u300d\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter3/","title":"\u7b2c 3 \u7ae0\uff1afree5GC \u6574\u9ad4\u67b6\u69cb\u8207\u6a21\u7d44\u4ecb\u7d39","text":""},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter3/#31-free5gc","title":"3.1 free5GC \u662f\u4ec0\u9ebc\uff1f","text":"<p>free5GC \u662f\u4e00\u500b\u4ee5 \u6559\u5b78\u3001\u7814\u7a76\u8207 PoC\uff08Proof of Concept\uff09 \u70ba\u4e3b\u8981\u76ee\u6a19\u7684\u958b\u6e90 5G Core \u5c08\u6848\u3002\u5b83\u5be6\u4f5c\u4e86 3GPP Release 15 \u70ba\u4e3b\uff08\u73fe\u5df2\u5347\u7d1a\u5230 Release 17\uff09\u7684 5G \u6838\u5fc3\u7db2\u8def\u63a7\u5236\u9762\u8207\u4f7f\u7528\u8005\u9762\u529f\u80fd\uff0c\u8b93\u958b\u767c\u8005\u53ef\u4ee5\u5728\u4e00\u822c\u670d\u52d9\u5668\u3001\u865b\u64ec\u6a5f\u6216\u5bb9\u5668\u74b0\u5883\u4e2d\uff0c\u5feb\u901f\u5efa\u7acb\u4e00\u500b\u53ef\u904b\u4f5c\u7684 5G \u6838\u5fc3\u7db2\u8def\u5be6\u9a57\u5e73\u53f0\u3002</p> <p>\u8207\u5546\u7528 5G \u6838\u5fc3\u7db2\u8def\u7522\u54c1\u76f8\u6bd4\uff0cfree5GC \u66f4\u91cd\u8996 \u53ef\u8b80\u6027\u3001\u53ef\u4fee\u6539\u6027\u8207\u6613\u65bc\u90e8\u7f72\u3002\u56e0\u6b64\uff0c\u5b83\u975e\u5e38\u9069\u5408\uff1a</p> <ul> <li>\u5b78\u8853\u6216\u4f01\u696d\u5167\u90e8\u9032\u884c 5G \u76f8\u95dc\u7814\u7a76\u8207\u6559\u5b78</li> <li>\u9a57\u8b49\u65b0\u5354\u5b9a\u3001\u65b0\u6f14\u7b97\u6cd5\u6216\u65b0\u67b6\u69cb\u7684\u6982\u5ff5</li> <li>\u642d\u914d\u958b\u6e90 RAN\u3001UE \u505a\u7aef\u5230\u7aef\uff08E2E\uff09\u5be6\u9a57</li> </ul> <p>\u53e6\u4e00\u65b9\u9762\uff0cfree5GC \u4e26\u4e0d\u8ffd\u6c42\u5b8c\u6574\u8986\u84cb\u6240\u6709 3GPP \u529f\u80fd\uff0c\u4e5f\u6c92\u6709\u63d0\u4f9b\u96fb\u4fe1\u7b49\u7d1a\u7684 HA / \u64f4\u5145\u6027\u8a2d\u8a08\uff0c\u56e0\u6b64 \u4e0d\u5efa\u8b70\u76f4\u63a5\u7528\u65bc\u5546\u7528\u751f\u7522\u74b0\u5883\u3002\u5728\u5f8c\u7e8c\u7ae0\u7bc0\u4e2d\uff0c\u6211\u5011\u6703\u66f4\u591a\u5f9e\u300c\u7406\u89e3 5GC \u67b6\u69cb\u8207\u7a0b\u5f0f\u8a2d\u8a08\u300d\u7684\u89d2\u5ea6\uff0c\u4f86\u770b\u5f85 free5GC\uff0c\u800c\u4e0d\u662f\u628a\u5b83\u7576\u4f5c\u9ed1\u76d2\u5b50\u5728\u64cd\u4f5c\u3002</p> <p>\u76ee\u524d\u958b\u6e90 5GC \u5c08\u6848\u4e2d\uff0c\u9664\u4e86 free5GC \u4e4b\u5916\uff0c\u9084\u6709\u50cf\u5176\u4ed6\u958b\u6e90\u7684 5G \u6838\u5fc3\u7db2\u8def\u5c08\u6848\u3002\u76f8\u8f03\u4e4b\u4e0b\uff0cfree5GC\uff1a</p> <ul> <li>\u4f7f\u7528 Go \u8a9e\u8a00\u958b\u767c\uff0c\u8a9e\u8a00\u672c\u8eab\u8f03\u5bb9\u6613\u4e0a\u624b\uff0c\u4e14\u5177\u5099\u826f\u597d\u7684\u4e26\u884c\u7a0b\u5f0f\u8a2d\u8a08\u80fd\u529b</li> <li>\u5b8c\u5168\u9075\u5b88 3GPP SBA\uff08Service-Based Architecture\uff09\uff0c\u6709\u6e05\u695a\u3001\u6a21\u7d44\u5316\u8207\u6613\u64f4\u5c55\u7684\u5be6\u4f5c</li> <li>\u6587\u4ef6\u8207\u7bc4\u4f8b\u74b0\u5883\u504f\u5411\u6559\u5b78\u5c0e\u5411\uff0c\u65b9\u4fbf\u8b80\u8005\u4e00\u6b65\u6b65\u8ddf\u8457\u5be6\u4f5c</li> </ul> <p>\u672c\u7ae0\u7684\u91cd\u9ede\uff0c\u662f\u5148\u70ba\u8b80\u8005\u5efa\u7acb free5GC \u7684\u300c\u5730\u5716\u300d\uff0c\u5305\u542b\u6574\u9ad4\u67b6\u69cb\u3001\u539f\u59cb\u78bc\u5009\u5eab\u8207 NF \u7a0b\u5f0f\u7d50\u69cb\u6982\u5ff5\uff0c\u8b93\u4f60\u5728\u5f8c\u9762\u95b1\u8b80\u90e8\u7f72\u8207\u5404 NF \u7d30\u7bc0\u6642\uff0c\u4e0d\u6703\u8ff7\u8def\u3002</p> <p>Note</p> <p>free5GC \u7684\u5b98\u65b9\u7db2\u7ad9\uff1afree5gc.org</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter3/#32-free5gc","title":"3.2 free5GC \u7684\u67b6\u69cb\u4ecb\u7d39","text":"<p>\u5728\u5be6\u52d9\u4e0a\uff0cfree5GC \u901a\u5e38\u6703\u642d\u914d\uff1a</p> <ul> <li>\u4e00\u500b\u6216\u591a\u500b UE \u7aef\uff08\u53ef\u4ee5\u662f\u771f\u5be6 UE\uff0c\u4e5f\u53ef\u4ee5\u662f\u6a21\u64ec UE\uff09</li> <li>\u4e00\u5957 5G RAN\uff08\u53ef\u70ba\u771f\u5be6 gNB\uff0c\u4e5f\u53ef\u4ee5\u662f\u6a21\u64ec\u5668\uff09</li> <li>\u4e00\u500b free5GC 5GC \u63a7\u5236\u9762\u8207\u4f7f\u7528\u8005\u9762\u670d\u52d9\u5668</li> </ul> <p>\u5f9e\u5927\u65b9\u5411\u4f86\u770b\uff0cfree5GC \u4e3b\u8981\u5be6\u4f5c\u7684\u662f 5G \u6838\u5fc3\u7db2\u8def\uff085GC\uff09\uff0c\u5176\u5167\u90e8\u4f9d\u7167 3GPP \u5b9a\u7fa9\u62c6\u5206\u70ba\u591a\u500b Network Function\uff08NF\uff09\uff0c\u4e26\u900f\u904e SBA \u67b6\u69cb\u5f7c\u6b64\u6e9d\u901a\u3002\u9019\u4e9b NF \u53ef\u4ee5\u5168\u90e8\u90e8\u7f72\u5728\u540c\u4e00\u53f0\u6a5f\u5668\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u4f9d\u7167\u5be6\u9a57\u9700\u6c42\u62c6\u5206\u5230\u4e0d\u540c\u7bc0\u9ede\u3002</p> <p>\u5728\u90e8\u7f72\u578b\u614b\u4e0a\uff0cfree5GC \u5e38\u898b\u7684\u4f7f\u7528\u65b9\u5f0f\u5305\u62ec\uff1a</p> <ul> <li>\u55ae\u6a5f\u90e8\u7f72\uff1a\u6240\u6709 NF \u53ca\u8cc7\u6599\u5eab\u4f75\u5728\u540c\u4e00\u53f0\u4f3a\u670d\u5668\u4e0a\uff0c\u65b9\u4fbf\u5feb\u901f\u9ad4\u9a57\u8207\u9664\u932f</li> <li>\u591a\u7bc0\u9ede\u90e8\u7f72\uff1a\u5c07\u8cc7\u6599\u5eab\u3001UPF \u6216\u90e8\u5206 NF \u62c6\u51fa\u53bb\uff0c\u6a21\u64ec\u8f03\u8cbc\u8fd1\u5be6\u52d9\u7684\u7db2\u8def\u62d3\u6a38</li> <li>\u5bb9\u5668\u5316\u74b0\u5883\uff1a\u5229\u7528 Docker / Kubernetes \u90e8\u7f72\uff0c\u65b9\u4fbf\u8207\u5176\u4ed6\u7cfb\u7d71\u6574\u5408\uff0c\u6216\u5728\u96f2\u7aef\u74b0\u5883\u9032\u884c\u6e2c\u8a66</li> </ul> <p>\u672c\u7bc0\u63a5\u4e0b\u4f86\u6703\u5148\u8aaa\u660e free5GC \u5728 Github \u4e0a\u7684\u4e3b\u8981\u5009\u5eab\uff0c\u518d\u4ecb\u7d39\u4e3b\u5009\u5eab\u4e2d\u8207\u7db2\u8def\u5143\u4ef6\u76f8\u95dc\u7684\u6a21\u7d44\uff0c\u70ba\u5f8c\u9762\u5404\u7ae0\u7bc0\u7684\u6df1\u5165\u8aaa\u660e\u92ea\u8def\uff0c\u800c\u8a73\u7d30\u7684\u90e8\u7f72\u65b9\u5f0f\u6703\u5728\u672c\u66f8\u7684\u7b2c\u4e09\u90e8\u5206\u505a\u4ecb\u7d39\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter3/#321-free5gc-github","title":"3.2.1 free5GC \u5728 Github \u7684\u4e3b\u8981\u5009\u5eab","text":"<p>free5GC \u5728 Github \u4e0a\u4e26\u4e0d\u662f\u53ea\u6709\u4e00\u500b\u5009\u5eab\uff0c\u800c\u662f\u7531\u4e3b\u5009\u5eab\u642d\u914d\u591a\u500b\u5468\u908a\u5009\u5eab\uff08submodule\uff09\u7d44\u6210\u4e00\u500b\u751f\u614b\u7cfb\u3002</p> <p>\u5728\u5f8c\u7e8c\u90e8\u7f72\u7ae0\u7bc0\u4e2d\uff0c\u6211\u5011\u6703\u4ee5\u4e3b\u5009\u5eab\u70ba\u4e3b\uff0c\u4ecb\u7d39\u5f9e\u539f\u59cb\u78bc\u53d6\u5f97\u3001\u5efa\u7f6e\u5230\u555f\u52d5 NF \u7684\u6d41\u7a0b\uff1b\u800c\u672c\u7ae0\u5247\u805a\u7126\u5728\u300c\u5f9e\u67b6\u69cb\u8207\u7a0b\u5f0f\u7d50\u69cb\u89d2\u5ea6\u7406\u89e3\u4e3b\u5009\u5eab\u300d\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter3/#322-free5gc","title":"3.2.2 free5GC \u4e3b\u5009\u5eab\u7684\u7db2\u8def\u5143\u4ef6\u6a21\u7d44","text":"<p>\u5728\u4e3b\u5009\u5eab\u4e2d\uff0cfree5GC \u4f9d\u7167 3GPP 5GC \u7684\u5b9a\u7fa9\uff0c\u5c07\u4e0d\u540c\u7db2\u8def\u529f\u80fd\u62c6\u5206\u70ba\u591a\u500b\u7368\u7acb\u7684 Network Function\uff0c\u5982\u4e0b\u5716\u6240\u793a\uff1a</p> <p></p> <p>\u5f9e\u529f\u80fd\u9762\u4f86\u770b\uff0c\u53ef\u4ee5\u5927\u81f4\u5206\u70ba\u5e7e\u7a2e\u985e\u578b\uff1a</p> <ul> <li> <p>\u63a5\u5165\u8207\u884c\u52d5\u6027\u7ba1\u7406\u985e\uff08Access &amp; Mobility\uff09</p> <p>\u4f8b\u5982 AMF\uff0c\u8ca0\u8cac UE \u7684\u8a3b\u518a\u3001\u9023\u7dda\u8207\u884c\u52d5\u6027\u7ba1\u7406\uff0c\u662f UE \u9032\u5165 5GC \u7684\u4e3b\u8981\u5165\u53e3 NF\u3002</p> </li> <li> <p>\u6703\u8a71\u8207\u4f7f\u7528\u8005\u9762\u7ba1\u7406\u985e\uff08Session &amp; User Plane\uff09</p> <p>\u4f8b\u5982 SMF \u8207 UPF\uff0c\u8ca0\u8cac PDU Session \u7684\u5efa\u7acb\u3001\u4fee\u6539\u8207\u91cb\u653e\uff0c\u4ee5\u53ca\u5be6\u969b\u7684\u4f7f\u7528\u8005\u8cc7\u6599\u8f49\u9001\u3002</p> </li> <li> <p>\u8a8d\u8b49\u8207\u8a02\u95b1\u8cc7\u6599\u985e\uff08Authentication &amp; Subscription\uff09</p> <p>\u4f8b\u5982 AUSF\u3001UDM\uff0c\u8ca0\u8cac UE \u7684\u8a8d\u8b49\u6d41\u7a0b\u8207\u8a02\u95b1\u8cc7\u6599\u67e5\u8a62\u3002</p> </li> <li> <p>\u7b56\u7565\u8207\u8a08\u8cbb\u76f8\u95dc\u985e\uff08Policy &amp; Charging\uff09</p> <p>\u4f8b\u5982 PCF\u3001CHF\uff0c\u8ca0\u8cac\u63d0\u4f9b\u7b56\u7565\u6c7a\u7b56\u8207\u8a08\u8cbb\u6578\u64da\u7684\u53cd\u994b\u3002</p> </li> <li> <p>\u7db2\u8def\u5207\u7247\u7ba1\u7406\u985e\uff08Network Slicing\uff09</p> <p>\u4f8b\u5982 NSSF\uff0c\u5354\u52a9\u9078\u64c7\u9069\u7576\u7684\u7db2\u8def\u5207\u7247\u8207\u8def\u5f91\u3002</p> </li> </ul> <p>\u5728\u672c\u66f8\u5f8c\u9762\u7684\u7ae0\u7bc0\u4e2d\uff0c\u6211\u5011\u6703\u9010\u4e00\u6311\u9078\u95dc\u9375 NF\uff0c\u5f9e\u300c\u529f\u80fd\u89d2\u8272 \u2192 \u8a0a\u865f\u6d41\u7a0b \u2192 \u7a0b\u5f0f\u5be6\u4f5c\u300d\u7684\u89d2\u5ea6\u6df1\u5165\u89e3\u6790\u3002\u70ba\u4e86\u8b93\u8b80\u8005\u66f4\u5bb9\u6613\u9032\u5165\u7a0b\u5f0f\u78bc\u4e16\u754c\uff0c\u4e0b\u4e00\u7bc0\u6703\u5148\u8ac7\u8ac7 free5GC \u4e2d\u55ae\u4e00 NF \u7684\u5178\u578b\u7a0b\u5f0f\u7d50\u69cb\u9577\u4ec0\u9ebc\u6a23\u5b50\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter3/#33-nf","title":"3.3 NF \u7684\u7a0b\u5f0f\u7d50\u69cb","text":"<p>\u6839\u64da\u76ee\u524d free5GC \u57fa\u65bc Release 17 \u7684\u5be6\u4f5c\u7d50\u69cb\uff0cSBI \u4e0a\u7684 NF \u5009\u5eab\u5167\u4e3b\u8981\u7d50\u69cb\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 cmd\n\u2502   \u2514\u2500\u2500 main.go\n\u251c\u2500\u2500 go.mod\n\u251c\u2500\u2500 go.sum\n\u251c\u2500\u2500 internal\n\u2502   \u251c\u2500\u2500 context\n\u2502   \u251c\u2500\u2500 logger\n\u2502   \u251c\u2500\u2500 sbi\n\u2502   \u2502   \u251c\u2500\u2500 api_xxx.go\n\u2502   \u2502   \u251c\u2500\u2500 consumer\n\u2502   \u2502   \u251c\u2500\u2500 processor\n\u2502   \u2502   \u251c\u2500\u2500 router.go\n\u2502   \u2502   \u2514\u2500\u2500 server.go\n\u2502   \u2514\u2500\u2500 util\n\u251c\u2500\u2500 LICENSE\n\u2514\u2500\u2500 pkg\n</code></pre> <p>\u5f9e\u9019\u500b\u76ee\u9304\u7d50\u69cb\uff0c\u53ef\u4ee5\u5927\u81f4\u770b\u51fa\u4e00\u500b NF \u5728\u7a0b\u5f0f\u78bc\u5c64\u9762\u7684\u7d44\u6210\u65b9\u5f0f\uff1a</p> <ul> <li><code>cmd/main.go</code>\uff1a\u6574\u500b NF \u7684\u555f\u52d5\u5165\u53e3\u7a0b\u5f0f\u3002\u4e3b\u8981\u8ca0\u8cac\u8b80\u53d6\u8a2d\u5b9a\u3001\u5efa\u7acb\u5fc5\u8981\u7684 context\uff0c\u521d\u59cb\u5316\u65e5\u8a8c\u8207\u5404\u7a2e\u670d\u52d9\u5143\u4ef6\uff0c\u6700\u5f8c\u555f\u52d5 HTTP/SBI server \u7b49\u5c0d\u5916\u4ecb\u9762\u3002</li> <li><code>go.mod</code> / <code>go.sum</code>\uff1aGo module \u7684\u76f8\u4f9d\u7ba1\u7406\u6a94\uff0c\u8a18\u9304\u9019\u500b NF \u4f7f\u7528\u5230\u7684\u5916\u90e8\u5957\u4ef6\u8207\u7248\u672c\uff0c\u78ba\u4fdd\u5efa\u7f6e\u74b0\u5883\u4e00\u81f4\u3002</li> <li><code>internal/context</code>\uff1a\u901a\u5e38\u653e\u8207 NF \u5167\u90e8\u300c\u57f7\u884c\u4e0a\u4e0b\u6587\u300d\u76f8\u95dc\u7684\u7d50\u69cb\u8207\u6b64 NF \u7684\u5be6\u969b\u696d\u52d9\u908f\u8f2f\u3002</li> <li><code>internal/logger</code>\uff1a\u5c01\u88dd\u65e5\u8a8c\u76f8\u95dc\u8a2d\u5b9a\u8207 API\uff0c\u4f8b\u5982 log level\u3001\u8f38\u51fa\u683c\u5f0f\uff0c\u8b93\u6574\u500b NF \u5728\u5beb log \u6642\u4f7f\u7528\u4e00\u81f4\u7684\u4ecb\u9762\u3002</li> <li> <p><code>internal/sbi</code>\uff1a\u8207 5GC SBA \u4e0a\u5176\u4ed6 NF \u4e92\u52d5\u7684\u4e3b\u8981\u5be6\u4f5c\uff1a</p> <ul> <li><code>api_xxx.go</code>\uff1a\u7531 OpenAPI / Swagger \u7522\u751f\u6216\u624b\u5beb\u7684 API \u4ecb\u9762\u5b9a\u7fa9\u8207 handler \u96db\u5f62\uff0c\u5c0d\u61c9\u5230 3GPP \u5b9a\u7fa9\u7684\u670d\u52d9\u4ecb\u9762\u3002</li> <li><code>consumer</code>\uff1a\u4f5c\u70ba\u300c\u5ba2\u6236\u7aef\u300d\u89d2\u8272\u547c\u53eb\u5176\u4ed6 NF \u7684 SBI \u670d\u52d9\uff0c\u4f8b\u5982\u5411 UDM \u67e5\u8a62\u8a02\u95b1\u8cc7\u6599\u3001\u5411 PCF \u53d6\u5f97\u7b56\u7565\u7b49\u3002</li> <li><code>processor</code>\uff1a\u8ca0\u8cac\u8655\u7406 SBI \u8a0a\u606f\u7684\u5546\u696d\u908f\u8f2f\uff0c\u5c07\u6536\u5230\u7684 request \u8f49\u6210\u5167\u90e8\u6d41\u7a0b\uff0c\u4f8b\u5982\u66f4\u65b0\u72c0\u614b\u6a5f\u3001\u89f8\u767c\u5167\u90e8\u4e0a\u4e0b\u6587\u6a21\u7d44\u529f\u80fd\u3002</li> <li><code>router.go</code> / <code>server.go</code>\uff1a\u5efa\u7acb HTTP router \u8207\u5be6\u969b\u555f\u52d5 SBI server \u7684\u7a0b\u5f0f\u78bc\uff0c\u5c07 URL path\u3001method \u8207\u5c0d\u61c9\u7684 handler \u4e32\u8d77\u4f86\u3002</li> </ul> </li> <li> <p><code>internal/util</code>\uff1a\u653e\u7f6e\u9019\u500b NF \u6703\u7528\u5230\u7684\u5171\u7528\u5c0f\u5de5\u5177\uff0c\u4f8b\u5982\u5b57\u4e32\u8655\u7406\u3001\u932f\u8aa4\u5305\u88dd\u3001\u5171\u540c\u5e38\u6578\u7b49\uff0c\u907f\u514d\u6563\u843d\u5728\u5404\u6a94\u6848\u4e2d\u3002</p> </li> <li><code>pkg</code>\uff1a\u5167\u90e8\u5305\u542b\u6b64 NF \u7684\u4e00\u4e9b\u5de5\u5ee0\u51fd\u6578\uff0c\u5305\u542b\u8a2d\u5b9a\u6a94\u8f09\u5165\u8207\u57fa\u672c\u529f\u80fd\u7684\u521d\u59cb\u5316\u7b49\u3002</li> <li><code>LICENSE</code>\uff1a\u6388\u6b0a\u689d\u6b3e\uff0c\u8aaa\u660e\u9019\u500b NF / \u5c08\u6848\u63a1\u7528\u7684\u958b\u6e90\u6388\u6b0a\u6a21\u5f0f\uff08free5GC \u4f7f\u7528 Apache 2.0\uff09\uff0c\u5c0d\u65bc\u5f8c\u7e8c\u4fee\u6539\u8207\u518d\u5229\u7528\u7684\u5408\u6cd5\u6027\u975e\u5e38\u95dc\u9375\u3002</li> </ul> <p>\u7406\u89e3\u9019\u6a23\u7684\u76ee\u9304\u8207\u6a21\u7d44\u5206\u5de5\uff0c\u6709\u52a9\u65bc\u4f60\u5728\u95b1\u8b80\u4efb\u4f55\u4e00\u500b free5GC NF \u6642\uff0c\u5feb\u901f\u627e\u5230\uff1a</p> <ul> <li>\u5f9e\u54ea\u88e1\u555f\u52d5\u7a0b\u5f0f\uff08<code>cmd/main.go</code>\uff09</li> <li>\u5f9e\u54ea\u88e1\u770b\u5167\u90e8\u529f\u80fd\u8655\u7406\u908f\u8f2f\u8207\u65e5\u8a8c\u8a2d\u5b9a\uff08<code>context</code>\u3001<code>logger</code>\uff09</li> <li>\u5f9e\u54ea\u88e1\u8ffd\u8e64 SBI \u6536\u9001\u6d41\u7a0b\u8207\u884c\u70ba\uff08<code>sbi</code> \u5e95\u4e0b\u7684 server / consumer / processor\uff09</li> <li>\u4ee5\u53ca\u54ea\u4e9b\u5de5\u5177\u6216\u5171\u7528\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u8907\u7528\uff08<code>util</code>\u3001<code>pkg</code>\uff09</li> </ul>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter3/#34","title":"3.4 \u672c\u7ae0\u5c0f\u7d50","text":"<p>\u672c\u7ae0\u5f9e\u4e09\u500b\u9762\u5411\u5efa\u7acb\u4e86\u8b80\u8005\u5c0d free5GC \u7684\u300c\u5168\u5c40\u5730\u5716\u300d\uff1a</p> <ul> <li>\u9996\u5148\uff0c\u6211\u5011\u8aaa\u660e\u4e86 free5GC \u7684\u5b9a\u4f4d\u2014\u2014\u4e00\u500b\u4ee5\u6559\u5b78\u3001\u7814\u7a76\u8207 PoC \u70ba\u4e3b\u7684\u958b\u6e90 5G Core \u5e73\u53f0\uff0c\u5f37\u8abf\u5176\u512a\u52e2\u5728\u65bc\u53ef\u8b80\u6027\u8207\u53ef\u4fee\u6539\u6027\uff0c\u800c\u975e\u5546\u7528\u7b49\u7d1a\u7684\u9ad8\u53ef\u7528\u8207\u5b8c\u6574\u529f\u80fd\u3002</li> <li>\u63a5\u8457\uff0c\u6211\u5011\u4ee5 5GC \u67b6\u69cb\u8207 free5GC \u5728 Github \u4e0a\u7684\u4e3b\u5009\u5eab\u70ba\u4e3b\u8ef8\uff0c\u4ecb\u7d39\u4e86\u5404\u985e NF \u7684\u89d2\u8272\u8207\u95dc\u4fc2\uff0c\u8b93\u8b80\u8005\u80fd\u628a AMF\u3001SMF\u3001UPF\u3001PCF \u7b49\u5143\u4ef6\u653e\u56de 3GPP SBA \u7684\u5927\u5716\u4e2d\u7406\u89e3\u3002</li> <li>\u6700\u5f8c\uff0c\u6211\u5011\u4ee5\u4e00\u500b\u5178\u578b NF \u7684\u76ee\u9304\u7d50\u69cb\u70ba\u4f8b\uff0c\u8aaa\u660e\u5f9e <code>cmd/main.go</code>\u3001<code>internal</code> \u5230 <code>pkg</code> \u7b49\u76ee\u9304\u7684\u8077\u8cac\u5206\u5de5\uff0c\u63d0\u4f9b\u4e00\u689d\u5be6\u969b\u300c\u8b80\u7a0b\u5f0f\u78bc\u300d\u7684\u8def\u7dda\u3002</li> </ul>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/","title":"\u7b2c 4 \u7ae0\uff1aAMF \u8a73\u89e3","text":""},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#41-amf","title":"4.1 AMF \u5728\u6838\u5fc3\u7db2\u8def\u4e2d\u7684\u89d2\u8272","text":"<p>\u5728 5G \u6838\u5fc3\u7db2\u8def\u4e2d\uff0cAMF\uff08Access and Mobility Management Function\uff0c\u63a5\u5165\u8207\u884c\u52d5\u6027\u7ba1\u7406\u529f\u80fd\uff09\u662f\u6240\u6709 UE \u9032\u5165 5GC \u7684\u300c\u7b2c\u4e00\u7ad9\u300d\u3002\u7576\u4e00\u652f\u624b\u6a5f\u958b\u6a5f\u3001\u767c\u8d77\u8a3b\u518a\u3001\u5efa\u7acb PDU \u6703\u8a71\u6216\u79fb\u52d5\u5230\u65b0\u7684\u5340\u57df\u6642\uff0c\u76f8\u95dc\u7684\u63a7\u5236\u8a0a\u865f\u5e7e\u4e4e\u90fd\u6703\u5148\u7d93\u904e AMF\uff0c\u518d\u7531 AMF \u8207\u5176\u4ed6 NF\uff08\u4f8b\u5982 SMF\u3001AUSF\u3001UDM\u3001PCF \u7b49\uff09\u5354\u8abf\u5f8c\u7e8c\u8655\u7406\u3002</p> <p>\u5f9e\u529f\u80fd\u89d2\u5ea6\u4f86\u770b\uff0cAMF \u4e3b\u8981\u8ca0\u8cac\u5e7e\u4ef6\u4e8b\u60c5\uff1a</p> <ul> <li>\u63a5\u5165\u63a7\u5236\u8207\u8a3b\u518a\u7ba1\u7406\uff1a\u8655\u7406 UE \u7684\u8a3b\u518a\uff08Registration\uff09\u3001\u66f4\u65b0\u8207\u8a3b\u92b7\uff08De-registration\uff09\uff0c\u6c7a\u5b9a\u662f\u5426\u5141\u8a31\u67d0\u500b UE \u4f7f\u7528\u7db2\u8def\u3002</li> <li>\u884c\u52d5\u6027\u8207\u9023\u7dda\u7ba1\u7406\uff1a\u8ffd\u8e64 UE \u6240\u5728\u7684\u8ffd\u8e64\u5340\uff08TA\uff09\u3001\u7ba1\u7406 RRC/NAS \u9023\u7dda\u72c0\u614b\uff0c\u5354\u52a9\u5b8c\u6210\u5207\u63db\uff08Handover\uff09\u8207\u91cd\u9078\uff08Reselection\uff09\u76f8\u95dc\u6d41\u7a0b\u3002</li> <li>\u5b89\u5168\u8207\u9451\u6b0a\u5354\u8abf\uff1a\u8207 AUSF\u3001UDM \u7b49 NF \u5354\u4f5c\uff0c\u5b8c\u6210 UE \u7684\u9451\u6b0a\u8207\u5b89\u5168\u4e0a\u4e0b\u6587\u5efa\u7acb\uff0c\u78ba\u4fdd\u8a0a\u865f\u8207\u8cc7\u6599\u5728\u7121\u7dda\u8207\u6838\u5fc3\u7db2\u6bb5\u4e4b\u9593\u7684\u4fdd\u8b77\u3002</li> <li>\u6703\u8a71\u5efa\u7acb\u5354\u8abf\u8005\uff1a\u5728 UE \u8981\u5efa\u7acb PDU \u6703\u8a71\u6642\uff0cAMF \u6703\u6839\u64da\u7b56\u7565\u8207\u62d3\u6a38\uff0c\u9078\u64c7\u9069\u7576\u7684 SMF\uff0c\u4e26\u5354\u52a9\u5efa\u7acb UE \u8207 SMF/UPF \u4e4b\u9593\u7684\u4e0a\u4e0b\u6587\u3002</li> </ul> <p>\u5728\u4ecb\u9762\u4e0a\uff0cAMF \u4e00\u624b\u9023\u63a5 N1\uff08UE \u2194 AMF \u7684 NAS \u8a0a\u606f\uff09\uff0c\u4e00\u624b\u9023\u63a5 N2\uff08gNB \u2194 AMF \u7684 NGAP \u8a0a\u606f\uff09\uff0c\u540c\u6642\u4e5f\u900f\u904e SBA \u4e0a\u7684\u5404\u7a2e Nn \u4ecb\u9762\u8207\u6838\u5fc3\u7db2\u5167\u5176\u4ed6 NF \u6e9d\u901a\u3002\u56e0\u6b64\uff0c\u4f60\u53ef\u4ee5\u628a AMF \u60f3\u50cf\u6210\u300c5GC \u63a7\u5236\u5e73\u9762\u5165\u53e3\u7684\u524d\u53f0\u8207\u4ea4\u901a\u6307\u63ee\u4e2d\u5fc3\u300d\uff0c\u8ca0\u8cac\u628a\u4f86\u81ea\u7121\u7dda\u5074\u7684\u9700\u6c42\u8f49\u63db\u6210\u6838\u5fc3\u7db2\u5167\u90e8\u7684\u670d\u52d9\u547c\u53eb\u3002</p> <p>Caution</p> <p>NAS \u96d6\u7136\u662f UE \u8207 AMF \u4e4b\u9593\u7684\u8a0a\u606f\uff0c\u4f46\u4f9d\u7136\u662f\u7531 RAN \u5305\u88dd\u5728 NGAP \u8a0a\u606f\u88e1\u9762\uff0c\u900f\u904e SCTP \u9023\u7dda\u4f86\u9001\u5165 AMF \u7684 N2 \u63a5\u53e3\uff01\u4e26\u4e0d\u662f UE \u76f4\u63a5\u9001\u5230 AMF \u4e0a\uff01</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#42-n2","title":"4.2 N2 \u4ecb\u9762\u8207\u76f8\u95dc\u5354\u5b9a","text":""},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#421-n2","title":"4.2.1 N2","text":"<p>N2 \u4ecb\u9762\u662f 5G RAN\uff08gNB\uff09\u8207 5GC \u63a7\u5236\u9762\uff08AMF\uff09\u4e4b\u9593\u7684\u63a7\u5236\u5e73\u9762\u4ecb\u9762\uff0c\u4e3b\u8981\u627f\u8f09\uff1a</p> <ul> <li>gNB \u8207 AMF \u4e4b\u9593\u7684\u8a0a\u865f\u5354\u8abf\uff0c\u4f8b\u5982 UE \u9644\u8457\u3001\u8ffd\u8e64\u5340\u66f4\u65b0\u3001\u5207\u63db\u7b49\u7a0b\u5e8f</li> <li>\u627f\u8f09 UE \u7684 NAS \u8a0a\u606f\uff0c\u5c07\u5176\u5305\u5728 NGAP \u8a0a\u606f\u4e2d\u8f49\u9001\u7d66 AMF \u8655\u7406</li> </ul> <p>\u5728\u5354\u5b9a\u5806\u758a\u4e0a\uff0cN2 \u4ecb\u9762\u901a\u5e38\u4f7f\u7528 IP \u4e4b\u4e0a\u7684 SCTP \u4f5c\u70ba\u50b3\u8f38\u5c64\u5354\u5b9a\uff0c\u5728\u5176\u4e0a\u904b\u884c NGAP \u61c9\u7528\u5c64\u5354\u5b9a\uff0c\u800c UE \u8207\u6838\u5fc3\u7db2\u4e4b\u9593\u7684 NAS \u8a0a\u606f\u5247\u88ab\u5c01\u88dd\u5728 NGAP \u8a0a\u606f\u4e2d\uff0c\u900f\u904e N2 \u8f49\u905e\u7d66 AMF\uff0c\u5982\u4e0a\u9762\u7684\u5354\u5b9a\u5806\u758a\u5716\u6240\u793a\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#422-sctp","title":"4.2.2 SCTP","text":"<p>SCTP\uff08Stream Control Transmission Protocol\uff09\u662f\u4e00\u7a2e\u8a0a\u606f\u5c0e\u5411\u3001\u652f\u63f4\u591a\u8def\u5f91\u8207\u591a\u4e32\u6d41\u7684\u50b3\u8f38\u5c64\u5354\u5b9a\uff0c\u5728 5G N2 \u4ecb\u9762\u4e2d\u88ab\u7528\u4f86\u627f\u8f09 NGAP \u8a0a\u606f\u3002\u8207\u4e00\u822c\u5e38\u898b\u7684 TCP \u76f8\u6bd4\uff0cSCTP \u7684\u5e7e\u500b\u7279\u9ede\u7279\u5225\u9069\u5408\u96fb\u4fe1\u8a0a\u865f\uff1a</p> <ul> <li>\u591a\u4e32\u6d41\uff08Multi-streaming\uff09\uff1a\u53ef\u4ee5\u5728\u4e00\u500b\u9023\u7dda\u4e2d\u5efa\u7acb\u591a\u500b\u7368\u7acb\u7684\u4e32\u6d41\uff0c\u6e1b\u5c11 Head-of-Line Blocking \u7684\u5f71\u97ff\uff0c\u8b93\u4e0d\u540c\u985e\u578b\u7684\u8a0a\u865f\u4e0d\u6703\u4e92\u76f8\u963b\u585e\u3002</li> <li>\u591a\u6b78\u5c6c\uff08Multi-homing\uff09\uff1a\u4e00\u500b\u7aef\u9ede\u53ef\u4ee5\u7d81\u5b9a\u591a\u500b IP \u4f4d\u5740\uff0c\u5728\u5176\u4e2d\u4e00\u689d\u8def\u5f91\u6545\u969c\u6642\uff0c\u53ef\u4ee5\u5feb\u901f\u5207\u63db\u5230\u5099\u63f4\u8def\u5f91\uff0c\u63d0\u9ad8\u53ef\u9760\u6027\u3002</li> <li>\u8a0a\u606f\u5c0e\u5411\u8207\u660e\u78ba\u7684\u8a0a\u606f\u908a\u754c\uff1a\u6bd4\u8f03\u7b26\u5408\u300c\u4e00\u5247\u8a0a\u865f\u4e00\u500b message\u300d\u7684\u4f7f\u7528\u6a21\u5f0f\uff0c\u65b9\u4fbf\u96fb\u4fe1\u5354\u5b9a\u5be6\u4f5c\u3002</li> </ul> <p>\u5728\u5be6\u4f5c\u4e0a\uff0cgNB \u8207 AMF \u6703\u5404\u81ea\u5728 N2 \u5c08\u7528\u7684 IP/Port \u4e0a\u5efa\u7acb SCTP \u9023\u7dda\uff0c\u5f8c\u7e8c\u6240\u6709 NGAP \u8a0a\u606f\u90fd\u900f\u904e\u9019\u689d\u9023\u7dda\u4ea4\u63db\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#423-ngap","title":"4.2.3 NGAP","text":"<p>NGAP\uff08Next Generation Application Protocol\uff09\u662f\u904b\u884c\u5728 N2 \u4ecb\u9762\u4e0a\u7684\u61c9\u7528\u5c64\u8a0a\u865f\u5354\u5b9a\uff0c\u8ca0\u8cac\u5b9a\u7fa9 gNB \u8207 AMF \u4e4b\u9593\u5404\u7a2e\u63a7\u5236\u6d41\u7a0b\u4f7f\u7528\u7684\u8a0a\u606f\u683c\u5f0f\u8207\u7a0b\u5e8f\u3002\u5e38\u898b\u7684 NGAP \u7a0b\u5e8f\u5305\u62ec\uff1a</p> <ul> <li>Initial UE Message / Initial Context Setup\uff1a\u7528\u65bc UE \u521d\u6b21\u8a3b\u518a\u6216\u5efa\u7acb PDU \u6703\u8a71\u6642\u7684\u4e0a\u4e0b\u6587\u5efa\u7acb</li> <li>UE Context Release\uff1a\u91cb\u653e UE \u5728 gNB/AMF \u4e4b\u9593\u7684\u4e0a\u4e0b\u6587</li> <li>Handover Preparation / Handover Resource Allocation\uff1a\u57f7\u884c UE \u5728\u4e0d\u540c gNB \u4e4b\u9593\u5207\u63db\u6642\u7684\u8a0a\u865f\u5354\u8abf</li> </ul> <p>\u5728 free5GC \u7684 AMF \u4e2d\uff0cNGAP \u6a21\u7d44\u6703\u8ca0\u8cac\uff1a</p> <ul> <li>\u89e3\u78bc\u7531 SCTP \u6536\u5230\u7684 NGAP PDU</li> <li>\u6839\u64da PDU \u985e\u578b\u5206\u6d3e\u5230\u5c0d\u61c9\u7684\u8655\u7406\u7a0b\u5e8f\uff08\u4f8b\u5982\u8655\u7406 Initial UE Message\u3001UE Context Release \u7b49\uff09</li> <li>\u5f9e NGAP \u4e2d\u53d6\u51fa NAS \u8ca0\u8f09\uff08N1 message\uff09\uff0c\u4ea4\u7d66 NAS \u8655\u7406\u908f\u8f2f</li> </ul>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#424-nas","title":"4.2.4 NAS","text":"<p>NAS\uff08Non-Access Stratum\uff09\u662f UE \u8207 5GC \u4e4b\u9593\u7684\u63a7\u5236\u5e73\u9762\u8a0a\u865f\u5c64\u7d1a\uff0c\u5c0d UE \u4f86\u8aaa\uff0c\u5b83\u662f\u300c\u76f4\u63a5\u8ddf\u6838\u5fc3\u7db2\u8aaa\u8a71\u300d\u7684\u90a3\u4e00\u5c64\u3002NAS \u8ca0\u8cac\u7684\u5167\u5bb9\u5305\u62ec\uff1a</p> <ul> <li>UE \u8a3b\u518a\uff08Registration\uff09\u3001\u66f4\u65b0\u8207\u8a3b\u92b7\uff08De-registration\uff09\u76f8\u95dc\u7a0b\u5e8f</li> <li>PDU \u6703\u8a71\u5efa\u7acb\u3001\u4fee\u6539\u8207\u91cb\u653e\u7684\u8acb\u6c42\u8207\u56de\u61c9</li> <li>\u5b89\u5168\u6a21\u5f0f\uff08Security Mode\uff09\u3001\u8eab\u4efd\u8b58\u5225\uff08Identity\uff09\u7b49\u63a7\u5236\u7a0b\u5e8f</li> </ul> <p>\u5728\u50b3\u905e\u8def\u5f91\u4e0a\uff0cNAS \u8a0a\u606f\u6703\uff1a</p> <ol> <li>\u5728 UE \u8207 gNB \u4e4b\u9593\uff0c\u5c01\u88dd\u5728 RRC \u8a0a\u606f\u4e2d\u50b3\u8f38\uff1b</li> <li>\u5230\u9054 gNB \u5f8c\uff0c\u7531 gNB \u900f\u904e NGAP \u5c07 NAS \u8ca0\u8f09\u5305\u5728\u9069\u7576\u7684 NGAP \u8a0a\u606f\u5167\uff1b</li> <li>\u7d93\u7531 N2/SCTP \u50b3\u7d66 AMF\uff0c\u6700\u5f8c\u7531 AMF \u7684 NAS \u8655\u7406\u908f\u8f2f\u89e3\u78bc\u8207\u8655\u7406\u3002</li> </ol> <p>Note</p> <p>\u5728\u4e0a\u9762\u7684\u5354\u5b9a\u5806\u758a\u5716\u4e2d\u53ef\u4ee5\u770b\u5230 NAS \u8a0a\u606f\u53c8\u5206\u70ba\u5169\u7a2e\uff1a</p> <ul> <li>NAS-MM\uff1aUE \u50b3\u9054\u8cc7\u8a0a\u5230 AMF \u7684\u8a0a\u606f</li> <li>NAS-SM\uff1aUE \u50b3\u9054\u8cc7\u8a0a\u5230 SMF \u7684\u8a0a\u606f\uff0c\u4f46 NAS-SM \u4f9d\u820a\u662f\u7531 AMF \u63a5\u6536\u5f8c\u7d93\u7531 SBI \u9001\u5230 SMF \u4e0a</li> </ul>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#43-amf","title":"4.3 AMF \u7684\u555f\u52d5\u6d41\u7a0b","text":"<p>Note</p> <p>\u9019\u88e1\u7684\u555f\u52d5\u6d41\u7a0b\u9069\u7528\u65bc\u5176\u4ed6 SBI \u4e0a\u9664\u4e86 NRF \u4ee5\u5916\u7684 NF\uff0c\u5f8c\u7e8c\u4ecb\u7d39\u5176\u4ed6 NF \u6642\u4fbf\u4e0d\u6703\u5728\u591a\u505a\u8aaa\u660e\uff01</p> <p>\u5728 free5GC \u7684\u5be6\u4f5c\u4e2d\uff0cAMF \u7684\u555f\u52d5\u6d41\u7a0b\u5927\u81f4\u53ef\u4ee5\u5206\u6210\u5e7e\u500b\u6b65\u9a5f\uff0c\u6574\u9ad4\u67b6\u69cb\u8207\u672c\u66f8\u7b2c 3 \u7ae0\u4ecb\u7d39\u7684\u901a\u7528 NF \u7d50\u69cb\u76f8\u547c\u61c9\uff1a</p> <ol> <li> <p>\u8b80\u53d6\u8a2d\u5b9a\u8207\u521d\u59cb\u5316 Logger</p> <p>\u555f\u52d5\u7a0b\u5f0f\u6703\u5148\u8f09\u5165 AMF \u7684\u8a2d\u5b9a\u6a94\uff08\u4f8b\u5982\u672c\u6a5f IP/Port\u3001PLMN/TA \u5217\u8868\u3001NRF \u4f4d\u5740\u3001SCTP \u53c3\u6578\u7b49\uff09\uff0c\u4e26\u4f9d\u64da\u8a2d\u5b9a\u521d\u59cb\u5316\u65e5\u8a8c\u7cfb\u7d71\uff0c\u78ba\u4fdd\u5f8c\u7e8c\u6bcf\u500b\u6a21\u7d44\u90fd\u80fd\u5beb\u51fa\u4e00\u81f4\u683c\u5f0f\u7684 log\u3002</p> </li> <li> <p>\u5efa\u7acb AMF \u4e0a\u4e0b\u6587\uff08Context\uff09</p> <p>\u63a5\u8457\u5efa\u7acb AMF \u7684\u5168\u57df context\uff0c\u5167\u542b\uff1a</p> <ul> <li>\u7db2\u8def\u62d3\u6a38\u8207 PLMN/TA \u914d\u7f6e</li> <li>\u8207\u5176\u4ed6 NF \u6e9d\u901a\u6240\u9700\u7684 SBI client \u8a2d\u5b9a</li> <li>\u5167\u90e8\u4f7f\u7528\u7684\u7de9\u5b58\u3001\u72c0\u614b\u8868\u8207\u8a08\u6642\u5668\u7b49</li> </ul> </li> <li> <p>\u521d\u59cb\u5316 SBI Server \u8207 NRF \u8a3b\u518a</p> <p>AMF \u6703\u555f\u52d5\u81ea\u5df1\u7684 SBI HTTP server\uff0c\u5c0d\u5916\u63d0\u4f9b\u670d\u52d9\uff0c\u540c\u6642\u4f5c\u70ba client \u4e3b\u52d5\u5411 NRF \u8a3b\u518a\u81ea\u5df1\u7684\u670d\u52d9\u80fd\u529b\u8207\u4f4d\u5740\uff0c\u8b93\u5176\u4ed6 NF \u53ef\u4ee5\u900f\u904e SBA \u6a5f\u5236\u767c\u73fe\u4e26\u547c\u53eb AMF\u3002</p> </li> <li> <p>\u555f\u52d5 N2\uff08SCTP / NGAP\uff09\u76f8\u95dc\u6a21\u7d44</p> <p>\u555f\u52d5 N2 \u7aef\u53e3\u7684 SCTP \u76e3\u807d\uff0c\u521d\u59cb\u5316 NGAP \u5354\u5b9a\u8655\u7406\u6a21\u7d44\uff0c\u6e96\u5099\u63a5\u6536\u4f86\u81ea gNB \u7684 NGAP \u8a0a\u606f\u8207\u5176\u4e2d\u6240\u627f\u8f09\u7684 NAS \u8ca0\u8f09\u3002</p> </li> <li> <p>\u9032\u5165\u4e8b\u4ef6\u8ff4\u5708\uff0c\u8655\u7406\u8a0a\u865f\u8207\u932f\u8aa4 </p> <p>\u6700\u5f8c\uff0cAMF \u6703\u9032\u5165\u4e3b\u4e8b\u4ef6\u8ff4\u5708\uff0c\u6301\u7e8c\u8655\u7406\uff1a</p> <ul> <li>\u4f86\u81ea N2 \u7684 NGAP / NAS \u8a0a\u606f</li> <li>\u4f86\u81ea\u5176\u4ed6 NF \u7684 SBI \u8acb\u6c42</li> <li>\u5167\u90e8\u8a08\u6642\u5668\u89f8\u767c\u8207\u72c0\u614b\u6a5f\u66f4\u65b0</li> </ul> </li> </ol> <p>\u7576\u4f60\u5728\u95b1\u8b80 AMF \u539f\u59cb\u78bc\u6642\uff0c\u53ef\u4ee5\u5c0d\u7167\u4e0a\u8ff0\u6b65\u9a5f\uff0c\u5f9e\u555f\u52d5\u5165\u53e3\u7a0b\u5f0f\u4e00\u8def\u8ffd\u5230\u8a2d\u5b9a\u8f09\u5165\u3001context \u5efa\u7acb\u3001SBI \u8a3b\u518a\u8207 N2 \u76e3\u807d\u7b49\u95dc\u9375\u7a0b\u5f0f\u78bc\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#44-amf-fsm","title":"4.4 AMF \u7684 FSM \u72c0\u614b\u6a5f","text":"<p>AMF \u5728\u5be6\u4f5c\u4e0a\u5927\u91cf\u4f7f\u7528 FSM\uff08Finite State Machine\uff0c\u6709\u9650\u72c0\u614b\u6a5f\uff09 \u4f86\u7ba1\u7406 UE \u8207\u8a0a\u865f\u6d41\u7a0b\u3002\u539f\u56e0\u5f88\u7c21\u55ae\uff1a</p> <p>\u5c0d\u6bcf\u4e00\u652f UE \u800c\u8a00\uff0c\u5f9e\u300c\u9084\u6c92\u4e0a\u7dda\u300d\u5230\u300c\u6210\u529f\u8a3b\u518a\u3001\u5efa\u7acb PDU \u6703\u8a71\u3001\u6700\u5f8c\u8a3b\u92b7\u96e2\u7dda\u300d\uff0c\u5176\u5be6\u5c31\u662f\u5728\u4e0d\u540c\u7684\u72c0\u614b\u4e4b\u9593\u79fb\u52d5\uff0c\u800c\u6bcf\u500b\u72c0\u614b\u53ea\u5141\u8a31\u767c\u751f\u7279\u5b9a\u7684\u4e8b\u4ef6\u8207\u8f49\u79fb\u3002\u5982\u679c\u4e0d\u7528\u72c0\u614b\u6a5f\u6e05\u695a\u63cf\u8ff0\uff0c\u7a0b\u5f0f\u78bc\u5f88\u5bb9\u6613\u8b8a\u6210\u4e00\u5806 if-else\uff0c\u65e2\u96e3\u95b1\u8b80\u4e5f\u96e3\u7dad\u8b77\u3002</p> <p>\u76ee\u524d free5GC AMF \u4e2d\u7684\u72c0\u614b\u6a5f\u5927\u81f4\u4e0a\u53ef\u4ee5\u7528\u4e0b\u9762\u9019\u5f35\u5716\u4f86\u770b\uff1a</p> <p></p> <p>AMF \u6703\u5f9e UE \u7684\u8d77\u59cb\u975e\u8a3b\u518a\u72c0\u614b\uff08Degistered\uff09\u4f9d\u7167\u72c0\u614b\u6a5f\u6539\u8b8a\u7684\u908f\u8f2f\u4f86\u66f4\u65b0 AMF \u4e2d UE context \u7684\u72c0\u614b\u3002\u5716\u4e2d\u4e09\u500b\u984f\u8272\u5206\u5225\u4ee3\u8868\u5982\u4e0b\uff1a</p> <ul> <li>\u6a59\u8272\uff1a\u4e8b\u4ef6\u89f8\u767c\uff0c\u8f49\u79fb\u5230\u4e0b\u4e00\u500b\u72c0\u614b</li> <li>\u7da0\u8272\uff1a\u4e8b\u4ef6\u6210\u529f\uff0c\u8f49\u79fb\u5230\u4e0b\u4e00\u72c0\u614b</li> <li>\u7d05\u8272\uff1a\u4e8b\u4ef6\u5931\u6557\uff0c\u56de\u8986\u5230\u524d\u9762\u7684\u67d0\u4e00\u500b\u72c0\u614b\uff08\u901a\u5e38\u6703\u56de\u5fa9\u5230\u5176\u5be6\u72c0\u614b\uff09</li> </ul> <p>Tip</p> <p>FSM \u9019\u500b\u6771\u897f\u4e26\u4e0d\u9700\u8981\u6b7b\u80cc\u786c\u8a18\uff0c\u53ef\u4ee5\u7c21\u55ae\u9019\u6a23\u8a18\uff1a</p> <ol> <li>\u624b\u6a5f\u958b\u6a5f\u9084\u6c92\u8a3b\u518a\uff0c\u6e96\u5099\u958b\u59cb\u8a3b\u518a</li> <li>\u9a57\u8b49\u96d9\u65b9\u7684\u57fa\u790e\u8cc7\u6599</li> <li>\u78ba\u8a8d\u5b89\u5168\u6a21\u5f0f</li> <li>\u5728 AMF \u4e2d\u5efa\u7acb UE \u7684\u7d00\u9304\u5be6\u4f8b</li> <li>\u624b\u6a5f\u8a3b\u518a\u6210\u529f\uff01</li> </ol>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#45-amf","title":"4.5 AMF \u7684\u5be6\u969b\u696d\u52d9\u5167\u5bb9","text":"<p>Note</p> <p>\u9019\u908a\u6703\u4ee5 UE \u7684\u89d2\u5ea6\u5e36\u8b80\u8005\u4e86\u89e3 AMF \u662f\u5982\u4f55\u8655\u7406 \u4f86\u81ea UE \u4ee5\u53ca RAN \u7684\u8a0a\u606f\uff0c\u5e0c\u671b\u53ef\u4ee5\u900f\u904e\u8cbc\u8fd1\u65e5\u5e38\u751f\u6d3b\u7684\u65b9\u5f0f\u4f86\u65b0\u624b\u4e5f\u80fd\u5f88\u8f15\u9b06\u7684\u4e86\u89e3\u6838\u7db2\u662f\u5982\u4f55\u8655\u7406\u9019\u4e9b\u8cc7\u8a0a\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#451-ue-registration","title":"4.5.1 UE \u8a3b\u518a\uff08Registration\uff09","text":"<p>\u5148\u5f9e\u6700\u5e38\u898b\u3001\u4e5f\u6700\u95dc\u9375\u7684\u300cUE \u8a3b\u518a\u300d\u6d41\u7a0b\u958b\u59cb\u3002\u4f60\u53ef\u4ee5\u628a\u8a3b\u518a\u60f3\u50cf\u6210\u300c\u5728\u6a5f\u5834\u6ac3\u6aaf\u8fa6\u7406\u5831\u5230\u300d\uff1aUE \u628a\u81ea\u5df1\u7684\u8eab\u5206\u8207\u9700\u6c42\u544a\u8a34 AMF\uff0cAMF \u6aa2\u67e5\u6c92\u554f\u984c\u5f8c\uff0c\u5e6b\u5b83\u5efa\u7acb\u4e00\u4efd\u300c\u65c5\u5ba2\u6a94\u6848\u300d\uff0c\u4e4b\u5f8c\u6240\u6709\u52d5\u4f5c\u90fd\u6703\u4ee5\u9019\u4efd\u6a94\u6848\u70ba\u57fa\u790e\u3002</p> <p>\u5f9e UE \u89d2\u5ea6\u770b\uff0c\u8a3b\u518a\u5927\u81f4\u6703\u7d93\u6b77\u9019\u5e7e\u500b\u6b65\u9a5f\uff1a</p> <ol> <li>UE \u958b\u6a5f\u6216\u9032\u5165\u9700\u8981\u670d\u52d9\u7684\u72c0\u614b\u6642\uff0c\u900f\u904e RRC\uff08UE \u8207 gNB \u4e4b\u9593\u4f7f\u7528\u7684\u5354\u5b9a\uff09 \u8207 gNB \u5efa\u7acb\u9023\u7dda\uff0c\u7136\u5f8c\u628a Registration Request\uff08NAS \u8a0a\u606f\uff09 \u4ea4\u7d66 gNB\u3002  </li> <li>gNB \u5c07\u9019\u500b NAS \u8ca0\u8f09\u5305\u5728 Initial UE Message\uff08NGAP\uff09\u88e1\u9762\uff0c\u900f\u904e N2/SCTP \u50b3\u7d66 AMF\u3002  </li> <li>AMF \u6536\u5230\u5f8c\uff0c\u6839\u64da\u8a3b\u518a\u539f\u56e0\u3001PLMN/TA \u8cc7\u8a0a\u8207 UE \u80fd\u529b\uff0c\u6c7a\u5b9a\u8981\u4e0d\u8981\u63a5\u53d7\u9019\u652f UE\uff0c\u4e26\u89f8\u767c\u8207 AUSF/UDM \u7684\u9451\u6b0a\u3001\u53d6\u5f97\u8a02\u95b1\u8cc7\u6599\u3002  </li> <li>\u7576\u5b89\u5168\u8207\u8a02\u95b1\u90fd OK \u5f8c\uff0cAMF \u56de\u50b3 Registration Accept \u7d66 UE\uff0c\u540c\u6642\u5728\u5167\u90e8\u5efa\u7acb\u8207\u9019\u652f UE \u5c0d\u61c9\u7684\u4e0a\u4e0b\u6587\uff08\u5305\u542b\u8b58\u5225\u8cc7\u8a0a\u3001TA \u5217\u8868\u3001\u5b89\u5168\u53c3\u6578\u7b49\uff09\u3002</li> </ol> <p>\u4e4b\u5f8c\uff0c\u53ea\u8981 UE \u9084\u5728\u300c\u5df2\u8a3b\u518a\u300d\u72c0\u614b\u4e2d\uff0cAMF \u5c31\u6703\u4f9d\u7167 FSM \u8a2d\u8a08\u8655\u7406\u5404\u7a2e\u66f4\u65b0\u8207\u79fb\u52d5\u76f8\u95dc\u7684\u4e8b\u4ef6\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#452-ue-pdu-pdu-session-establishment","title":"4.5.2 UE PDU \u6703\u8a71\u5efa\u7acb\uff08PDU Session Establishment\uff09","text":"<p>\u5b8c\u6210\u8a3b\u518a\u4e4b\u5f8c\uff0cUE \u9084\u9700\u8981\u5efa\u7acb\u81f3\u5c11\u4e00\u500b PDU Session \u624d\u80fd\u771f\u6b63\u300c\u4e0a\u7db2\u300d\u3002\u53ef\u4ee5\u628a\u9019\u770b\u6210\u662f\u300c\u5728\u6a5f\u5834\u8fa6\u5b8c\u5831\u5230\u5f8c\uff0c\u9084\u8981\u9818\u767b\u6a5f\u8b49\u4e26\u5206\u914d\u5ea7\u4f4d\u300d\uff1a UE \u544a\u8a34\u7db2\u8def\u81ea\u5df1\u60f3\u8981\u4ec0\u9ebc\u6a23\u7684\u9023\u7dda\uff08\u4f8b\u5982\u7528\u54ea\u500b DNN/\u5207\u7247\u3001\u8d70\u54ea\u7a2e QoS\uff09\uff0cAMF \u5247\u8ca0\u8cac\u5e6b\u5b83\u627e\u5230\u5408\u9069\u7684 SMF/UPF\uff0c\u4e26\u5b8c\u6210\u6574\u5957\u8def\u5f91\u7684\u5efa\u7acb\u3002</p> <p>\u5f9e UE \u89d2\u5ea6\u4f86\u770b\uff0cPDU \u6703\u8a71\u5efa\u7acb\u7684\u904b\u4f5c\u5927\u81f4\u5982\u4e0b\uff1a</p> <ol> <li>UE \u767c\u9001 PDU Session Establishment Request\uff08NAS-SM \u8a0a\u606f\uff09\uff0c\u5167\u5bb9\u5305\u542b DNN\u3001S-NSSAI\u3001\u8acb\u6c42\u7684 SSC mode \u7b49\u8cc7\u8a0a\uff0c\u900f\u904e N2 \u50b3\u5230 AMF\u3002  </li> <li>AMF \u6aa2\u67e5 UE \u7576\u524d\u8a3b\u518a\u8207\u5b89\u5168\u72c0\u614b\uff0c\u4e26\u4f9d\u64da\u7b56\u7565\u8207\u62d3\u6a38\u9078\u64c7\u4e00\u500b\u5408\u9069\u7684 SMF\uff08\u53ef\u80fd\u6703\u5411 NRF \u67e5\u8a62\u53ef\u7528\u7684 SMF \u5be6\u4f8b\uff09\u3002  </li> <li>AMF \u900f\u904e SBI \u5411\u9078\u5b9a\u7684 SMF \u767c\u51fa\u5efa\u7acb PDU Session \u7684\u8acb\u6c42\uff08\u4f8b\u5982 Nsmf_PDUSession_Create\uff09\uff0c\u4e26\u7b49\u5f85 SMF \u56de\u8986\u5206\u914d\u7684 IP \u4f4d\u5740\u3001UPF \u8cc7\u8a0a\u8207 QoS \u76f8\u95dc\u8a2d\u5b9a\u3002  </li> <li>\u6700\u5f8c\uff0cAMF \u900f\u904e NAS \u56de\u8986 UE\uff08PDU Session Establishment Accept\uff09\uff0c\u540c\u6642\u5354\u8abf gNB \u5b8c\u6210\u5c0d\u61c9\u7684 N3/N9 \u8def\u5f91\u8207 QoS \u8a2d\u5b9a\u3002</li> </ol> <p>\u5728\u9019\u500b\u6d41\u7a0b\u4e2d\uff0cAMF \u6bd4\u8f03\u50cf\u662f\u300c\u4ee3\u8fa6\u8207\u5354\u8abf\u8005\u300d\uff1a\u4e26\u4e0d\u76f4\u63a5\u8655\u7406\u4f7f\u7528\u8005\u5e73\u9762\u7684\u5c01\u5305\uff0c\u4f46\u8ca0\u8cac\u628a UE \u7684\u670d\u52d9\u9700\u6c42\u8f49\u6210 SMF/UPF \u7aef\u5be6\u969b\u7684\u8def\u7531\u8207\u8cc7\u6e90\u5206\u914d\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#453-ue-de-registration","title":"4.5.3 UE \u8a3b\u92b7\uff08De-registration\uff09","text":"<p>\u6bcf\u4e00\u6bb5\u65c5\u7a0b\u7d42\u7a76\u6703\u7d50\u675f\uff1a\u7576 UE \u95dc\u6a5f\u3001\u4e3b\u52d5\u5207\u65b7\u9023\u7dda\uff0c\u6216\u56e0\u70ba\u9577\u6642\u9593\u672a\u6d3b\u52d5\u88ab\u7db2\u8def\u4e3b\u52d5\u91cb\u653e\u6642\uff0c\u5c31\u6703\u9032\u5165 \u8a3b\u92b7\uff08De-registration\uff09 \u6d41\u7a0b\u3002\u9019\u4e00\u6b65\u7684\u76ee\u7684\uff0c\u662f\u5e6b UE \u8207\u7db2\u8def\u96d9\u65b9\u628a\u9084\u5728\u4f7f\u7528\u7684\u8cc7\u6e90\u597d\u597d\u6536\u5c3e\u3002</p> <p>\u5f9e UE \u89d2\u5ea6\u4f86\u770b\uff0c\u8a3b\u92b7\u6d41\u7a0b\u5927\u81f4\u5305\u542b\uff1a</p> <ol> <li>UE \u4e3b\u52d5\u9001\u51fa Deregistration Request\uff08NAS-MM \u8a0a\u606f\uff09\uff0c\u6216\u5728\u67d0\u4e9b\u60c5\u6cc1\u4e0b\u7531\u7db2\u8def\u5074\u89f8\u767c\u8a3b\u92b7\u7a0b\u5e8f\u3002  </li> <li> <p>AMF \u6536\u5230\u5f8c\uff0c\u6703\uff1a</p> <ul> <li>\u901a\u77e5\u76f8\u95dc\u7684 SMF/UPF \u91cb\u653e\u5c0d\u61c9\u7684 PDU \u6703\u8a71\u8207\u8cc7\u6e90  </li> <li>\u66f4\u65b0\u81ea\u8eab\u7684 UE \u4e0a\u4e0b\u6587\u72c0\u614b\uff08\u5f9e\u300c\u5df2\u8a3b\u518a\u300d\u5207\u56de\u300c\u672a\u8a3b\u518a\u300d\uff09  </li> <li>\u5728\u5fc5\u8981\u6642\u5411\u5176\u4ed6 NF\uff08\u4f8b\u5982 PCF\u3001UDM\uff09\u6e05\u9664\u66ab\u5b58\u72c0\u614b</li> </ul> </li> <li> <p>\u6700\u5f8c\uff0cAMF \u56de\u8986 De-registration Accept \u7d66 UE\uff0c\u8868\u793a\u9019\u6b21\u300c\u65c5\u7a0b\u300d\u6b63\u5f0f\u7d50\u675f\u3002</p> </li> </ol> <p>\u900f\u904e\u5b8c\u6574\u7684\u8a3b\u92b7\u7a0b\u5e8f\uff0c\u7db2\u8def\u624d\u80fd\u78ba\u4fdd\u8cc7\u6e90\u88ab\u6b63\u78ba\u56de\u6536\uff0c\u4e0d\u6703\u56e0\u70ba\u7570\u5e38\u96e2\u7dda\u6216\u903e\u6642\u800c\u7559\u4e0b\u7121\u7528\u7684\u4e0a\u4e0b\u6587\u8207 QoS \u914d\u7f6e\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#454","title":"4.5.4 \u5176\u4ed6\u696d\u52d9","text":"<p>\u9664\u4e86\u4e0a\u8ff0\u5e7e\u500b\u6700\u5e38\u898b\u3001\u6700\u6838\u5fc3\u7684\u6d41\u7a0b\u4e4b\u5916\uff0cAMF \u9084\u6703\u8655\u7406\u8a31\u591a\u8207\u884c\u52d5\u6027\u8207\u63a5\u5165\u76f8\u95dc\u7684\u696d\u52d9\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u8ffd\u8e64\u5340\u66f4\u65b0\uff08Tracking Area Update, TAU\uff09\u8207\u76f8\u95dc\u8a08\u6642\u5668\u7ba1\u7406</li> <li>Paging\uff08\u547c\u53eb\u9592\u7f6e\u72c0\u614b UE\uff09\u8207\u670d\u52d9\u8acb\u6c42\u6d41\u7a0b</li> <li>\u63db\u624b\uff08Handover\uff09</li> </ul> <p>\u9019\u4e9b\u696d\u52d9\u5728\u65e5\u5e38\u7db2\u8def\u904b\u4f5c\u4e2d\u626e\u6f14\u91cd\u8981\u89d2\u8272\uff0c\u4f46\u5728\u672c\u66f8\u4e2d\uff0c\u6211\u5011\u6703\u5148\u805a\u7126\u5728\u300c\u8a3b\u518a\u3001PDU \u6703\u8a71\u3001\u8a3b\u92b7\u300d\u9019\u4e09\u689d\u4e3b\u5e79\u6d41\u7a0b\uff0c\u8b93\u8b80\u8005\u5148\u628a AMF \u8207 UE \u4e4b\u9593\u7684\u6838\u5fc3\u4e92\u52d5\u641e\u6e05\u695a\uff0c\u5f8c\u7e8c\u60f3\u8981\u518d\u66f4\u6df1\u5165\u7684\u7814\u7a76\u5176\u4ed6\u529f\u80fd\u6642\u4e5f\u80fd\u66f4\u5bb9\u6613\u7684\u5165\u624b\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter4/#46","title":"4.6 \u672c\u7ae0\u5c0f\u7bc0","text":"<p>\u672c\u7ae0\u8aaa\u660e\u4e86 AMF \u4f5c\u70ba UE \u9032\u5165 5GC \u7684\u300c\u7b2c\u4e00\u7ad9\u300d\uff0c\u5982\u4f55\u4e00\u624b\u9023\u63a5 N1/N2 \u8a0a\u865f\uff0c\u4e00\u624b\u900f\u904e SBA \u8207 SMF\u3001AUSF\u3001UDM\u3001PCF \u7b49 NF \u5354\u4f5c\uff0c\u5b8c\u6210\u63a5\u5165\u63a7\u5236\u3001\u884c\u52d5\u6027\u7ba1\u7406\u3001\u5b89\u5168\u5354\u8abf\u8207 PDU \u6703\u8a71\u5efa\u7acb\u7b49\u5de5\u4f5c\u3002</p> <p>\u63a5\u8457\uff0c\u6211\u5011\u900f\u904e N2 \u5354\u5b9a\u5806\u758a\uff08SCTP/NGAP/NAS\uff09\u3001\u555f\u52d5\u6d41\u7a0b\u8207 FSM \u72c0\u614b\u6a5f\uff0c\u5f9e\u5be6\u4f5c\u89d2\u5ea6\u62c6\u89e3 AMF \u8655\u7406\u8a0a\u606f\u8207\u7ba1\u7406 UE \u751f\u547d\u9031\u671f\u7684\u65b9\u5f0f\u3002</p> <p>\u6700\u5f8c\uff0c\u672c\u7ae0\u4ee5 UE \u8996\u89d2\u8d70\u904e\u8a3b\u518a\u3001PDU \u6703\u8a71\u8207\u8a3b\u92b7\u4e09\u689d\u4e3b\u5e79\u6d41\u7a0b\uff0c\u4e26\u9ede\u51fa TAU\u3001Paging\u3001Handover \u7b49\u5176\u4ed6\u696d\u52d9\uff0c\u70ba\u5f8c\u7e8c\u6df1\u5165 SMF\u3001UPF \u7b49 NF \u7684\u7ae0\u7bc0\u5efa\u7acb\u5fc5\u8981\u7684\u80cc\u666f\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/","title":"\u7b2c 5 \u7ae0\uff1aSMF\u3001UPF \u8207\u4f7f\u7528\u8005\u9762\u6d41\u7a0b","text":"<p>\u5728 5G \u6838\u5fc3\u7db2\u8def\u4e2d\uff0cSMF\uff08Session Management Function\uff09\u8207 UPF\uff08User Plane Function\uff09\u662f\u4e00\u7d44\u300c\u4e00\u6587\u4e00\u6b66\u300d\u7684\u642d\u6a94\uff1aSMF \u8ca0\u8cac\u5e6b UE \u8a2d\u8a08\u8207\u7ba1\u7406\u6bcf\u4e00\u689d PDU \u6703\u8a71\u7684\u300c\u8def\u7dda\u8207\u898f\u5247\u300d\uff0cUPF \u5247\u662f\u5728\u8cc7\u6599\u9762\u5be6\u969b\u6536\u9001\u8207\u8f49\u767c\u5c01\u5305\u7684\u7bc0\u9ede\u3002\u7576 UE \u5b8c\u6210\u8a3b\u518a\u5f8c\uff0cSMF \u6703\u5354\u540c PCF \u7b49 NF\uff0c\u4f9d\u64da\u8a02\u95b1\u8cc7\u6599\u8207\u7b56\u7565\u5efa\u7acb\u6216\u4fee\u6539 PDU \u6703\u8a71\uff0c\u4e26\u900f\u904e N4 \u4ecb\u9762\u7684 PFCP \u628a\u5c0d\u61c9\u7684\u8cc7\u6599\u9762\u898f\u5247\u4e0b\u767c\u5230\u4e00\u500b\u6216\u591a\u500b UPF\uff0c\u8b93\u6574\u500b\u7db2\u8def\u5f97\u4ee5\u6b63\u78ba\u5730\u8f49\u9001 UE \u7684\u4e0a\u4e0b\u884c\u6d41\u91cf\u3002\u672c\u7ae0\u6703\u5148\u5f9e SMF\u3001UPF \u7684\u89d2\u8272\u8207\u4e92\u52d5\u95dc\u4fc2\u8ac7\u8d77\uff0c\u518d\u5728\u5f8c\u7e8c\u5c0f\u7bc0\u4e2d\u9010\u6b65\u62c6\u89e3\u5177\u9ad4\u7684\u4f7f\u7528\u8005\u9762\u6d41\u7a0b\u8207\u7a0b\u5f0f\u5be6\u4f5c\u7d30\u7bc0\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#51-n3n4","title":"5.1 N3/N4 \u4ecb\u9762\u8207\u76f8\u95dc\u5354\u5b9a","text":""},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#511-n3","title":"5.1.1 N3","text":"<p>N3 \u4ecb\u9762\u662f RAN\uff08gNB\uff09\u8207 UPF \u4e4b\u9593\u7684\u4f7f\u7528\u8005\u9762\u4ecb\u9762\uff0c\u4e3b\u8981\u627f\u8f09 UE \u7684\u771f\u6b63\u6578\u64da\u5c01\u5305\uff08\u4f8b\u5982\u700f\u89bd\u7db2\u9801\u3001\u770b\u5f71\u7247\u3001\u4f01\u696d VPN \u6d41\u91cf\u7b49\uff09\u3002\u5f9e\u62d3\u6a38\u4f86\u770b\uff0c\u5b83\u9023\u63a5\u7684\u662f\u300c\u7121\u7dda\u7db2\u8def\u7684\u51fa\u53e3\u300d\u548c\u300c\u6838\u5fc3\u7db2\u4f7f\u7528\u8005\u9762\u7684\u5165\u53e3\u300d\uff1a</p> <p>UE \u7684 IP \u5c01\u5305\u5148\u5728 gNB \u88ab\u5c01\u88dd\u6210 GTP-U \u5c01\u5305\uff0c\u6cbf\u8457 N3 \u50b3\u5230 UPF\uff0c\u4e4b\u5f8c\u518d\u7531 UPF \u4f9d\u7167 PFCP \u898f\u5247\u89e3\u5c01\u3001\u8f49\u9001\u5230\u5176\u4ed6 UPF \u6216\u5916\u90e8\u8cc7\u6599\u7db2\u8def\u3002</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cN3 \u672c\u8eab\u53ea\u662f\u4e00\u689d\u300c\u908f\u8f2f\u4ecb\u9762\u300d\u7684\u540d\u7a31\uff0c\u5be6\u969b\u4e0a\u5728\u5354\u5b9a\u5806\u758a\u4e0a\u6703\u8dd1 GTP-U\uff08\u4f7f\u7528 UDP/IP \u627f\u8f09\uff09\u3002\u540c\u6a23\u7684\u6280\u8853\u5728 4G \u4e2d\u4e5f\u88ab\u7528\u5728 eNodeB \u8207 S-GW \u4e4b\u9593\u7684 S1-U \u4ecb\u9762\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u5c0d 4G \u5df2\u7d93\u719f\u6089\uff0c\u53ef\u4ee5\u628a N3 \u7406\u89e3\u6210\u300c5G \u7248\u672c\u7684 S1-U\u300d\uff0c\u53ea\u662f\u5c0d\u63a5\u7bc0\u9ede\u5f9e S-GW \u63db\u6210\u4e86 UPF\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#512-gtp","title":"5.1.2 GTP","text":"<p>GTP\uff08GPRS Tunneling Protocol\uff09\u662f\u4e00\u7cfb\u5217\u300c\u70ba\u884c\u52d5\u7db2\u8def\u8a2d\u8a08\u7684\u5c01\u5305\u5c01\u88dd\u8207\u63a7\u5236\u5354\u5b9a\u300d\uff0c\u5728 5G \u4f7f\u7528\u8005\u9762\u6700\u5e38\u898b\u7684\u662f GTP-U\uff08User Plane\uff09\u3002\u5b83\u7684\u6838\u5fc3\u6982\u5ff5\u5f88\u7c21\u55ae\uff1a</p> <p>\u5728\u539f\u672c\u7684 IP \u5c01\u5305\u5916\u9762\u518d\u5305\u4e00\u5c64 GTP-U header\uff0c\u5229\u7528 TEID\uff08Tunnel Endpoint Identifier\uff09\u4f86\u6a19\u8b58\u300c\u9019\u500b\u5c01\u5305\u5c6c\u65bc\u54ea\u4e00\u689d\u96a7\u9053\uff0f\u54ea\u4e00\u689d PDU \u6703\u8a71\u300d\u3002</p> <p>Note</p> <p>\u6240\u8b02\u7684 GTP-U \u96a7\u9053\u5176\u5be6\u5c31\u662f\u5728 RAN \u8207 UPF \u4e4b\u9593\u5354\u5b9a\u597d\u7684\u4e00\u7d44\u5c01\u5305\u6a19\u982d\u8868\u793a\u8cc7\u8a0a\u770b\uff01</p> <p>\u5728 N3 \u4e0a\uff0cgNB \u6703\uff1a</p> <ul> <li>\u6839\u64da UE \u7684 RAN \u5167\u90e8\u4e0a\u4e0b\u6587\uff0c\u6311\u9078\u5c0d\u61c9\u7684 TEID \u8207 UPF \u76ee\u7684 IP\uff1b</li> <li>\u628a UE \u7684 IP \u5c01\u5305\u5305\u6210 GTP-U\uff0c\u9001\u5f80 UPF\u3002</li> </ul> <p>\u800c UPF \u6536\u5230\u5c01\u5305\u5f8c\uff0c\u6703\uff1a</p> <ul> <li>\u5148\u6839\u64da\u5916\u5c64\u7684 TEID \u67e5\u8868\u627e\u5230\u5c0d\u61c9\u7684 PDR\uff08\u9019\u4e00\u6b65\u6c7a\u5b9a\u300c\u9019\u662f\u54ea\u4e00\u689d PDU \u6703\u8a71\u300d\uff09\uff1b</li> <li>\u518d\u4f9d\u7167 PDR/FAR \u7684\u8a2d\u5b9a\uff0c\u6c7a\u5b9a\u662f\u5426\u8981\u89e3\u5c01\u3001\u5f80\u54ea\u88e1\u9001\u51fa\u3001\u662f\u5426\u8981\u91cd\u65b0\u5c01\u88dd\u6210\u53e6\u4e00\u689d GTP-U \u96a7\u9053\u3002</li> </ul> <p>\u5f9e\u9664\u932f\u89d2\u5ea6\u4f86\u770b\uff0c\u7406\u89e3 GTP-U \u7684 header \u8207 TEID \u6982\u5ff5\uff0c\u6703\u5c0d\u4f60\u5206\u6790 Wireshark trace\u3001\u78ba\u8a8d\u67d0\u689d\u6d41\u91cf\u70ba\u4ec0\u9ebc\u8d70\u5230\u7279\u5b9a UPF \u4ecb\u9762\u975e\u5e38\u6709\u5e6b\u52a9\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#513-n4","title":"5.1.3 N4","text":"<p>N4 \u4ecb\u9762\u662f SMF \u8207 UPF \u4e4b\u9593\u7684\u63a7\u5236\u4ecb\u9762\uff0c\u4e3b\u8981\u7528\u4f86\u4e0b\u767c\u3001\u66f4\u65b0\u8207\u522a\u9664\u8cc7\u6599\u9762\u8f49\u9001\u898f\u5247\u3002\u5c0d SMF \u4f86\u8aaa\uff0cN4 \u5c31\u50cf\u662f\u4e00\u689d\u300c\u9059\u63a7\u901a\u9053\u300d\uff0c\u900f\u904e\u5b83\u53ef\u4ee5\u544a\u8a34 UPF\uff1a\u54ea\u4e9b\u5c01\u5305\u5c6c\u65bc\u54ea\u500b PDU \u6703\u8a71\u3001\u8a72\u5f80\u54ea\u88e1\u8f49\u9001\u3001\u8981\u5957\u7528\u4ec0\u9ebc\u6a23\u7684 QoS \u8207\u8a08\u8cbb\u7b56\u7565\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#514-pfcp","title":"5.1.4 PFCP","text":"<p>\u5728 N4 \u4ecb\u9762\u4e0a\u4f7f\u7528\u7684\u5354\u5b9a\u662f PFCP\uff08Packet Forwarding Control Protocol\uff09\u3002PFCP \u662f\u4e00\u7a2e\u63a7\u5236\u5e73\u9762\u7684\u8a0a\u865f\u5354\u5b9a\uff0c\u8ca0\u8cac\u5728 SMF \u8207 UPF \u4e4b\u9593\uff1a</p> <ul> <li>\u5efa\u7acb\u3001\u4fee\u6539\u3001\u522a\u9664 \u6703\u8a71\uff08Session\uff09\uff0c\u5c0d\u61c9\u5230\u4e00\u689d PDU \u6703\u8a71\u5728 UPF \u4e0a\u7684\u8cc7\u6599\u9762\u72c0\u614b</li> <li>\u4e0b\u767c\u8207\u66f4\u65b0 PDR/FAR/QER \u7b49\u8f49\u9001\u8207 QoS \u898f\u5247\uff08\u672c\u66f8\u65bc 5.3.3 \u6703\u518d\u8a73\u7d30\u4ecb\u7d39\u5404\u6b04\u4f4d\u8207\u884c\u70ba\uff09</li> <li>\u56de\u5831\u8a08\u8cbb\u76f8\u95dc\u7684\u4f7f\u7528\u91cf\u7d71\u8a08\u8207\u4e8b\u4ef6</li> </ul> <p>Tip</p> <p>\u5728 high level \u4e0a\uff0c\u4f60\u53ef\u4ee5\u5148\u628a PFCP \u60f3\u50cf\u6210\uff1a\u300cSMF \u544a\u8a34 UPF \u8981\u600e\u9ebc\u8655\u7406\u5c01\u5305\u300d\u7684\u8a9e\u8a00\uff0c\u81f3\u65bc\u6bcf\u4e00\u7a2e\u898f\u5247\u7684\u6b04\u4f4d\u3001\u7de8\u78bc\u8207\u5be6\u4f5c\u7d30\u7bc0\uff0c\u6211\u5011\u6703\u5728\u672c\u7ae0\u5f8c\u9762\u914d\u5408\u7a0b\u5f0f\u78bc\u4e00\u4f75\u8aaa\u660e\u3002</p> <p>\u5f9e\u6d41\u7a0b\u89d2\u5ea6\u4f86\u770b\uff0c\u4e00\u689d PDU \u6703\u8a71\u5728 N4/PFCP \u4e0a\u5927\u81f4\u6703\u7d93\u6b77\uff1a</p> <ol> <li>\u5efa\u7acb\u968e\u6bb5\uff1aSMF \u9078\u597d\u8981\u4f7f\u7528\u7684 UPF \u5f8c\uff0c\u5148\u900f\u904e PFCP Session Establishment \u5efa\u7acb\u4e00\u689d\u5c0d\u61c9\u7684 Session\uff0c\u4e26\u5728\u5176\u4e2d\u9644\u4e0a\u7b2c\u4e00\u6279 PDR/FAR/QER \u898f\u5247\uff0c\u8b93 UPF \u77e5\u9053\u67d0\u4e9b GTP-U \u5c01\u5305\u6216\u5167\u90e8\u6d41\u91cf\u61c9\u8a72\u5982\u4f55\u5206\u985e\u8207\u8f49\u9001\u3002</li> <li>\u66f4\u65b0\u968e\u6bb5\uff1a\u7576 UE \u7684\u670d\u52d9\u9700\u6c42\u6216\u7db2\u8def\u72c0\u614b\u6539\u8b8a\u6642\uff08\u4f8b\u5982 QoS \u8abf\u6574\u3001\u63db\u8def\u5f91\u3001\u52a0/\u6e1b\u4e00\u53f0 UPF\uff09\uff0cSMF \u6703\u767c\u9001 PFCP Session Modification \u66f4\u65b0\u65e2\u6709\u898f\u5247\u3002</li> <li>\u91cb\u653e\u968e\u6bb5\uff1a\u5728 UE \u8a3b\u92b7\u6216 PDU \u6703\u8a71\u7d50\u675f\u6642\uff0cSMF \u6703\u7528 PFCP Session Deletion \u544a\u8a34 UPF \u53ef\u4ee5\u6e05\u9664\u5c0d\u61c9 Session \u8207\u898f\u5247\uff0c\u56de\u6536\u8cc7\u6e90\u4e26\u505c\u6b62\u7d71\u8a08\u3002</li> </ol> <p>\u5be6\u52d9\u4e0a\uff0c\u4e00\u689d\u770b\u4f3c\u7c21\u55ae\u7684\u300c\u4e0a\u7db2\u9023\u7dda\u300d\uff0c\u5728 PFCP \u88e1\u9762\u53ef\u80fd\u5206\u6210\u591a\u689d\u898f\u5247\uff1a\u4f8b\u5982\u666e\u901a\u6578\u64da\u3001VoNR \u8a9e\u97f3\u3001\u7279\u5b9a\u4f01\u696d\u5c08\u7db2\u6d41\u91cf\u6703\u5c0d\u61c9\u4e0d\u540c\u7684 PDR/QER\uff0c\u4f7f\u5f97\u4e4b\u5f8c\u4f60\u5728\u8ffd code \u6216\u770b log \u6642\uff0c\u53ef\u4ee5\u7cbe\u6e96\u5c0d\u61c9\u6bcf\u500b\u5c01\u5305\u70ba\u4f55\u6703\u88ab\u9019\u6a23\u8655\u7406\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#52-smfsession-management-function","title":"5.2 SMF\uff08Session Management Function\uff09","text":""},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#521-smf","title":"5.2.1 SMF \u7684\u4e3b\u8981\u529f\u80fd","text":"<p>SMF \u662f 5GC \u4e2d\u8ca0\u8cac PDU \u6703\u8a71\u7ba1\u7406 \u7684\u6838\u5fc3\u63a7\u5236\u9762 NF\u3002\u5b83\u6839\u64da UE \u7684\u8acb\u6c42\uff08NAS-SM\uff09\u3001\u8a02\u95b1\u8cc7\u6599\uff08UDM\uff09\u3001\u7b56\u7565\uff08PCF\uff09\u4ee5\u53ca\u7db2\u8def\u62d3\u6a38\uff08\u53ef\u7528\u7684 UPF \u8207\u8def\u5f91\uff09\uff0c\u6c7a\u5b9a\uff1a</p> <ul> <li>\u662f\u5426\u5141\u8a31\u5efa\u7acb\u6216\u4fee\u6539\u4e00\u689d PDU \u6703\u8a71</li> <li>\u8981\u9078\u54ea\u4e00\u500b\uff08\u6216\u591a\u500b\uff09UPF\u3001\u8d70\u54ea\u4e00\u689d\u8def\u5f91</li> <li>\u8a72\u6703\u8a71\u61c9\u8a72\u5957\u7528\u54ea\u4e9b QoS\u3001\u8a08\u8cbb\u8207\u5207\u7247\u7b49\u7b56\u7565\uff08\u9019\u4e9b\u7b56\u7565\u900f\u904e SBI \u5411 PCF \u767c\u8d77\u670d\u52d9\u8acb\u6c42\u4f86\u7372\u53d6\uff09</li> </ul> <p>\u5728 free5GC \u4e2d\uff0cSMF \u6703\u540c\u6642\u9762\u5c0d\u5169\u500b\u4e16\u754c\uff1a</p> <ul> <li>\u4e00\u908a\u900f\u904e SBI \u8207 AMF\u3001PCF\u3001UDM \u7b49 NF \u6e9d\u901a\uff0c\u8ca0\u8cac\u63a5\u6536\u4f86\u81ea UE \u7684 PDU Session \u8acb\u6c42\uff08NAS-SM \u7d93\u7531 AMF \u8f49\u5165\uff09\u3001\u53d6\u5f97\u8a02\u95b1\u8207\u7b56\u7565\u8cc7\u8a0a\u3002</li> <li>\u53e6\u4e00\u908a\u900f\u904e N4/PFCP \u63a7\u5236 UPF\uff0c\u628a\u300c\u6c7a\u5b9a\u597d\u8981\u600e\u9ebc\u8d70\u300d\u7684\u8def\u7dda\u8207\u898f\u5247\uff0c\u8f49\u63db\u6210\u5177\u9ad4\u7684 PDR/FAR/QER \u7b49\u8cc7\u6599\u9762\u914d\u7f6e\u3002</li> </ul> <p>Tip</p> <p>\u5982\u679c\u7528\u4e00\u500b\u751f\u6d3b\u5316\u7684\u6bd4\u55bb\uff0c\u4f60\u53ef\u4ee5\u628a SMF \u60f3\u50cf\u6210\u300c\u9ad8\u901f\u516c\u8def\u7684\u8def\u7db2\u898f\u5283\u4e2d\u5fc3\u300d\uff1a</p> <ul> <li>AMF \u5e36\u8457\u300c\u67d0\u4e00\u53f0\u8eca\uff08UE\uff09\u60f3\u53bb\u54ea\u88e1\uff08DNN/S-NSSAI\uff09\u300d\u4f86\u8a62\u554f</li> <li>SMF \u6839\u64da\u8eca\u5b50\u7684\u8eab\u4efd\uff08\u8a02\u95b1\uff09\u3001\u7968\u50f9\u65b9\u6848\uff08\u7b56\u7565\uff09\u3001\u7576\u524d\u8def\u6cc1\uff08\u62d3\u6a38\u8207\u8ca0\u8f09\uff09\uff0c\u6c7a\u5b9a\u8981\u8d70\u54ea\u5e7e\u689d\u9ad8\u901f\u516c\u8def\u3001\u5728\u54ea\u88e1\u9032\u51fa\u531d\u9053</li> <li>\u7136\u5f8c\u900f\u904e PFCP \u544a\u8a34\u6cbf\u9014\u7684\u6536\u8cbb\u7ad9\uff0f\u531d\u9053\u63a7\u5236\u5668\uff08UPF\uff09\u5982\u4f55\u8a8d\u5f97\u9019\u53f0\u8eca\u3001\u8a72\u653e\u884c\u5230\u54ea\u88e1</li> </ul>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#522-pdu","title":"5.2.2 PDU \u6703\u8a71","text":"<p>\u5728 5G \u6838\u5fc3\u7db2\u8def\u4e2d\uff0c\u4e00\u500b PDU \u6703\u8a71\uff08PDU Session\uff09 \u53ef\u4ee5\u88ab\u60f3\u50cf\u6210 UE \u8207\u67d0\u4e00\u500b\u8cc7\u6599\u7db2\u8def\uff08DN\uff0c\u4f8b\u5982 Internet \u6216\u4f01\u696d\u5c08\u7db2\uff09\u4e4b\u9593\u7684\u4e00\u689d\u908f\u8f2f\u5c08\u7dda\u3002\u53ea\u8981\u9019\u689d\u6703\u8a71\u5b58\u5728\uff0cUE \u5c31\u53ef\u4ee5\u900f\u904e\u5b83\u628a\u5c01\u5305\u9001\u9032 5GC\uff0c\u7531 SMF / UPF \u4f9d\u7167\u898f\u5247\u8f49\u9001\u5230\u6b63\u78ba\u7684\u76ee\u7684\u5730\uff1b\u7576\u6703\u8a71\u88ab\u91cb\u653e\u6642\uff0c\u76f8\u95dc\u7684 IP \u4f4d\u5740\u3001QoS \u914d\u7f6e\u8207\u8cc7\u6599\u9762\u8def\u5f91\u4e5f\u6703\u4e00\u4f75\u88ab\u56de\u6536\u3002</p> <p>\u5f9e\u7d44\u6210\u4f86\u770b\uff0c\u4e00\u689d PDU \u6703\u8a71\u901a\u5e38\u6703\u5305\u542b\u5e7e\u500b\u95dc\u9375\u5143\u7d20\uff1a</p> <ul> <li>PDN/DNN\uff1a\u9019\u689d\u6703\u8a71\u8981\u9023\u5230\u54ea\u4e00\u500b\u8cc7\u6599\u7db2\u8def\uff08\u4f8b\u5982 <code>internet</code>\u3001\u4f01\u696d APN\u3001\u5c08\u7db2 DNN \u7b49\uff09</li> <li>S-NSSAI / Slice\uff1a\u9019\u689d\u6703\u8a71\u5c6c\u65bc\u54ea\u4e00\u500b\u7db2\u8def\u5207\u7247\uff08\u5c0d\u61c9\u4e0d\u540c\u5ba2\u6236\u6216\u696d\u52d9\u5834\u666f\uff09</li> <li>IP \u4f4d\u5740\u6216\u5176\u4ed6 PDU Type\uff1a\u4f8b\u5982 IPv4\u3001IPv6\u3001IPv4v6\u3001Ethernet\u3001Unstructured \u7b49\uff08\u76ee\u524d free5GC \u5b98\u65b9\u50c5\u652f\u63f4 IPv4 \u7248\u672c\uff09</li> <li>QoS Profile / QoS Flow\uff1a\u6703\u8a71\u5167\u53ef\u4ee5\u518d\u7d30\u5206\u6210\u4e00\u500b\u6216\u591a\u500b QoS Flow\uff08\u6bcf\u500b\u5c0d\u61c9\u4e0d\u540c QFI\uff09\uff0c\u7528\u4f86\u5be6\u73fe\u66f4\u7d30\u7dfb\u7684\u670d\u52d9\u54c1\u8cea\u63a7\u5236</li> </ul> <p>\u8207 4G EPC \u6642\u4ee3\u76f8\u6bd4\uff0cPDU \u6703\u8a71\u5927\u81f4\u4e0a\u626e\u6f14\u985e\u4f3c EPS Bearer \u7684\u89d2\u8272\uff0c\u4f46 5G \u5728\u8a2d\u8a08\u4e0a\u628a\uff1a</p> <ul> <li>\u300c\u4e00\u689d\u6703\u8a71\u300d\u8207\u300c\u591a\u500b QoS Flow\u300d\u5206\u958b\u8655\u7406\uff0c\u8b93\u540c\u4e00\u689d PDU \u6703\u8a71\u53ef\u4ee5\u627f\u8f09\u4e0d\u540c QoS \u8981\u6c42\u7684\u6d41\u91cf\uff08\u4f8b\u5982\u4e00\u822c\u6578\u64da\u8207\u8a9e\u97f3\u53ef\u4ee5\u5171\u7528\u6703\u8a71\uff0c\u4f46\u4f7f\u7528\u4e0d\u540c QFI\uff09</li> <li>\u300cPDU \u6703\u8a71\u300d\u8207\u300c\u5207\u7247 / DNN\u300d\u66f4\u7dca\u5bc6\u5730\u7d81\u5728\u4e00\u8d77\uff0c\u65b9\u4fbf\u4f9d\u64da\u696d\u52d9\u9700\u6c42\u5efa\u7acb\u4e0d\u540c\u985e\u578b\u7684\u9023\u7dda\uff08\u4f8b\u5982\u540c\u4e00\u652f UE \u53ef\u540c\u6642\u5c0d\u516c\u7db2\u8207\u4f01\u696d\u5c08\u7db2\u5404\u6709\u4e00\u689d PDU \u6703\u8a71\uff09</li> </ul>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#53-upfuser-plane-function","title":"5.3 UPF\uff08User Plane Function\uff09","text":""},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#531-upf","title":"5.3.1 UPF \u7684\u4e3b\u8981\u529f\u80fd","text":"<p>UPF \u5247\u662f 5GC \u4e2d\u7684 \u8cc7\u6599\u9762\u5de5\u4f5c\u5143\u4ef6\uff08data-plane worker\uff09\u3002\u5b83\u8ca0\u8cac\u6839\u64da SMF \u4e0b\u767c\u7684 PFCP \u898f\u5247\uff0c\u5c0d\u7d93\u904e\u7684\u5c01\u5305\u505a\uff1a</p> <ul> <li>\u5206\u985e\uff08matching\uff09\uff1a\u5224\u65b7\u9019\u500b\u5c01\u5305\u5c6c\u65bc\u54ea\u4e00\u689d PDU \u6703\u8a71\u3001\u54ea\u4e00\u500b QFI / QoS \u6d41</li> <li>\u8f49\u9001\uff08forwarding\uff09\uff1a\u8f49\u5230 RAN\u3001\u5176\u4ed6 UPF\uff0c\u6216\u5916\u90e8 DN\uff08\u4f8b\u5982 Internet\u3001\u5c08\u7db2\uff09</li> <li>\u8655\u7406\uff08processing\uff09\uff1a\u4f8b\u5982\u91cf\u6e2c\u8207\u8a08\u8cbb\u7d71\u8a08\u3001\u5c01\u5305\u8907\u5beb\u93e1\u50cf\u3001\u90e8\u5206 header \u4fee\u6539\u7b49</li> </ul> <p>\u5f9e\u5be6\u4f5c\u89d2\u5ea6\u770b\uff0cUPF \u66f4\u8cbc\u8fd1\u4e00\u822c\u6211\u5011\u719f\u6089\u7684\u9ad8\u6548\u5c01\u5305\u8f49\u9001\u5f15\u64ce\uff08\u5982 DPDK\u3001eBPF\u3001P4 \u7b49\u6982\u5ff5\uff09\uff0c\u4f46\u5728\u672c\u66f8\u4e2d\uff0c\u6211\u5011\u6703\u8457\u91cd\u5728\u300c\u5b83\u5982\u4f55\u7406\u89e3 SMF \u4e0b\u767c\u7684 PFCP \u898f\u5247\uff0c\u4e26\u628a\u5b83\u5957\u7528\u5728\u5c01\u5305\u8def\u5f91\u4e0a\u300d\uff0c\u800c\u4e0d\u6703\u6df1\u5165\u6bcf\u4e00\u7a2e\u786c\u9ad4\u6216\u8edf\u9ad4\u52a0\u901f\u6280\u8853\u7684\u7d30\u7bc0\u3002</p> <p>\u4ee5 free5GC \u7684\u5be6\u4f5c\u70ba\u4f8b\uff0c\u4e00\u500b UPF \u5be6\u4f8b\u901a\u5e38\u6703\u5177\u5099\uff1a</p> <ul> <li>\u8207 RAN \u4e4b\u9593\u7684 N3 \u4ecb\u9762\uff08GTP-U\uff09\uff0c\u8ca0\u8cac\u6536\u9001\u4f86\u81ea gNB \u7684\u4f7f\u7528\u8005\u9762\u5c01\u5305</li> <li>\u8207\u5916\u90e8\u8cc7\u6599\u7db2\u8def\uff08DN\uff0c\u4f8b\u5982 Internet\u3001\u4f01\u696d\u5c08\u7db2\uff09\u7684\u4ecb\u9762\uff0c\u7528\u4f86\u628a\u5c01\u5305\u9001\u51fa\u6216\u63a5\u56de</li> <li>\u8207\u5176\u4ed6 UPF \u4e4b\u9593\u7684 N9 \u4ecb\u9762\uff0c\u7528\u65bc\u5206\u5c64\u6216\u591a\u7bc0\u9ede UPF \u67b6\u69cb\uff08\u4f8b\u5982 UL-CL\u3001Branching UPF \u7b49\u8a2d\u8a08\uff09</li> </ul> <p>UPF \u5728\u6536\u5230\u5c01\u5305\u6642\u7684\u57fa\u672c\u6d41\u7a0b\u53ef\u4ee5\u7c21\u5316\u70ba\uff1a</p> <ol> <li>\u5148\u6839\u64da TEID\u30015-tuple \u6216\u5176\u4ed6\u6b04\u4f4d\uff0c\u67e5\u8868\u627e\u5230\u5c0d\u61c9\u7684 PDR\uff1b</li> <li>\u6839\u64da PDR \u6307\u5b9a\u7684 FAR\uff0c\u6c7a\u5b9a\u8981\u5f80\u54ea\u500b\u4ecb\u9762\u6216\u4e0b\u4e00\u500b\u7bc0\u9ede\u9001\u51fa\uff0c\u4ee5\u53ca\u662f\u5426\u9700\u8981\u505a encapsulation / decapsulation\uff1b</li> <li>\u5957\u7528 QER/QFI \u7b49 QoS \u8a2d\u5b9a\uff0c\u4e26\u4f9d\u7167\u9700\u8981\u9032\u884c\u6392\u7a0b\u3001\u6574\u5f62\u6216\u512a\u5148\u6b0a\u8655\u7406\uff1b</li> <li>\u66f4\u65b0\u7528\u91cf\u7d71\u8a08\u8207\u4e8b\u4ef6\u8cc7\u8a0a\uff0c\u4ee5\u4fbf\u4e4b\u5f8c\u900f\u904e PFCP \u56de\u5831\u7d66 SMF/CHF \u4f5c\u70ba\u8a08\u8cbb\u6216\u76e3\u6e2c\u4f9d\u64da\u3002</li> </ol>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#532-gtp5g","title":"5.3.2 GTP5G","text":"<p>\u5728\u5be6\u4f5c\u5c64\u9762\uff0cfree5GC \u7684 UPF \u4e26\u4e0d\u662f\u300c\u81ea\u5df1\u5f9e\u96f6\u958b\u59cb\u5be6\u4f5c\u6574\u5957 GTP-U \u5354\u5b9a\u8207\u5c01\u5305\u8f49\u9001\u300d\uff0c\u800c\u662f\u5927\u91cf\u501a\u8cf4 free5GC \u81ea\u884c\u958b\u767c\u7684 Linux \u6838\u5fc3\u6a21\u7d44 gtp5g \u4f86\u8655\u7406\u5e95\u5c64\u7684\u5c01\u5305\u5c01\u88dd\u8207\u8f49\u9001\u5de5\u4f5c\u3002\u53ef\u4ee5\u628a gtp5g \u60f3\u50cf\u6210\u300c\u4e00\u500b\u5c08\u9580\u7d66 5G \u4f7f\u7528\u7684 GTP-U \u8655\u7406\u5f15\u64ce\u300d\uff0c\u88ab\u6574\u5408\u5728 Linux \u6838\u5fc3\u88e1\uff0c\u63d0\u4f9b\u7d66 UPF \u7a0b\u5f0f\u547c\u53eb\u3002</p> <p>gtp5g \u4e3b\u8981\u8ca0\u8cac\u5e7e\u4ef6\u4e8b\u60c5\uff1a</p> <ul> <li>\u5728 Linux \u6838\u5fc3\u4e2d\u5efa\u7acb\u8207\u7ba1\u7406 GTP-U\u300c\u96a7\u9053\u300d\u8207\u5c0d\u61c9\u7684 TEID\uff0fIP \u6620\u5c04\u95dc\u4fc2</li> <li>\u6839\u64da user space\uff08UPF\uff09\u8a2d\u5b9a\u7684\u898f\u5247\uff0c\u5c0d\u9032\u51fa\u7279\u5b9a\u7db2\u5361\u7684\u5c01\u5305\u505a GTP-U \u5c01\u88dd\u8207\u89e3\u5c01</li> <li>\u8207 Linux routing / qdisc / nftables \u7b49\u6a5f\u5236\u914d\u5408\uff0c\u5be6\u969b\u5b8c\u6210\u5c01\u5305\u8f49\u9001\u8207\u90e8\u5206 QoS\uff0f\u904e\u6ffe\u884c\u70ba</li> </ul> <p>\u800c free5GC UPF \u672c\u8eab\uff0c\u5247\u900f\u904e netlink / ioctl \u7b49\u6a5f\u5236\u8207 gtp5g \u6e9d\u901a\uff1a</p> <ul> <li>\u7576\u5f9e SMF \u6536\u5230\u65b0\u7684 PFCP \u898f\u5247\u6642\uff0cUPF \u6703\u628a\u5c0d\u61c9\u7684 TEID\u3001\u9060\u7aef IP\u3001\u6bd4\u5c0d\u689d\u4ef6\u7b49\u8cc7\u8a0a\u8f49\u5beb\u5230 gtp5g</li> <li>\u7576\u6d41\u91cf\u7d93\u904e\u6642\uff0c\u5be6\u969b\u505a encapsulation / decapsulation \u8207\u8def\u7531\u67e5\u8868\u7684\u662f Linux \u6838\u5fc3\u88e1\u7684 gtp5g</li> </ul> <p>\u9019\u6a23\u7684\u8a2d\u8a08\u6709\u5169\u500b\u597d\u8655\uff1a</p> <ul> <li>\u4f7f\u7528\u8005\u9762\u8cc7\u6599\u5e73\u9762\u53ef\u4ee5\u5145\u5206\u5229\u7528 Linux \u6838\u5fc3\u65e2\u6709\u7684\u5c01\u5305\u8655\u7406\u80fd\u529b\u8207\u512a\u5316\uff08\u4f8b\u5982\u591a\u6838\u5fc3\u3001\u786c\u9ad4 offload\uff09</li> <li>UPF \u7a0b\u5f0f\u53ef\u4ee5\u628a\u5fc3\u529b\u653e\u5728 PFCP \u898f\u5247\u7ba1\u7406\u8207 5GC \u908f\u8f2f\u4e0a\uff0c\u800c\u4e0d\u662f\u91cd\u9020\u4e00\u500b\u9ad8\u6548\u80fd\u5c01\u5305\u8f49\u9001\u5f15\u64ce</li> </ul>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#533","title":"5.3.3 \u8cc7\u6599\u5e73\u9762\u7684\u898f\u5247","text":"\u898f\u5247 \u5168\u540d \u63cf\u8ff0 PDR Packet Detection Rule \u300c\u5c01\u5305\u5075\u6e2c\u898f\u5247\u300d\uff0c\u8ca0\u8cac\u5b9a\u7fa9\u54ea\u4e9b\u5c01\u5305\u5c6c\u65bc\u54ea\u4e00\u689d PDU \u6703\u8a71\uff0f\u54ea\u4e00\u500b\u6d41\u91cf\u3002\u5e38\u898b\u7684\u6bd4\u5c0d\u689d\u4ef6\u5305\u542b TEID\u3001UE IP\u30015-tuple\u3001QFI \u7b49\uff0c\u662f\u6574\u500b\u8cc7\u6599\u5e73\u9762\u898f\u5247\u93c8\u7684\u5165\u53e3\u3002 FAR Forwarding Action Rule \u300c\u8f49\u9001\u52d5\u4f5c\u898f\u5247\u300d\uff0c\u63cf\u8ff0\u7576\u5c01\u5305\u88ab\u67d0\u689d PDR \u547d\u4e2d\u6642\uff0c\u63a5\u4e0b\u4f86\u8981\u600e\u9ebc\u8655\u7406\uff1a\u4f8b\u5982\u8981\u4e0d\u8981\u8f49\u9001\u3001\u5f80\u54ea\u500b\u4ecb\u9762\u6216\u9060\u7aef IP/TEID \u9001\u51fa\u3001\u662f\u5426\u8981\u4e1f\u68c4\u6216\u4f5c\u672c\u5730\u7aef\u8655\u7406\u7b49\u3002 QER QoS Enforcement Rule \u300cQoS \u57f7\u884c\u898f\u5247\u300d\uff0c\u7528\u4f86\u5957\u7528\u983b\u5bec\u3001\u6392\u7a0b\u8207\u512a\u5148\u6b0a\u7b49 QoS \u8a2d\u5b9a\uff0c\u4e26\u8207 QFI / QoS Flow \u5c0d\u61c9\u3002\u900f\u904e QER\uff0cUPF \u53ef\u4ee5\u5c0d\u4e0d\u540c\u6d41\u91cf\u7d66\u4e88\u4e0d\u540c\u7684\u901f\u7387\u9650\u5236\u3001\u6392\u7a0b\u6b0a\u91cd\u6216\u4fdd\u969c\u3002 URR Usage Reporting Rule \u300c\u4f7f\u7528\u91cf\u56de\u5831\u898f\u5247\u300d\uff0c\u8ca0\u8cac\u7d71\u8a08\u6d41\u91cf\u8207\u4e8b\u4ef6\u4e26\u56de\u5831\u7d66 SMF/CHF\uff0c\u4f8b\u5982\u8a08\u7b97\u4e0a\u4e0b\u8f09\u4f4d\u5143\u6578\u3001\u5c01\u5305\u6578\uff0c\u6216\u5728\u7279\u5b9a\u689d\u4ef6\uff08\u5982\u6d41\u91cf\u8d85\u904e\u9580\u6abb\u3001\u6703\u8a71\u7d50\u675f\uff09\u6642\u89f8\u767c\u56de\u5831\uff0c\u652f\u63f4\u8a08\u8cbb\u8207\u76e3\u63a7\u9700\u6c42\u3002 <p>\u9019\u4e9b\u898f\u5247\u6703\u5728 SMF \u4e2d\u900f\u904e\u5c0d PCF \u7684 SBI \u8acb\u6c42\u7372\u53d6\u300c\u7b56\u7565\u8207 QoS \u914d\u7f6e\u300d\uff0c\u518d\u7d50\u5408 UE \u7684\u8a02\u95b1\u8cc7\u6599\u8207\u76ee\u524d\u7db2\u8def\u72c0\u614b\uff0c\u8f49\u8b6f\u6210\u5177\u9ad4\u7684 PDR/FAR/QER/URR \u7d44\u5408\uff0c\u6700\u5f8c\u4ee5 PFCP \u8a0a\u606f\u4e0b\u767c\u5230 UPF\u3002\u63db\u53e5\u8a71\u8aaa\uff0cPCF \u7d66\u7684\u662f\u300c\u62bd\u8c61\u7684\u7b56\u7565\u300d\uff0c\u800c SMF \u5247\u8ca0\u8cac\u628a\u9019\u4e9b\u7b56\u7565\u843d\u5be6\u6210 UPF \u53ef\u4ee5\u76f4\u63a5\u57f7\u884c\u7684\u8cc7\u6599\u5e73\u9762\u898f\u5247\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter5/#_1","title":"\u672c\u7ae0\u5c0f\u7d50","text":"<p>\u672c\u7ae0\u5f9e\u9ad8\u5c64\u4ecb\u7d39\u4e86 SMF \u8207 UPF \u5728 5GC \u4e2d\u7684\u5206\u5de5\uff0c\u4ee5\u53ca\u5b83\u5011\u900f\u904e N3/N4\u3001GTP-U\u3001PFCP \u8207 gtp5g \u7b49\u6a5f\u5236\uff0c\u5c07\u300cPDU \u6703\u8a71\u8207\u7b56\u7565\u300d\u5177\u9ad4\u843d\u5be6\u6210\u8cc7\u6599\u5e73\u9762\u7684\u8f49\u9001\u8207\u8a08\u8cbb\u884c\u70ba\u3002</p> <p>\u4f60\u53ef\u4ee5\u7c21\u55ae\u8a18\u6210\uff1aSMF \u60f3\u898f\u5247\u3001UPF \u505a\u57f7\u884c\uff0cSMF \u6839\u64da\u8a02\u95b1\u8207\u7b56\u7565\u7d44\u5408\u51fa PDR/FAR/QER/URR\uff0cUPF \u5247\u4f9d\u6b64\u5728 N3 \u4e0a\u5be6\u969b\u6536\u9001\u8207\u8f49\u767c\u5c01\u5305\u3002</p> <p>\u7406\u89e3\u9019\u4e00\u5c0d\u300c\u4e00\u6587\u4e00\u6b66\u300d\u7684\u642d\u6a94\u4e4b\u5f8c\uff0c\u63a5\u4e0b\u4f86\u5728\u95b1\u8b80\u5176\u4ed6 NF\uff08\u4f8b\u5982 PCF\u3001UDM\u3001AUSF \u7b49\uff09\u6642\uff0c\u5c31\u80fd\u66f4\u6e05\u695a\u5730\u770b\u51fa\u5b83\u5011\u5982\u4f55\u5f9e\u5404\u81ea\u89d2\u5ea6\u5f71\u97ff\u6574\u9ad4\u7684\u63a7\u5236\u9762\u8207\u4f7f\u7528\u8005\u9762\u884c\u70ba\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/","title":"\u7b2c 6 \u7ae0\uff1a\u5176\u4ed6\u7db2\u8def\u5143\u4ef6","text":"<p>\u5728\u7b2c 4 \u7ae0\u4ee5\u53ca\u7b2c 5 \u7ae0\u6211\u5011\u4e86\u89e3\u4e86 AMF/SMF/UPF \u9019\u4e09\u500b\u6700\u4e3b\u8981\u7684\u6838\u5fc3 5G \u7db2\u8def\u5143\u4ef6\uff0c\u63a5\u4e0b\u4f86\u6211\u5011\u5c07\u4f9d\u5e8f\u4ecb\u7d39\u5176\u4ed6\u529f\u80fd\u76f8\u5c0d\u7c21\u55ae\u4f46\u4f9d\u820a\u91cd\u8981\u7684\u7db2\u8def\u5143\u4ef6\uff01\u672c\u66f8\u4e0d\u6703\u5f88\u8a73\u7d30\u7684\u53bb\u8b1b\u6bcf\u4e00\u500b\u7db2\u8def\u5143\u4ef6\u88e1\u9762\u7684\u6bcf\u4e00\u500b\u529f\u80fd\uff0c\u4f46\u900f\u904e\u4ecb\u7d39\u4e3b\u8981\u529f\u80fd\u7684\u65b9\u5f0f\u8b93\u8b80\u8005\u4e86\u89e3\u9019\u4e9b\u7db2\u8def\u5143\u4ef6\u5728 5G \u4e2d\u626e\u6f14\u8457\u4ec0\u9ebc\u6a23\u7684\u89d2\u8272\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#61-ausf","title":"6.1 AUSf","text":"<p>AUSF\uff08Authentication Server Function\uff09\u662f 5GC \u4e2d\u8ca0\u8cac \u7528\u6236\u9451\u6b0a \u7684\u6838\u5fc3\u7db2\u5143\u3002\u7576 UE \u767c\u8d77\u8a3b\u518a\u7a0b\u5e8f\u6642\uff0cAMF \u6703\u5c07\u76f8\u95dc\u7684\u8eab\u4efd\u8cc7\u8a0a\uff08\u5982 SUCI\u3001SUPI\uff09\u8f49\u7d66 AUSF\uff0cAUSF \u518d\u8207 UDM \u914d\u5408\uff0c\u6839\u64da\u7528\u6236\u7684\u9451\u6b0a\u5411\u91cf\u8207\u91d1\u9470\u8cc7\u6599\uff0c\u5b8c\u6210 5G-AKA \u6216 EAP-AKA\u2019 \u7b49\u9451\u6b0a\u7a0b\u5e8f\u3002</p> <p>\u5728 free5GC \u7684\u5be6\u4f5c\u4e2d\uff0cAUSF \u4e3b\u8981\u8ca0\u8cac\uff1a</p> <ul> <li>\u63a5\u6536\u4f86\u81ea AMF \u7684\u9451\u6b0a\u8acb\u6c42\uff0c\u9078\u64c7\u9069\u7576\u7684\u9451\u6b0a\u65b9\u6cd5</li> <li>\u5411 UDM \u67e5\u8a62\u4e26\u7522\u751f\u9451\u6b0a\u5411\u91cf\uff08Authentication Vector, AV\uff09</li> <li>\u9a57\u8b49 UE \u56de\u50b3\u7684\u9451\u6b0a\u56de\u61c9\u662f\u5426\u6b63\u78ba\uff0c\u4e26\u7522\u751f\u5f8c\u7e8c\u5b89\u5168\u6240\u9700\u7684\u4e0a\u4e0b\u6587\u8cc7\u8a0a</li> </ul> <p>\u4f60\u53ef\u4ee5\u628a AUSF \u60f3\u50cf\u6210\u300c\u5c08\u9580\u8ca0\u8cac\u6838\u5c0d\u8eab\u5206\u8207\u5bc6\u78bc\u300d\u7684\u5f8c\u7aef\u670d\u52d9\uff0c\u800c AMF \u5247\u662f\u628a UE \u5e36\u5230\u6ac3\u6aaf\u4f86\u9a57\u8b49\u7684\u90a3\u4e00\u7aef\u3002</p> <p>Note</p> <p>5G-AKA (Authentication and Key Agreement) \u662f\u4e00\u7a2e\u9a57\u8b49\u8207\u6563\u4f48 UE \u8207 5G \u71df\u904b\u5546\u4e4b\u9593\u5171\u4eab\u5bc6\u9470\u7684\u4e00\u7a2e\u6a5f\u5236\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#62-chf","title":"6.2 CHF","text":"<p>CHF\uff08Charging Function\uff09\u8ca0\u8cac \u8a08\u8cbb\u8207\u4f7f\u7528\u91cf\u7d71\u8a08\u76f8\u95dc\u7684\u908f\u8f2f\uff0c\u5728 5GC \u4e2d\u901a\u5e38\u8207 SMF\u3001UPF \u7b49\u7db2\u5143\u642d\u914d\uff0c\u91dd\u5c0d\u4e0d\u540c\u670d\u52d9\u8207\u5207\u7247\u7d00\u9304\u4f7f\u7528\u91cf\u8207\u4e8b\u4ef6\u3002\u5728\u8a31\u591a\u5be6\u4f5c\u4e2d\uff0cCHF \u6703\u642d\u914d\u73fe\u6709\u7684\u8a08\u8cbb\u7cfb\u7d71\u6216\u8cc7\u6599\u5eab\uff0c\u63d0\u4f9b\u5373\u6642\u8a08\u8cbb\uff08online charging\uff09\u8207\u96e2\u7dda\u8a08\u8cbb\uff08offline charging\uff09\u6240\u9700\u7684\u4ecb\u9762\u3002</p> <p>\u5728 free5GC \u7684\u67b6\u69cb\u88e1\uff0cCHF \u7684\u529f\u80fd\u76f8\u5c0d\u7c21\u5316\uff0c\u4e3b\u8981\u7528\u65bc\uff1a</p> <ul> <li>\u63a5\u6536 SMF / UPF \u900f\u904e URR \u5831\u4e0a\u4f86\u7684\u4f7f\u7528\u91cf\u8cc7\u8a0a</li> <li>\u4ee5\u4e8b\u4ef6\u70ba\u55ae\u4f4d\u8a18\u9304\u8207\u8f38\u51fa\uff0c\u65b9\u4fbf\u5f8c\u7e8c\u5206\u6790\u6216\u6574\u5408\u5230\u5916\u90e8\u7cfb\u7d71</li> </ul> <p>\u96d6\u7136\u672c\u66f8\u4e0d\u6703\u6df1\u5165\u5be6\u4f5c\u6bcf\u4e00\u7a2e\u8a08\u8cbb\u5834\u666f\uff0c\u4f46\u7406\u89e3 CHF \u7684\u89d2\u8272\uff0c\u6709\u52a9\u65bc\u4f60\u5728\u95b1\u8b80 PDU \u6703\u8a71\u8207 URR \u914d\u7f6e\u6642\uff0c\u77e5\u9053\u9019\u4e9b\u7d71\u8a08\u8cc7\u8a0a\u6700\u7d42\u6703\u88ab\u9001\u5230\u54ea\u88e1\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#63-nef","title":"6.3 NEF","text":"<p>NEF\uff08Network Exposure Function\uff09\u662f\u4e00\u500b \u300c\u628a 5G \u6838\u5fc3\u80fd\u529b\u5305\u88dd\u6210 API \u5c0d\u5916\u958b\u653e\u300d \u7684\u7db2\u5143\u3002\u5b83\u7684\u4e3b\u8981\u76ee\u6a19\uff0c\u662f\u8b93\u7b2c\u4e09\u65b9\u61c9\u7528\u6216\u4f01\u696d\u7cfb\u7d71\uff0c\u5728\u5b89\u5168\u3001\u53d7\u63a7\u7684\u524d\u63d0\u4e0b\uff0c\u80fd\u5920\u4f7f\u7528\u5230 5GC \u7684\u67d0\u4e9b\u80fd\u529b\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u67e5\u8a62\u6216\u8a02\u95b1\u67d0\u4e9b\u4e8b\u4ef6\uff08\u5982 UE \u72c0\u614b\u8b8a\u5316\u3001\u4f4d\u7f6e\u8b8a\u5316\uff09</li> <li>\u900f\u904e\u53d7\u63a7\u63a5\u53e3\u8abf\u6574\u90e8\u5206\u7b56\u7565\u6216\u670d\u52d9\u884c\u70ba</li> </ul> <p>\u5728 free5GC \u4e2d\uff0cNEF \u7684\u5be6\u4f5c\u8207\u5be6\u969b\u5546\u7528\u7cfb\u7d71\u76f8\u6bd4\u8f03\u70ba\u7c21\u5316\uff0c\u4f46\u5b83\u63d0\u4f9b\u4e86\u4e00\u500b\u5f88\u597d\u7684\u6846\u67b6\uff0c\u8b93\u4f60\u7406\u89e3 5G \u662f\u5982\u4f55\u628a\u300c\u96fb\u4fe1\u7db2\u300d\u8b8a\u6210\u300c\u53ef\u88ab\u61c9\u7528\u7a0b\u5f0f\u547c\u53eb\u7684\u670d\u52d9\u300d\u3002\u5c0d\u65bc\u60f3\u8981\u628a 5G \u6838\u5fc3\u8207\u81ea\u5bb6\u7cfb\u7d71\u6574\u5408\u7684\u8b80\u8005\u4f86\u8aaa\uff0cNEF \u662f\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\u5165\u53e3\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#64-nrf","title":"6.4 NRF","text":"<p>NRF\uff08Network Repository Function\uff09\u662f 5GC SBA \u67b6\u69cb\u4e2d\u7684 \u300c\u670d\u52d9\u767b\u9304\u4e2d\u5fc3\u8207\u76ee\u9304\u670d\u52d9\u300d\u3002\u6240\u6709 NF\uff08\u5305\u542b AMF\u3001SMF\u3001UPF\u3001PCF\u3001AUSF \u7b49\uff09\u5728\u555f\u52d5\u6642\uff0c\u6703\u5411 NRF \u8a3b\u518a\u81ea\u5df1\u7684\u670d\u52d9\u985e\u578b\u3001\u4f4d\u5740\u8207\u72c0\u614b\uff1b\u800c\u7576\u67d0\u500b NF \u60f3\u8981\u547c\u53eb\u5176\u4ed6 NF \u6642\uff0c\u5247\u6703\u5148\u5411 NRF \u67e5\u8a62\u53ef\u7528\u7684\u670d\u52d9\u5be6\u4f8b\u3002</p> <p>\u5728 free5GC \u4e2d\uff0cNRF \u4e3b\u8981\u8ca0\u8cac\uff1a</p> <ul> <li>\u63a5\u6536\u8207\u7dad\u8b77\u5404 NF \u7684\u8a3b\u518a\u8cc7\u8a0a</li> <li>\u63d0\u4f9b\u670d\u52d9\u767c\u73fe\uff08Service Discovery\uff09\u529f\u80fd\uff0c\u8b93 NF \u4e4b\u9593\u53ef\u4ee5\u7528\u670d\u52d9\u540d\u800c\u975e\u786c\u7de8\u78bc IP \u4e92\u76f8\u547c\u53eb</li> </ul> <p>\u5982\u679c\u628a 5GC \u60f3\u50cf\u6210\u4e00\u7d44\u5fae\u670d\u52d9\u7cfb\u7d71\uff0cNRF \u7684\u89d2\u8272\u5c31\u5f88\u50cf\u662f\u300c\u670d\u52d9\u8a3b\u518a\u4e2d\u5fc3 + \u7c21\u6613\u7684\u670d\u52d9\u76ee\u9304\u300d\uff0c\u662f\u6574\u500b SBA \u80fd\u9806\u5229\u904b\u4f5c\u7684\u95dc\u9375\u4e4b\u4e00\u3002</p> <p>Note</p> <p>\u8209\u4f8b AMF \u5411 SMF \u767c\u8d77 PDU \u6703\u8a71\u7684\u5efa\u7acb\u8acb\u6c42\uff0c\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b\uff1a</p> <ol> <li>SMF \u65bc\u555f\u52d5\u6642\u5411 NRF \u8a3b\u518a\u5176\u4f4d\u5740\u8207\u5176\u670d\u52d9</li> <li>NRF \u63a5\u6536 SMF \u7684\u8a3b\u518a\u8acb\u6c42</li> <li>AMF \u6536\u5230 \u4f86\u81ea UE \u7684 PDU \u6703\u8a71\u5efa\u7acb\u8acb\u6c42</li> <li>AMF \u5411 NRF \u8a62\u554f SMF \u7684\u4f4d\u5740\u8207 JWT \u9a57\u8b49 token</li> <li>AMF \u7528\u53d6\u5f97\u7684\u4f4d\u5740\u8207 JWT \u5411 SMF \u6b63\u5f0f\u767c\u8d77\u8acb\u6c42</li> </ol>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#65-nssf","title":"6.5 NSSF","text":"<p>NSSF\uff08Network Slice Selection Function\uff09\u8ca0\u8cac \u5354\u52a9\u9078\u64c7\u5408\u9069\u7684\u7db2\u8def\u5207\u7247\uff08Slice\uff09\u3002\u7576 UE \u8a3b\u518a\u6216\u5efa\u7acb PDU \u6703\u8a71\u6642\uff0cAMF \u8207 SMF \u6703\u6839\u64da UE \u7684\u8a02\u95b1\u8cc7\u8a0a\u3001\u670d\u52d9\u9700\u6c42\u8207\u7db2\u8def\u914d\u7f6e\uff0c\u6c7a\u5b9a\u61c9\u8a72\u628a\u5b83\u653e\u5230\u54ea\u4e00\u500b\u5207\u7247\uff1b\u5728\u9019\u500b\u904e\u7a0b\u4e2d\uff0cNSSF \u6703\u63d0\u4f9b\u5efa\u8b70\u8207\u6c7a\u7b56\u652f\u63f4\u3002</p> <p>\u5728 free5GC \u7684\u5be6\u4f5c\u4e2d\uff0cNSSF \u7684\u908f\u8f2f\u540c\u6a23\u8f03\u7c21\u5316\uff0c\u4f46\u6574\u9ad4\u6982\u5ff5\u4ecd\u7136\u4fdd\u7559\uff1a</p> <ul> <li>\u6839\u64da UE \u7684 S-NSSAI \u8acb\u6c42\u8207\u8a02\u95b1\u8cc7\u6599\uff0c\u5224\u65b7\u54ea\u4e9b\u5207\u7247\u53ef\u7528</li> <li>\u5354\u52a9 AMF / SMF \u9032\u884c\u5207\u7247\u9078\u64c7\u8207\u5c0d\u61c9\u7684 NF \u9078\u8def</li> </ul> <p>\u5c0d\u65bc\u9700\u8981\u591a\u79df\u6236\u6216\u4f01\u696d\u5c08\u7db2\u5834\u666f\u7684\u8b80\u8005\u4f86\u8aaa\uff0c\u7406\u89e3 NSSF \u7684\u89d2\u8272\uff0c\u6709\u52a9\u65bc\u4f60\u8a2d\u8a08\u300c\u540c\u4e00\u5957 5GC\uff0c\u670d\u52d9\u4e0d\u540c\u5ba2\u6236\u8207\u696d\u52d9\u300d\u7684\u67b6\u69cb\u3002</p> <p>Note</p> <p>S-NSSAI\uff08Single Network Slice Selection Assistance Information\uff09\u908f\u8f2f\u4e0a\u7531\u5169\u500b\u6b04\u4f4d\u7d44\u6210\uff1a</p> <ol> <li>ST\uff08Slice/Service Type\uff09\uff1a\u7528\u4f86\u8868\u793a\u300c\u9019\u689d\u5207\u7247\u7684\u5927\u985e\u578b\u300d\uff0c\u4f8b\u5982 eMBB\u3001URLLC\u3001mMTC \u7b49\u30023GPP \u898f\u7bc4\u4e2d\u901a\u5e38\u4ee5\u4e00\u500b 8-bit \u7684\u6578\u503c\u4f86\u5340\u5206\u4e0d\u540c\u7684\u670d\u52d9\u985e\u578b\uff08\u4f8b\u5982 1 = eMBB\uff0c2 = URLLC\uff0c3 = mMTC\uff09\uff0c\u71df\u904b\u5546\u4e5f\u53ef\u4ee5\u81ea\u884c\u5b9a\u7fa9\u5176\u4ed6\u6578\u503c\u4ee3\u8868\u7279\u5b9a\u696d\u52d9\u985e\u5225\u3002</li> <li>SD / SSD\uff08Slice Differentiator\uff09\uff1a\u7528\u4f86\u5728\u300c\u540c\u4e00\u7a2e ST \u985e\u578b\u300d\u4e0b\u9762\uff0c\u518d\u9032\u4e00\u6b65\u5340\u5206\u4e0d\u540c\u7684\u5be6\u969b\u5207\u7247\u5be6\u4f8b\u30023GPP \u6a19\u6e96\u540d\u7a31\u70ba SD\uff0824-bit\uff09\uff0c\u6709\u4e9b\u5be6\u4f5c\u6216\u6587\u4ef6\u6703\u5beb\u6210 SSD\uff0c\u672c\u66f8\u5728\u63cf\u8ff0\u6982\u5ff5\u6642\u7d71\u4e00\u7a31\u70ba SSD\u3002\u900f\u904e SSD\uff0c\u71df\u904b\u5546\u53ef\u4ee5\u5728\u540c\u4e00 ST \u4e4b\u4e0b\u5efa\u7acb\u591a\u500b\u908f\u8f2f\u7368\u7acb\u7684\u5207\u7247\uff0c\u4f8b\u5982\u591a\u500b\u4e0d\u540c\u4f01\u696d\u5c08\u7db2\u3002</li> </ol>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#66-pcf","title":"6.6 PCF","text":"<p>PCF\uff08Policy Control Function\uff09\u662f 5GC \u4e2d\u7684 \u300c\u7b56\u7565\u4e2d\u6a1e\u300d\uff0c\u8ca0\u8cac\u7ba1\u7406\u8207\u4e0b\u767c\u8207 QoS\u3001\u63a5\u5165\u63a7\u5236\u3001\u8def\u7531\u9078\u64c7\u8207\u8a08\u8cbb\u76f8\u95dc\u7684\u7b56\u7565\u3002\u7576 SMF\u3001AMF \u6216\u5176\u4ed6 NF \u5728\u8655\u7406 UE \u6d41\u91cf\u6216\u6703\u8a71\u6642\uff0c\u5982\u679c\u9700\u8981\u6c7a\u5b9a\u300c\u9019\u689d\u6d41\u91cf\u8a72\u7d66\u591a\u5c11\u983b\u5bec\u3001\u5141\u4e0d\u5141\u8a31\u9032\u7279\u5b9a DNN\u3001\u61c9\u8a72\u7528\u54ea\u500b\u8a08\u8cbb\u65b9\u6848\u300d\uff0c\u901a\u5e38\u90fd\u6703\u900f\u904e SBI \u5411 PCF \u8acb\u6c42\u7b56\u7565\u3002</p> <p>\u5728 free5GC \u4e2d\uff0cPCF \u6703\uff1a</p> <ul> <li>\u5132\u5b58\u4e00\u7d44\u76f8\u5c0d\u7c21\u5316\u7684\u7b56\u7565\u8207 QoS \u914d\u7f6e\uff08\u4f8b\u5982\u5c0d\u7279\u5b9a DNN / Slice \u7684\u9810\u8a2d QoS\uff09</li> <li>\u63a5\u6536 SMF/AMF \u7684\u67e5\u8a62\uff0c\u56de\u50b3\u5c0d\u61c9\u7684\u7b56\u7565\u7d50\u679c\uff08\u5982 QoS Profile\u3001Policy Rule\uff09</li> </ul> <p>\u4f60\u53ef\u4ee5\u628a PCF \u60f3\u50cf\u6210\u300c\u6574\u500b 5GC \u7684\u898f\u5247\u8cc7\u6599\u5eab\u8207\u6c7a\u7b56\u670d\u52d9\u300d\uff0c\u524d\u9762\u7b2c 5 \u7ae0\u4e2d\u4ecb\u7d39\u7684 PDR/FAR/QER/URR\uff0c\u5f88\u591a\u5c31\u662f\u5728\u9019\u88e1\u88ab\u5b9a\u7fa9\u6216\u5f71\u97ff\uff0c\u518d\u7531 SMF \u8f49\u8b6f\u6210 UPF \u53ef\u57f7\u884c\u7684\u898f\u5247\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#67-udm","title":"6.7 UDM","text":"<p>UDM\uff08Unified Data Management\uff09\u662f 5GC \u4e2d\u4e3b\u8981\u7684 \u7528\u6236\u8a02\u95b1\u8cc7\u6599\u8207\u90e8\u4efd\u72c0\u614b\u7684\u7ba1\u7406\u4e2d\u5fc3\u3002\u5b83\u5927\u81f4\u627f\u8972\u4e86 4G \u6642\u4ee3 HSS \u7684\u89d2\u8272\uff0c\u4f46\u5728 5G \u4e2d\u88ab\u91cd\u65b0\u8a2d\u8a08\uff0c\u4ee5\u66f4\u7b26\u5408 SBA \u8207\u96f2\u539f\u751f\u67b6\u69cb\u3002</p> <p>UDM \u7684\u4e3b\u8981\u8077\u8cac\u5305\u62ec\uff1a</p> <ul> <li>\u5132\u5b58\u8207\u63d0\u4f9b\u7528\u6236\u7684\u57fa\u672c\u8cc7\u6599\uff08SUPI\u3001\u670d\u52d9\u6b0a\u9650\u3001\u6f2b\u904a\u6b0a\u9650\u7b49\uff09</li> <li>\u8207 AUSF \u5408\u4f5c\uff0c\u63d0\u4f9b\u9451\u6b0a\u6240\u9700\u7684\u91d1\u9470\u8207\u9451\u6b0a\u5411\u91cf\u8cc7\u8a0a</li> <li>\u70ba AMF\u3001SMF \u7b49\u7db2\u5143\u63d0\u4f9b\u8207\u8a02\u95b1\u76f8\u95dc\u7684\u67e5\u8a62\u670d\u52d9\uff08\u4f8b\u5982\u53ef\u7528\u7684\u5207\u7247\u3001\u5141\u8a31\u7684 DNN \u7b49\uff09</li> </ul> <p>\u5728 free5GC \u4e2d\uff0cUDM \u5e38\u8207\u8cc7\u6599\u5eab\uff08\u5982 MongoDB\uff09\u642d\u914d\u4f7f\u7528\uff0c\u4f60\u5728\u90e8\u7f72\u8207\u6e2c\u8a66\u6642\u6703\u7d93\u5e38\u8207\u5b83\u6253\u4ea4\u9053\uff0c\u7279\u5225\u662f\u5728\u4fee\u6539\u7528\u6236\u8cc7\u6599\u6216\u6e2c\u8a66\u4e0d\u540c\u7b56\u7565\u7d44\u5408\u6642\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#68-udr","title":"6.8 UDR","text":"<p>UDR\uff08Unified Data Repository\uff09\u53ef\u4ee5\u8996\u70ba 5GC \u4e2d\u66f4\u901a\u7528\u7684\u8cc7\u6599\u5132\u5b58\u5c64\uff0c\u7528\u4f86\u5b58\u653e\u5404\u7a2e\u7531\u4e0d\u540c NF \u7ba1\u7406\u7684\u8cc7\u6599\uff0c\u5982\u8a02\u95b1\u8cc7\u6599\u3001\u7b56\u7565\u8cc7\u8a0a\u6216\u61c9\u7528\u76f8\u95dc\u8cc7\u6599\u3002UDM\u3001PCF \u7b49 NF \u53ef\u4ee5\u628a\u81ea\u5df1\u7684\u8cc7\u6599\u6301\u4e45\u5316\u5728 UDR \u4e2d\uff0c\u900f\u904e\u6a19\u6e96\u5316\u7684\u4ecb\u9762\u9032\u884c\u5b58\u53d6\u3002</p> <p>\u5728\u67d0\u4e9b\u5be6\u4f5c\u4e2d\uff0cUDM \u6703\u88ab\u8996\u70ba\u300c\u908f\u8f2f\u4e0a\u7684\u7528\u6236\u8cc7\u6599\u7ba1\u7406\u670d\u52d9\u300d\uff0c\u800c\u5be6\u969b\u7684\u8cc7\u6599\u5247\u5b58\u653e\u5728 UDR\uff1bPCF \u4e5f\u53ef\u4ee5\u5229\u7528 UDR \u4f86\u5132\u5b58\u7b56\u7565\u914d\u7f6e\u3002\u5c0d\u65bc\u8b80\u8005\u800c\u8a00\uff0c\u53ea\u8981\u8a18\u5f97\uff1aUDR \u4e3b\u8981\u89e3\u6c7a\u7684\u662f\u300c\u8cc7\u6599\u5982\u4f55\u7d71\u4e00\u5132\u5b58\u8207\u5b58\u53d6\u300d\u7684\u554f\u984c\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u53c3\u8207\u8a0a\u865f\u6d41\u7a0b\u3002</p> <p>Caution</p> <p>\u5f88\u5bb9\u6613\u628a UDM \u548c UDR \u641e\u6df7\uff0c\u53ef\u4ee5\u7528\u4e00\u53e5\u8a71\u4f86\u5340\u5206\uff1a</p> <ul> <li>UDM \u662f\u300c\u6703\u601d\u8003\u7684\u670d\u52d9\u300d\uff1a\u63d0\u4f9b API\u3001\u5be6\u4f5c 5GC \u898f\u7bc4\u88e1\u95dc\u65bc\u7528\u6236\u8cc7\u6599\u8207\u9451\u6b0a\u7684\u908f\u8f2f\uff08\u8ab0\u80fd\u7528\u3001\u600e\u9ebc\u9a57\u8b49\u3001\u5141\u8a31\u54ea\u4e9b\u5207\u7247/DNN \u7b49\uff09\u3002</li> <li>UDR \u662f\u300c\u6703\u5b58\u6771\u897f\u7684\u8cc7\u6599\u5eab\u300d\uff1a\u5c08\u6ce8\u5728\u7d71\u4e00\u5132\u5b58\u5404\u7a2e NF \u7684\u8cc7\u6599\uff08\u5305\u542b UDM \u7684\u8cc7\u6599\uff09\uff0c\u672c\u8eab\u4e0d\u8ca0\u8cac 5GC \u8a0a\u865f\u6d41\u7a0b\u8207\u6c7a\u7b56\u908f\u8f2f\u3002</li> </ul>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#69-web-console","title":"6.9 Web console","text":"<p>\u6839\u64da 3GPP \u7684\u898f\u5b9a\uff0c5G \u7cfb\u7d71\u61c9\u63d0\u4f9b\u7d71\u4e00\u7684 OAM\uff08Operations, Administration and Maintenance\uff09\u4ecb\u9762\uff0c\u8b93\u71df\u904b\u8005\u53ef\u4ee5\u7ba1\u7406\u7528\u6236\u8cc7\u6599\u3001\u76e3\u63a7\u7db2\u8def\u72c0\u614b\u4e26\u6536\u96c6\u5404\u7a2e\u7d71\u8a08\u8207\u8a08\u8cbb\u8cc7\u8a0a\u3002free5GC \u4e26\u6c92\u6709\u5be6\u4f5c\u4e00\u5957\u5b8c\u6574\u3001\u7b26\u5408\u6240\u6709\u6a19\u6e96\u7684 OAM \u5e73\u53f0\uff0c\u4f46\u63d0\u4f9b\u4e86\u4e00\u500b\u5be6\u7528\u7684 Web Console\uff08\u7db2\u9801\u7ba1\u7406\u4ecb\u9762\uff09 \u4f5c\u70ba\u8f15\u91cf\u7248\u7684 OAM \u89e3\u6c7a\u65b9\u6848\u3002</p> <p>\u5728 free5GC \u7684\u5be6\u4f5c\u4e2d\uff0c\u9019\u5957 Web Console \u4e3b\u8981\u5177\u5099\u5169\u985e\u529f\u80fd\uff1a</p> <ul> <li> <p>\u8cc7\u6599\u7ba1\u7406\u8207\u914d\u7f6e\uff1a\u900f\u904e\u524d\u7aef\u9801\u9762\u76f4\u63a5\u5c0d\u5f8c\u7aef\u7684 MongoDB \u9032\u884c\u64cd\u4f5c\uff0c\u5305\u542b\uff1a</p> <ul> <li>\u65b0\u589e\u3001\u522a\u9664\u6216\u4fee\u6539 UE\uff08\u4f7f\u7528\u8005\uff09\u8cc7\u6599\u8207\u76f8\u95dc\u8a02\u95b1\u8a2d\u5b9a</li> <li>\u7ba1\u7406\u5207\u7247\uff08S-NSSAI\uff09\u3001DNN\u3001\u7b56\u7565\u7b49\u8207\u7528\u6236\u76f8\u95dc\u7684\u975c\u614b\u914d\u7f6e</li> </ul> </li> <li> <p>\u72c0\u614b\u76e3\u63a7\u8207\u5831\u8868\u8f38\u51fa\uff1a\u5728\u6838\u5fc3\u7db2\u555f\u52d5\u4e26\u904b\u4f5c\u6642\uff0cWeb Console \u53ca\u5176\u5f8c\u7aef\u5143\u4ef6\u53ef\u4ee5\uff1a</p> <ul> <li>\u900f\u904e\u8207 CHF \u5efa\u7acb FTP \u6216\u5176\u4ed6\u65b9\u5f0f\u7684\u9023\u7dda\uff0c\u6536\u96c6\u4e26\u532f\u51fa UE \u4f7f\u7528\u91cf\u8207\u8a08\u8cbb\u76f8\u95dc\u5831\u544a\uff0c\u65b9\u4fbf\u5f8c\u7e8c\u5206\u6790\u6216\u5c0d\u63a5\u5916\u90e8\u7cfb\u7d71</li> </ul> </li> </ul> <p>\u5c0d\u65bc\u6b63\u5728\u5b78\u7fd2\u6216\u5be6\u9a57 free5GC \u7684\u8b80\u8005\u4f86\u8aaa\uff0c\u9019\u5957 Web Console \u7684\u91cd\u9ede\u662f\u63d0\u4f9b\u4e00\u500b\u76f4\u89ba\u7684\u5716\u5f62\u4ecb\u9762\uff0c\u5354\u52a9\u4f60\u66f4\u8f15\u9b06\u5730\u7ba1\u7406 MongoDB \u4e2d\u7684\u7528\u6236\u8207\u7b56\u7565\u8cc7\u6599\uff0c\u4e26\u89c0\u5bdf\u7cfb\u7d71\u5728\u5be6\u969b\u904b\u4f5c\u6642\u7522\u751f\u7684\u5404\u7a2e\u7d71\u8a08\u8207\u8a08\u8cbb\u8cc7\u8a0a\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter6/#610","title":"6.10 \u672c\u7ae0\u5c0f\u7d50","text":"<p>\u672c\u7ae0\u7c21\u8981\u4ecb\u7d39\u4e86 AUSF\u3001CHF\u3001NEF\u3001NRF\u3001NSSF\u3001PCF\u3001UDM\u3001UDR \u4ee5\u53ca free5GC \u7684 Web Console\uff0c\u9019\u4e9b\u5143\u4ef6\u96d6\u7136\u4e0d\u50cf AMF/SMF/UPF \u90a3\u6a23\u76f4\u63a5\u53c3\u8207\u6bcf\u4e00\u689d\u8a0a\u865f\u8207\u8cc7\u6599\u8def\u5f91\uff0c\u4f46\u537b\u5206\u5225\u5728\u9451\u6b0a\u3001\u5b89\u5168\u3001\u7b56\u7565\u3001\u8a08\u8cbb\u3001\u5207\u7247\u9078\u64c7\u8207\u8cc7\u6599\u7ba1\u7406\u7b49\u9762\u5411\u626e\u6f14\u95dc\u9375\u89d2\u8272\u3002\u7406\u89e3\u5b83\u5011\u7684\u8077\u8cac\u8207\u4e92\u52d5\u95dc\u4fc2\uff0c\u6709\u52a9\u65bc\u4f60\u5728\u5f8c\u7e8c\u95b1\u8b80\u7a0b\u5f0f\u78bc\u6216\u8a2d\u8a08\u5be6\u9a57\u62d3\u6a38\u6642\uff0c\u4e0d\u6703\u53ea\u770b\u5230\u300c\u5e7e\u500b\u4e3b\u8981 NF\u300d\uff0c\u800c\u80fd\u628a\u6574\u500b 5GC \u7576\u6210\u4e00\u500b\u5b8c\u6574\u4e14\u53ef\u64f4\u5c55\u7684\u7cfb\u7d71\u4f86\u601d\u8003\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter7/","title":"\u7b2c 7 \u7ae0\uff1a\u975e 3GPP \u63a5\u5165","text":"<p>\u5728 5G \u6838\u5fc3\u7db2\u8def\u7684\u7cfb\u7d71\u4e2d\uff0c\u9664\u4e86\u4e00\u822c\u7684 3GPP \u63a5\u5165\u4ee5\u5916\uff0c\u70ba\u4e86\u7d50\u5408\u73fe\u6709\u7684\u5e38\u898b\u7db2\u8def\u67b6\u69cb\uff0c\u898f\u683c\u66f8\u4e2d\u9084\u7279\u5225\u5b9a\u7fa9\u4e86\u975e 3GPP \u63a5\u5165\u7684\u529f\u80fd\uff0c\u7c21\u55ae\u4f86\u8aaa\u5c31\u662f\u53ef\u4ee5\u900f\u904e WiFi \u7684\u65b9\u5f0f\u63a5\u5165 5G \u6838\u5fc3\u7db2\u8def\u3002</p> <p>\u5728 3GPP \u4e2d\u53c8\u5c07 WiFi \u7684\u63a5\u5165\u529f\u80fd\u5206\u70ba\u53ef\u4fe1\u4efb\uff08TNGF\uff09\u8207\u4e0d\u53ef\u4fe1\u4efb\uff08N3IWF\uff09\u5169\u7a2e\uff08\u5982\u4e0b\u5716\u6240\u793a\uff09\uff0c\u63a5\u4e0b\u4f86\u6211\u5011\u5c07\u5206\u5225\u4ecb\u7d39\u9019\u5169\u7a2e\u7684\u63a5\u5165\u65b9\u5f0f\u8207\u529f\u80fd\u3002\u5be6\u52d9\u4e0a\uff0c\u9019\u5169\u7a2e\u63a5\u5165\u90fd\u6703\u5728 UE \u8207 5GC \u4e4b\u9593\u518d\u52a0\u4e0a\u4e00\u5c64 \u975e 3GPP Access Network\uff08AN\uff0c\u4f8b\u5982 Wi\u2011Fi AP + \u532f\u805a\u4ea4\u63db\u5668/IP \u7db2\u8def\uff09+ TNGF / N3IWF \u7684\u7d44\u5408\uff0c\u4f60\u53ef\u4ee5\u628a\u9019\u500b\u7d44\u5408\u8996\u70ba\u300c\u5c0d 5GC \u4f86\u8aaa\u7684\u53e6\u4e00\u7a2e RAN\u300d\u3002</p> <p></p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter7/#71-tngf","title":"7.1 TNGF","text":"<p>TNGF\uff08Trusted Non-3GPP Gateway Function\uff09\u9867\u540d\u601d\u7fa9\uff0c\u662f\u91dd\u5c0d\u300c\u53ef\u4fe1\u4efb\u7684\u975e 3GPP \u7db2\u8def\u300d\u6240\u8a2d\u8a08\u7684\u63a5\u5165\u9598\u9053\u3002\u9019\u985e\u7db2\u8def\u901a\u5e38\u662f\u7531\u540c\u4e00\u500b\u71df\u904b\u5546\u3001\u6216\u662f\u8207\u71df\u904b\u5546\u6709\u7dca\u5bc6\u5408\u4f5c\u95dc\u4fc2\u7684\u696d\u8005\u6240\u5efa\u7f6e\u8207\u7ba1\u7406\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u96fb\u4fe1\u5546\u81ea\u5efa\u7684 Wi-Fi \u71b1\u9ede\uff08Hotspot\uff09</li> <li>\u4f01\u696d\u8207\u96fb\u4fe1\u5546\u5171\u540c\u898f\u5283\u7684\u5c08\u7db2 Wi-Fi</li> </ul> <p>\u5728\u9019\u7a2e\u60c5\u5883\u4e0b\uff0c\u71df\u904b\u5546\u53ef\u4ee5\u4fe1\u4efb Wi-Fi \u7db2\u8def\u672c\u8eab\u7684\u90e8\u7f72\u8207\u7ba1\u7406\uff0c\u56e0\u6b64\u5728\u5b89\u5168\u67b6\u69cb\u4e0a\u53ef\u4ee5\u76f8\u5c0d\u7c21\u5316\uff0c\u5c07\u300c\u975e 3GPP AN + TNGF\u300d\u9019\u500b\u7d44\u5408\u8996\u70ba\u985e\u4f3c 3GPP RAN \u7684\u4e00\u7a2e\u5ef6\u4f38\uff0c\u900f\u904e TNGF \u628a\u975e 3GPP \u63a5\u5165\u6574\u5408\u9032 5GC\u3002</p> <p>\u5f9e\u529f\u80fd\u89d2\u5ea6\u4f86\u770b\uff0cTNGF \u4e3b\u8981\u8ca0\u8cac\uff1a</p> <ul> <li>\u5728 UE \u8207 5GC \u4e4b\u9593\uff0c\u5efa\u7acb\u4e26\u7dad\u8b77\u900f\u904e\u975e 3GPP \u7db2\u8def\u7684\u4f7f\u7528\u8005\u9762\u8207\u63a7\u5236\u9762\u901a\u9053</li> <li>\u8207 5GC\uff08\u7279\u5225\u662f AMF/SMF\uff09\u5354\u8abf UE \u7684\u8a3b\u518a\u3001PDU \u6703\u8a71\u5efa\u7acb\u8207\u7ba1\u7406</li> <li>\u5728\u9700\u8981\u6642\uff0c\u8ca0\u8cac\u8207 Wi-Fi \u7aef\u7684 AAA / \u8a8d\u8b49\u7cfb\u7d71\u914d\u5408\uff0c\u5b8c\u6210 UE \u7684\u63a5\u5165\u9a57\u8b49</li> </ul> <p>\u5728\u300c\u53ef\u4fe1\u4efb\u300d\u7684\u524d\u63d0\u4e0b\uff0cTNGF \u76f8\u95dc\u7684\u5b89\u5168\u8a2d\u8a08\u901a\u5e38\u6709\u5e7e\u500b\u91cd\u9ede\uff1a</p> <ul> <li>\u63a5\u5165\u5c64\u4fdd\u8b77\uff1a\u975e 3GPP AN \u7aef\u4ecd\u9700\u63a1\u7528\u4f01\u696d\u7d1a Wi\u2011Fi \u5b89\u5168\u6a5f\u5236\uff08\u5982 802.1X/Enterprise\u3001WPA2/WPA3\u2011Enterprise\uff09\uff0c\u4e26\u8207\u71df\u904b\u5546\u7684 AAA/\u9451\u6b0a\u7cfb\u7d71\u4e32\u63a5\uff0c\u907f\u514d\u4efb\u610f\u7d42\u7aef\u76f4\u63a5\u9032\u5165\u63a5\u5165\u7db2\u3002</li> <li>\u7db2\u8def\u908a\u754c\u9632\u8b77\uff1aTNGF \u6240\u5728\u5340\u57df\u901a\u5e38\u6703\u8207\u5176\u4ed6 IT \u7db2\u8def\u505a\u660e\u78ba\u7db2\u6bb5\u8207\u9632\u706b\u7246\u5340\u9694\uff0c\u907f\u514d\u975e 3GPP AN \u88ab\u7576\u6210\u4e00\u822c\u5167\u7db2\u96a8\u610f\u9023\u901a\u3002</li> <li>\u8207 5GC \u7684\u4fe1\u4efb\u95dc\u4fc2\uff1aTNGF \u8207 5GC \u4e4b\u9593\u7684 SBI/N2/N3 \u9023\u7dda\uff0c\u4ecd\u9700\u4f9d\u7167\u4e00\u822c NF \u9593\u7684\u5b89\u5168\u8981\u6c42\u914d\u7f6e\u6191\u8b49\u8207 TLS/IPsec\uff0c\u78ba\u4fdd\u300c\u88ab\u4fe1\u4efb\u7684\u300d\u53ea\u662f\u4e00\u500b\u53d7\u63a7\u7684\u63a5\u5165\u7db2\uff0c\u800c\u4e0d\u662f\u653e\u68c4\u6838\u5fc3\u7db2\u908a\u754c\u7684\u4fdd\u8b77\u3002</li> </ul> <p>Tip</p> <p>\u7c21\u55ae\u4f86\u8aaa\uff0c\u7576 Wi-Fi \u7db2\u8def\u53ef\u4ee5\u88ab\u71df\u904b\u5546\u8996\u70ba\u300c\u81ea\u5df1\u7684\u5ef6\u4f38\u300d\u6642\uff0c\u5c31\u6703\u8d70 TNGF \u9019\u689d\u8def\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter7/#72-n3iwf","title":"7.2 N3IWF","text":"<p>N3IWF\uff08Non-3GPP InterWorking Function\uff09\u5247\u662f\u70ba\u4e86\u652f\u63f4\u300c\u4e0d\u53ef\u4fe1\u4efb\u7684\u975e 3GPP \u7db2\u8def\u300d\u800c\u8a2d\u8a08\uff0c\u6700\u5178\u578b\u7684\u4f8b\u5b50\u5c31\u662f \u516c\u5171 Wi-Fi \u6216\u5404\u7a2e\u4f7f\u7528\u8005\u81ea\u884c\u63a5\u5165\u7684\u7db2\u8def\uff08\u4f8b\u5982\u5bb6\u7528\u8def\u7531\u5668\u3001\u5496\u5561\u5e97\u71b1\u9ede\u7b49\uff09\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c5GC \u4e0d\u80fd\u4fe1\u4efb Wi-Fi \u7db2\u8def\u672c\u8eab\uff0c\u56e0\u6b64\u5fc5\u9808\uff1a</p> <ul> <li>\u5c07 UE \u8996\u70ba\u5f9e\u300c\u4e0d\u53ef\u4fe1\u4efb\u7684 IP \u7db2\u8def\u300d\u63a5\u5165</li> <li>\u900f\u904e IPsec / IKEv2 \u70ba UE \u8207 N3IWF \u4e4b\u9593\u5efa\u7acb\u52a0\u5bc6\u7684\u96a7\u9053</li> <li>\u518d\u900f\u904e\u9019\u689d\u5b89\u5168\u96a7\u9053\uff0c\u628a NAS \u8207\u4f7f\u7528\u8005\u9762\u7684\u6d41\u91cf\u5c0e\u5165 5GC</li> </ul> <p>\u6574\u9ad4\u6d41\u7a0b\u53ef\u4ee5\u7c21\u55ae\u60f3\u50cf\u6210\uff1a</p> <ol> <li>UE \u5148\u9023\u4e0a\u67d0\u500b Wi-Fi \u6216\u6709\u7dda IP \u7db2\u8def\uff0c\u53d6\u5f97 IP \u4f4d\u5740\uff08\u9019\u4e00\u6b65\u8207\u4e00\u822c\u4e0a\u7db2\u7121\u7570\uff09\u3002  </li> <li>UE \u555f\u52d5\u8207 N3IWF \u4e4b\u9593\u7684 IKEv2 / IPsec \u4ea4\u63e1\uff0c\u5efa\u7acb\u52a0\u5bc6\u901a\u9053\u3002  </li> <li>\u5728\u9019\u689d IPsec \u96a7\u9053\u88e1\uff0cUE \u8207 AMF \u4e4b\u9593\u958b\u59cb\u50b3\u905e NAS \u8a0a\u606f\uff0c\u7b49\u540c\u65bc\u300c\u900f\u904e\u975e 3GPP \u7db2\u8def\u9060\u7aef\u9023\u5165 5GC\u300d\u3002  </li> <li>\u5f8c\u7e8c\u7684\u8a3b\u518a\u3001PDU \u6703\u8a71\u5efa\u7acb\u8207\u4f7f\u7528\u8005\u9762\u5c01\u5305\uff0c\u90fd\u6703\u5728\u9019\u689d\u96a7\u9053\u5167\u88ab\u5c01\u88dd\u8207\u8f49\u9001\u3002</li> </ol> <p>\u5728 free5GC \u5c08\u6848\u4e2d\uff0cN3IWF \u6709\u5c0d\u61c9\u7684\u6a21\u7d44\u8207\u5be6\u4f5c\uff0c\u5e38\u88ab\u7528\u4f86\u793a\u7bc4\u300c\u900f\u904e Wi-Fi / Internet VPN \u7684\u65b9\u5f0f\uff0c\u628a UE \u9023\u5230 5GC\u300d\u7684\u5834\u666f\u3002\u5f9e 5GC \u7684\u8996\u89d2\u4f86\u770b\uff0c\u53ef\u4ee5\u628a\u300c\u975e 3GPP AN + N3IWF\u300d\u9019\u500b\u7d44\u5408\u62bd\u8c61\u6210\u53e6\u4e00\u7a2e RAN\uff0c\u53ea\u662f\u5b83\u662f\u5efa\u69cb\u5728 IPsec/VPN \u4e4b\u4e0a\u7684\u300c\u865b\u64ec RAN\u300d\u3002</p> <p>N3IWF \u7684\u5b89\u5168\u95dc\u9375\u5728\u65bc\u300c\u96d9\u5c64\u9632\u8b77\u300d\uff1a</p> <ul> <li>\u5916\u5c64 IPsec / IKEv2\uff1a\u900f\u904e\u6191\u8b49\u8207\u91d1\u9470\u5efa\u7acb UE \u8207 N3IWF \u4e4b\u9593\u7684\u52a0\u5bc6\u96a7\u9053\uff0c\u78ba\u4fdd\u5373\u4f7f Wi\u2011Fi \u6216\u4e2d\u9593 IP \u7db2\u8def\u5b8c\u5168\u4e0d\u53ef\u4fe1\uff0c\u653b\u64ca\u8005\u4e5f\u7121\u6cd5\u76f4\u63a5\u7aca\u807d\u6216\u7be1\u6539 5G \u8a0a\u865f\u8207\u4f7f\u7528\u8005\u9762\u6d41\u91cf\u3002</li> <li>\u5167\u5c64 5G\u2011AKA / EAP\u2011AKA' \u7b49\u6a5f\u5236\uff1a\u5728 IPsec \u96a7\u9053\u5167\uff0cUE \u4ecd\u9700\u900f\u904e 5G \u6838\u5fc3\u7db2\u7684\u9451\u6b0a\u7a0b\u5e8f\u5411 AUSF/UDM \u8b49\u660e\u8eab\u5206\uff0c\u9019\u4e00\u5c64\u6c7a\u5b9a\u300c\u4f60\u662f\u8ab0\u3001\u80fd\u4e0d\u80fd\u7528\u9019\u5f35\u7db2\u300d\u3002</li> <li>\u5728\u5be6\u4f5c\u8207\u5be6\u9a57\u6642\uff0c\u96d6\u7136\u53ef\u4ee5\u7528\u81ea\u7c3d\u6191\u8b49\u8207\u7c21\u5316\u914d\u7f6e\u65b9\u4fbf\u6e2c\u8a66\uff0c\u4f46\u5728\u63a5\u8fd1\u5be6\u52d9\u7684\u74b0\u5883\u4e2d\uff0c\u4ecd\u5efa\u8b70\u4f7f\u7528\u6b63\u5f0f\u7684 PKI\u3001\u56b4\u683c\u7ba1\u7406 N3IWF \u6191\u8b49\u8207\u91d1\u9470\uff0c\u907f\u514d N3IWF \u672c\u8eab\u8b8a\u6210\u653b\u64ca\u8005\u7684\u5165\u53e3\u3002</li> </ul> <p>Tip</p> <p>\u82e5\u4f60\u719f\u6089\u50b3\u7d71\u7684 VPN \u67b6\u69cb\uff0c\u53ef\u4ee5\u628a N3IWF \u60f3\u50cf\u6210\u300c\u5c08\u9580\u70ba 5G UE \u6e96\u5099\u7684 VPN Gateway\u300d\uff0c\u53ea\u4e0d\u904e\u96a7\u9053\u88e1\u8dd1\u7684\u4e0d\u662f\u4e00\u822c\u4f01\u696d\u6d41\u91cf\uff0c\u800c\u662f 5G \u7684 NAS \u8207\u4f7f\u7528\u8005\u9762\u6d41\u91cf\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter7/#73-atsss","title":"7.3 ATSSS","text":"<p>ATSSS\uff08Access Traffic Steering, Switching and Splitting\uff09\u662f 5G \u70ba\u4e86\u652f\u63f4\u300c\u591a\u63a5\u53d6\u8def\u5f91\u4e0b\u7684\u667a\u6167\u6d41\u91cf\u63a7\u5236\u300d\u800c\u63d0\u51fa\u7684\u6a5f\u5236\u3002\u7c21\u55ae\u4f86\u8aaa\uff0c\u5c31\u662f\u8b93\u540c\u4e00\u652f UE \u53ef\u4ee5\u540c\u6642\u900f\u904e 3GPP \u63a5\u5165\uff08\u4f8b\u5982 5G NR\uff09\u8207\u975e 3GPP \u63a5\u5165\uff08\u4f8b\u5982 Wi-Fi/N3IWF\uff09\uff0c\u4e26\u7531\u6838\u5fc3\u7db2\u8207 UE \u5171\u540c\u6c7a\u5b9a\uff1a</p> <ul> <li>\u67d0\u689d\u6d41\u91cf\u61c9\u8a72\u8d70\u54ea\u4e00\u689d\u8def\u5f91\uff08Steering\uff09</li> <li>\u5728\u67d0\u689d\u8def\u5f91\u54c1\u8cea\u8b8a\u5dee\u6642\u662f\u5426\u8981\u5207\u63db\u5230\u53e6\u4e00\u689d\uff08Switching\uff09</li> <li>\u6216\u8005\u540c\u6642\u4f7f\u7528\u591a\u689d\u8def\u5f91\u5206\u6d41\u50b3\u9001\uff08Splitting\uff09</li> </ul> <p>\u5f9e\u67b6\u69cb\u89d2\u5ea6\u4f86\u770b\uff0cATSSS \u6d89\u53ca\uff1a</p> <ul> <li>\u5728 UE \u7aef\u7684\u591a\u901a\u9053\u652f\u63f4\u8207\u6d41\u91cf\u5206\u985e\uff08\u901a\u5e38\u9700\u8981\u7279\u5b9a\u7684 UE \u5806\u758a\u914d\u5408\uff09</li> <li>\u5728 5GC \u4e2d\u7531 SMF/UPF\u3001PCF \u5354\u540c\u6c7a\u5b9a\u8def\u5f91\u8207\u7b56\u7565\uff08\u4f8b\u5982\u6839\u64da\u61c9\u7528\u985e\u578b\u3001QoS\u3001\u7576\u524d\u8def\u6cc1\u9078\u64c7 3GPP\u3001\u975e 3GPP \u6216\u5169\u8005\u540c\u6642\uff09</li> </ul> <p>free5GC \u5728\u904e\u53bb\u5e7e\u5e74\u7684\u793e\u7fa4\u5be6\u9a57\u4e2d\uff0c\u4e5f\u66fe\u7d93\u5c55\u793a\u904e\u300cN3IWF + 3GPP \u7684\u96d9\u9023\u7dda ATSSS \u7bc4\u4f8b\u300d\uff1a UE \u4e00\u65b9\u9762\u900f\u904e 5G NR \u9023\u4e0a gNB\uff0c\u53e6\u4e00\u65b9\u9762\u900f\u904e Wi-Fi \u8207 N3IWF \u5efa\u7acb IPsec \u96a7\u9053\uff0c\u5169\u689d\u8def\u5f91\u6700\u5f8c\u90fd\u532f\u805a\u5230\u540c\u4e00\u500b 5GC/UPF\uff0c\u7531\u6838\u5fc3\u7db2\u4f9d\u64da\u7b56\u7565\u5c07\u90e8\u5206\u6d41\u91cf\u5c0e\u5411 3GPP\uff0c\u90e8\u5206\u6d41\u91cf\u5c0e\u5411\u975e 3GPP\uff0c\u6216\u5728\u5169\u8005\u4e4b\u9593\u9032\u884c\u5206\u6d41\u3002\u9019\u6a23\u7684\u7d44\u5408\u63d0\u4f9b\u4e86\u4e00\u500b\u5f88\u597d\u7684\u5be6\u9a57\u5e73\u53f0\uff0c\u8b93\u4f60\u5be6\u969b\u9ad4\u9a57\u300c\u591a\u63a5\u53d6\u3001\u591a\u8def\u5f91\u300d\u5728 5G \u6838\u5fc3\u7db2\u4e2d\u7684\u904b\u4f5c\u65b9\u5f0f\u3002</p>"},{"location":"doc-5g-core-book/zh/part2-free5gc/chapter7/#74","title":"7.4 \u672c\u7ae0\u5c0f\u7d50","text":"<p>\u672c\u7ae0\u7c21\u8981\u4ecb\u7d39\u4e86 5G \u6838\u5fc3\u7db2\u8def\u652f\u63f4\u7684\u300c\u975e 3GPP \u63a5\u5165\u300d\u8207\u591a\u63a5\u53d6\u6d41\u91cf\u63a7\u5236\u6a5f\u5236\uff1aTNGF \u8207 N3IWF \u5206\u5225\u5c0d\u61c9\u53ef\u4fe1\u4efb\u8207\u4e0d\u53ef\u4fe1\u4efb\u7684 Wi-Fi / IP \u7db2\u8def\u63a5\u5165\uff0c\u800c ATSSS \u5247\u9032\u4e00\u6b65\u5728 3GPP \u8207\u975e 3GPP \u4e4b\u9593\u505a\u6d41\u91cf\u7684\u5c0e\u5411\u3001\u5207\u63db\u8207\u5206\u6d41\u3002\u7406\u89e3\u9019\u4e9b\u6a5f\u5236\uff0c\u6709\u52a9\u65bc\u4f60\u5728\u8a2d\u8a08\u6216\u5be6\u9a57 5G \u7db2\u8def\u6642\uff0c\u601d\u8003\u300c\u9664\u4e86 3GPP RAN \u4e4b\u5916\uff0c\u9084\u6709\u54ea\u4e9b\u8def\u5f91\u53ef\u4ee5\u628a\u88dd\u7f6e\u5b89\u5168\u4e14\u5f48\u6027\u5730\u5e36\u9032 5GC\u300d\uff0c\u4ee5\u53ca\u5982\u4f55\u5584\u7528\u591a\u689d\u8def\u5f91\u4f86\u63d0\u5347\u9ad4\u9a57\u8207\u53ef\u9760\u5ea6\u3002</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/","title":"\u7b2c 8 \u7ae0\uff1afree5GC \u90e8\u7f72\u5be6\u6230","text":"<p>free5GC \u7684\u5b98\u65b9\u7db2\u7ad9 \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u90e8\u7f72\u6559\u5b78\uff0c\u9019\u908a\u6703\u91dd\u5c0d\u5be6\u9ad4\u6a5f\uff08\u5305\u542b VM\uff09\u90e8\u7f72\u4ee5\u53ca Docker \u5bb9\u5668\u865b\u64ec\u5316\u90e8\u7f72\u65b9\u5f0f\u505a\u8b1b\u89e3\uff0c\u5e0c\u671b\u900f\u904e\u89e3\u8aaa\u5982\u4f55\u8a2d\u5b9a NF \u7684\u8a2d\u5b9a\u6a94\u4ee5\u53ca\u6b63\u78ba\u7684\u7de8\u8b6f\u65b9\u5f0f\u8b93\u8b80\u8005\u4e0d\u53ea\u5b78\u6703\u55ae\u7d14\u7684\u90e8\u7f72\uff0c\u9032\u4e00\u6b65\u4e86\u89e3\u8a2d\u5b9a\u9019\u4e9b\u503c\u7684\u539f\u56e0\uff0c\u4f7f\u5f97\u672a\u4f86\u518d\u4f7f\u7528 free5GC \u505a\u76f8\u95dc\u7814\u7a76\u6642\u53ef\u4ee5\u66f4\u8f15\u9b06\u7684\u8abf\u6574\u90e8\u7f72\u65b9\u5f0f\u3002</p> <p>Note</p> <p>\u672c\u66f8\u9810\u8a2d\u74b0\u5883\u7686\u70ba Ubuntu 24.04</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#81-gtp5g","title":"8.1 GTP5G \u6838\u5fc3\u6a21\u7d44\u5b89\u88dd","text":""},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#811-gtp5g","title":"8.1.1 GTP5G \u5b89\u88dd","text":"<p>gtp5g \u7684 Linux \u6838\u5fc3\u6a21\u7d44\u662f free5GC \u90e8\u7f72\u4e2d\u975e\u5e38\u95dc\u9375\u7684\u4e00\u500b\u74b0\u7bc0\u3002\u7121\u8ad6\u662f\u4f7f\u7528\u5be6\u9ad4\u6a5f\uff08\u5305\u542b VM\uff09\u90e8\u7f72\u3001\u4ee5 Docker \u65b9\u5f0f\u555f\u52d5 UPF\uff0c\u751a\u81f3\u672a\u4f86\u63a1\u7528\u66f4\u9032\u968e\u7684 K8s \u67b6\u69cb\uff0c\u6211\u5011\u90fd\u5fc5\u9808\u5148\u5728\u5be6\u969b\u627f\u8f09 UPF \u6d41\u91cf\u7684\u4e3b\u6a5f\u4e0a\u5b89\u88dd gtp5g\uff08\u5305\u542b\u904b\u884c UPF \u5bb9\u5668\u7684\u5bbf\u4e3b\u6a5f\uff09\u3002</p> <p>\u539f\u56e0\u5728\u65bc\uff1agtp5g \u662f\u4e00\u500b\u5b89\u88dd\u5728 Linux kernel \u5167\u7684\u6a21\u7d44\uff0cUPF \u672c\u8eab\u4e26\u4e0d\u76f4\u63a5\u8655\u7406\u6240\u6709 GTP-U \u5c01\u5305\uff0c\u800c\u662f\u900f\u904e\u547c\u53eb\u9019\u500b\u6838\u5fc3\u6a21\u7d44\u4f86\u5b8c\u6210\u5c01\u5305\u7684\u5c01\u88dd\u3001\u89e3\u5c01\u8207\u8f49\u9001\u3002</p> <ol> <li> <p>\u5b89\u88dd\u76f8\u95dc\u5305</p> <pre><code>sudo apt -y update\nsudo apt -y install git gcc g++ cmake autoconf libtool pkg-config libmnl-dev libyaml-dev\n</code></pre> </li> <li> <p>\u5b89\u88dd GTP5G</p> <pre><code>git clone -b v0.9.14 https://github.com/free5gc/gtp5g.git\ncd gtp5g\nmake\nsudo make install\n</code></pre> </li> </ol>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#812","title":"8.1.2 \u5c01\u5305\u8f49\u9001","text":"<p>\u6709\u9451\u65bc\u6211\u5011\u6703\u9700\u8981\u6838\u5fc3\u6a21\u7d44\u76f4\u63a5\u5e6b\u6211\u5011\u8f49\u9001\u8cc7\u6599\u5e73\u9762\u7684\u5c01\u5305\uff0c\u56e0\u6b64\u6211\u5011\u9700\u8981\u5728\u904b\u884c UPF \u7684\u4e3b\u6a5f\u4e0a\u958b\u555f IP Forward \u7684\u529f\u80fd\u3002</p> <ol> <li> <p>\u95dc\u9589\u9632\u706b\u7246</p> <pre><code>sudo systemctl stop ufw\nsudo systemctl disable ufw\n</code></pre> </li> <li> <p>\u958b\u555f\u8f49\u9001\u529f\u80fd</p> <p>\u9019\u908a\u9700\u8981\u6ce8\u610f\u7b2c\u4e8c\u500b\u6307\u4ee4\u7684<code>dn_interface</code>\u6b04\u4f4d\u9700\u8981\u66ff\u63db\u6210\u4e3b\u6a5f\u5c0d\u5916\u7db2\u5361\u7684\u540d\u7a31</p> <pre><code>sudo sysctl -w net.ipv4.ip_forward=1\nsudo iptables -t nat -A POSTROUTING -o &lt;dn_interface&gt; -j MASQUERADE\nsudo iptables -A FORWARD -p tcp -m tcp --tcp-flags SYN,RST SYN -j TCPMSS --set-mss 1400\n</code></pre> </li> </ol>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#82-vm","title":"8.2 \u5be6\u9ad4\u6a5f\u90e8\u7f72\uff08\u5305\u542b VM \u90e8\u7f72\uff09","text":""},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#821-go","title":"8.2.1 \u5b89\u88dd Go \u8a9e\u8a00","text":"<p>Note</p> <p>\u76ee\u524d free5GC \u5b98\u65b9\u4f7f\u7528\u7684 Go \u7248\u672c\u662f 1.25.5</p> <ol> <li> <p>\u5b89\u88dd Go</p> <pre><code>wget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nmkdir -p ~/go/{bin,pkg,src}\n# The following assume that your shell is bash:\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export GOROOT=/usr/local/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' &gt;&gt; ~/.bashrc\necho 'export GO111MODULE=auto' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> </li> <li> <p>\u78ba\u8a8d\u5b89\u88dd</p> <pre><code>go version\n</code></pre> <p>\u5982\u679c\u53ef\u4ee5\u770b\u5230\u7248\u672c\u865f\uff0c\u5c31\u4ee3\u8868\u5b89\u88dd\u6210\u529f\u4e86\uff01</p> </li> </ol>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#822-free5gc","title":"8.2.2 \u53d6\u5f97\u4e26\u7de8\u8b6f free5GC \u6e90\u78bc","text":"<ol> <li> <p>\u5f9e Github \u53d6\u5f97\u5b98\u65b9\u6e90\u78bc</p> <pre><code>git clone -j `nproc` --recursive https://github.com/free5gc/free5gc\n</code></pre> <p>Note</p> <p>-j <code>nproc</code> \u7684\u53c3\u6578\u662f\u5e0c\u671b\u4f7f\u7528\u5e73\u884c\u52a0\u901f\u7684\u65b9\u5f0f\u4e0b\u8f09\uff01</p> <p>--recursive \u7684\u53c3\u6578\u662f\u7528\u4f86\u4e0b\u8f09\u9664\u4e86 free5GC \u9019\u500b\u5c08\u6848\u5305\u88e1\u9762\u7684\u7a0b\u5f0f\u55ce\u4ee5\u5916\uff0c\u5176\u4ed6\u4e00\u5b50\u6a21\u7d44\u65b9\u5f0f\u5b58\u5728\u7684 NF \u5305</p> </li> <li> <p>\u7de8\u8b6f</p> <pre><code>cd free5gc\nmake\n</code></pre> </li> <li> <p>\u4fee\u6539\u8a2d\u5b9a\u6a94</p> <p>\u5728\u5c07 free5GC \u8dd1\u8d77\u4f86\u4e4b\u524d\uff0c\u6211\u5011\u6709\u4e09\u500b NF \u7684\u8a2d\u5b9a\u6a94\u9700\u8981\u505a\u4fee\u6539\uff0c\u5206\u5225\u662f\uff1aAMF\u3001SMF\u3001UPF\uff0c\u4fee\u6539\u7684\u76ee\u7684\u662f\u8b93\u8dd1\u8d77\u4f86\u7684\u6838\u5fc3\u7db2\u8def\u53ef\u4ee5\u88ab\u5916\u9762\u7684 gNB \u9023\u4e0a\u3002</p> <ul> <li> <p>AMF\uff08~/free5gc/config/amfcfg.yaml\uff09</p> <p>\u5c07 <code>ngapIpList</code> \u63db\u6210\u90e8\u7f72\u6a5f\u5668\u7684\u5c0d\u5916\u7db2\u5361 IP\uff0c\u76ee\u7684\u662f\u8981\u8b93 gNB \u53ef\u4ee5\u900f\u904e\u9019\u500b IP \u5c0d AMF \u505a\u9023\u7dda\u3002</p> <pre><code>ngapIpList:\n  - &lt;your export IP&gt;\n</code></pre> </li> <li> <p>SMF\uff08~/free5gc/config/smfcfg.yaml\uff09</p> <p>\u5c07 <code>interfaces</code> \u4e2d\u70ba N3 \u7684\u7aef\u9ede IP \u63db\u6210 UPF \u958b\u7d66 gNB \u8cc7\u6599\u5e73\u9762\u7684\u7db2\u5361 IP\uff0c\u4f7f\u5f97 SMF \u53ef\u4ee5\u544a\u77e5 gNB \u8981\u5c0d\u54ea\u500b IP \u505a\u8cc7\u6599\u5e73\u9762\u7684\u9023\u7dda\u3002</p> <pre><code>interfaces:\n  - interfaceType: N3\n    endpoints:\n      - &lt;your export IP&gt;\n</code></pre> </li> <li> <p>UPF\uff08~/free5gc/config/upfcfg.yaml\uff09</p> <p>\u5c07 <code>gtpu</code> \u4e2d\u7684 <code>ifList</code> \u63db\u6210 UPF \u5c0d\u5916\u7db2\u5361\u7684 IP\uff0c\u4f7f gNB \u53ef\u4ee5\u900f\u904e\u9019\u500b IP \u8207 UPF \u505a\u9023\u7dda\u3002</p> <pre><code>gtpu:\n  forwarder: gtp5g\n  ifList:\n    - addr: &lt;your export IP&gt;\n</code></pre> </li> </ul> </li> <li> <p>\u57f7\u884c</p> <p>\u5b8c\u6210\u8a2d\u5b9a\u6a94\u7684\u4fee\u6539\u5f8c\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u5728 free5GC \u5c08\u6848\u4e0b\u7684\u57f7\u884c\u8173\u672c\u4f86\u4e00\u9375\u555f\u52d5\u6574\u500b\u6838\u7db2\u3002</p> <pre><code>cd free5gc\n./run.sh\n</code></pre> <p>\u5728\u8dd1\u8d77\u4f86\u4e4b\u5f8c\u6703\u770b\u5230\u5f88\u591a\u7684\u65e5\u8a8c\u8a18\u9304\uff0c\u5982\u679c\u6c92\u6709\u770b\u5230 ERROR \u7684\u8a18\u9304\uff0c\u5c31\u4ee3\u8868\u6210\u529f\u555f\u52d5\u4e86\u4e00\u500b\u6838\u5fc3\u7db2\u8def\uff01</p> </li> </ol>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#83-docker","title":"8.3 Docker \u5bb9\u5668\u865b\u64ec\u5316\u90e8\u7f72","text":"<p>free5GC \u9664\u4e86\u5be6\u9ad4\u57f7\u884c\u4ee5\u5916\uff0c\u4ea6\u63d0\u4f9b\u4e86 Docker \u7684 Compose \u6a94\u6848\u8b93\u4f7f\u7528\u8005\u53ef\u4ee5\u5feb\u901f\u57f7\u884c\u6838\u7db2\uff0c\u540c\u6642\u53c8\u5206\u70ba\u5169\u7a2e\u60c5\u6cc1\uff1a\u4f7f\u7528\u5b98\u65b9\u93e1\u50cf\u3001\u81ea\u5df1\u672c\u5730\u5efa\u69cb\u93e1\u50cf\u3002</p> <p>Caution</p> <p>\u4f7f\u7528\u524d\u8acb\u900f\u904e Docker\u5b98\u7db2 \u5b89\u88dd Docker Engine</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#831","title":"8.3.1 \u4f7f\u7528\u5b98\u65b9\u93e1\u50cf","text":"<ol> <li> <p>\u53d6\u5f97 free5GC \u7684 Compose \u5c08\u6848</p> <pre><code>git clone https://github.com/free5gc/free5gc-compose\n</code></pre> </li> <li> <p>\u57f7\u884c Compose \u555f\u52d5</p> <pre><code>cd free5gc-compose\ndocker compose -f docker-compose.yaml up\n</code></pre> <p>\u7b49\u5f85\u93e1\u50cf\u62c9\u53d6\u5b8c\u6210\u5f8c\u5c31\u6703\u81ea\u52d5\u555f\u52d5\u6574\u500b\u6838\u7db2\uff0c\u6838\u7db2\u4e2d\u7684\u6bcf\u4e00 NF \u90fd\u6703\u662f\u7531\u4e00\u500b\u5bb9\u5668\u904b\u884c\u3002</p> </li> <li> <p>\u7d50\u675f Compose</p> <p>\u9019\u908a\u53ef\u4ee5\u76f4\u63a5\u6309 Ctrl+c\uff0c\u7136\u5f8c\u6703\u770b\u5230\u5bb9\u5668\u505c\u6b62\u7684\u756b\u9762\uff0c\u4f46\u4ecd\u7136\u9700\u8981\u4f7f\u7528 <code>down</code> \u6307\u4ee4\u5b8c\u5168\u95dc\u9589 Compose\u3002</p> <pre><code>docker compose -f docker-compose.yaml down\n</code></pre> </li> </ol>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#832","title":"8.3.2 \u672c\u5730\u81ea\u5efa\u93e1\u50cf","text":"<ol> <li> <p>\u53d6\u5f97 free5GC \u7684 Compose \u5c08\u6848</p> <pre><code>git clone https://github.com/free5gc/free5gc-compose\n</code></pre> </li> <li> <p>\u9032\u5165 <code>base</code> \u76ee\u9304\u5f8c\u53d6\u5f97\u60f3\u8981\u5efa\u69cb\u93e1\u50cf\u7684 free5GC \u6e90\u78bc</p> <pre><code>cd free5gc-compose/base\ngit clone -j `nproc` --recursice https://github.com/free5gc/free5gc\n</code></pre> </li> <li> <p>\u4f7f\u7528 <code>make</code> \u6307\u4ee4\u5efa\u69cb\u93e1\u50cf</p> <pre><code>cd free5gc-compose\nmake all\n</code></pre> </li> <li> <p>\u4f7f\u7528\u672c\u5730\u93e1\u50cf\u57f7\u884c Compose</p> <pre><code>cd free5gc-compose\ndocker compose -f docker-compose-build.yaml up\n</code></pre> </li> <li> <p>\u7d50\u675f Compose</p> <pre><code>docker compose -f docker-compose-build.yaml down\n</code></pre> </li> </ol>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter8/#84","title":"8.4 \u672c\u7ae0\u5c0f\u7d50","text":"<p>\u672c\u7ae0\u5f9e\u5be6\u4f5c\u89d2\u5ea6\u5e36\u8457\u8b80\u8005\u5b8c\u6210\u4e00\u6b21\u5b8c\u6574\u7684 free5GC \u90e8\u7f72\u6d41\u7a0b\u3002\u9996\u5148\uff0c\u6211\u5011\u8aaa\u660e\u4e86\u70ba\u4ec0\u9ebc\u5fc5\u9808\u5728\u5be6\u969b\u627f\u8f09 UPF \u6d41\u91cf\u7684\u4e3b\u6a5f\u4e0a\u5b89\u88dd gtp5g \u6838\u5fc3\u6a21\u7d44\uff0c\u4e26\u793a\u7bc4\u5982\u4f55\u555f\u7528 IP Forward \u8207\u57fa\u672c\u7684 NAT/MTU \u8a2d\u5b9a\uff0c\u8b93 UPF \u80fd\u5920\u6b63\u78ba\u8f49\u9001\u4f7f\u7528\u8005\u9762\u5c01\u5305\u3002\u63a5\u8457\uff0c\u6211\u5011\u4ecb\u7d39\u4e86\u5728\u5be6\u9ad4\u6a5f\uff08\u6216 VM\uff09\u74b0\u5883\u4e2d\u5b89\u88dd Go\u3001\u53d6\u5f97\u4e26\u7de8\u8b6f free5GC \u539f\u59cb\u78bc\uff0c\u4ee5\u53ca\u8abf\u6574 AMF/SMF/UPF \u8a2d\u5b9a\u6a94\u4e2d\u8207\u5916\u90e8 gNB \u9023\u7dda\u76f8\u95dc\u7684\u95dc\u9375\u6b04\u4f4d\uff0c\u6700\u5f8c\u900f\u904e <code>run.sh</code> \u4e00\u9375\u555f\u52d5\u6574\u500b\u6838\u5fc3\u7db2\u3002</p> <p>\u5728\u6b64\u57fa\u790e\u4e0a\uff0c\u672c\u7ae0\u4e5f\u793a\u7bc4\u4e86\u5982\u4f55\u4f7f\u7528 Docker Compose \u4ee5\u5b98\u65b9\u93e1\u50cf\u6216\u672c\u5730\u81ea\u884c\u5efa\u69cb\u7684\u93e1\u50cf\u555f\u52d5 free5GC\uff0c\u8b93\u8b80\u8005\u53ef\u4ee5\u4f9d\u7167\u81ea\u8eab\u9700\u6c42\u9078\u64c7\u300c\u88f8\u6a5f\u90e8\u7f72\u300d\u6216\u300c\u5bb9\u5668\u5316\u90e8\u7f72\u300d\u5169\u7a2e\u65b9\u5f0f\u3002\u638c\u63e1\u4e86\u9019\u4e9b\u6b65\u9a5f\u8207\u80cc\u5f8c\u7684\u539f\u56e0\u4e4b\u5f8c\uff0c\u4f60\u61c9\u8a72\u5df2\u7d93\u80fd\u5920\u5728\u81ea\u5df1\u7684\u5be6\u9a57\u74b0\u5883\u4e2d\u53cd\u8986\u91cd\u5efa\u8207\u8abf\u6574 free5GC\uff0c\u4f5c\u70ba\u5f8c\u7e8c\u9032\u4e00\u6b65\u7814\u7a76 RAN\u3001UE \u6216\u9032\u968e\u7db2\u8def\u5834\u666f\u7684\u57fa\u790e\u3002</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter9/","title":"\u7b2c 9 \u7ae0\uff1a\u591a\u7bc0\u9ede / \u591a UPF \u90e8\u7f72","text":"<p>\u5728\u524d\u4e00\u7ae0\u4e2d\uff0c\u6211\u5011\u5df2\u7d93\u5b8c\u6210\u4e86\u4e00\u5957\u300c\u6240\u6709 NF \u90fd\u653e\u5728\u540c\u4e00\u53f0\u6a5f\u5668\u300d\u7684\u57fa\u672c free5GC \u90e8\u7f72\u3002\u9019\u7a2e\u55ae\u7bc0\u9ede\u67b6\u69cb\u975e\u5e38\u9069\u5408\u6559\u5b78\u8207\u5c0f\u898f\u6a21\u5be6\u9a57\uff0c\u4f46\u5728\u5be6\u969b\u7db2\u8def\u8a2d\u8a08\u4e2d\uff0c5G \u7684\u4e00\u5927\u7279\u9ede\u5c31\u662f\u652f\u63f4\u63a7\u5236\u9762\u8207\u4f7f\u7528\u8005\u9762\u7684\u5206\u96e2\uff08CUPS\uff09\uff0c\u4ee5\u53ca\u591a UPF\u3001\u751a\u81f3\u5206\u5c64 UPF \u7684\u5f48\u6027\u90e8\u7f72\u80fd\u529b\u3002\u672c\u7ae0\u5c07\u5f9e\u6982\u5ff5\u51fa\u767c\uff0c\u8aaa\u660e\u591a\u7bc0\u9ede / \u591a UPF \u7684\u67b6\u69cb\u8207 ULCL\uff08Uplink Classifier\uff09 \u7684\u89d2\u8272\uff0c\u6700\u5f8c\u518d\u7c21\u55ae\u5e36\u5230\u5728 free5GC \u4e2d\u5982\u4f55\u5be6\u4f5c\u9019\u6a23\u7684\u90e8\u7f72\u3002</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter9/#91-upf","title":"9.1 \u70ba\u4ec0\u9ebc\u9700\u8981\u591a UPF \u90e8\u7f72\uff1f","text":"<p>\u5728 5GC \u7684\u8a2d\u8a08\u4e2d\uff0c\u63a7\u5236\u9762 NF\uff08\u4f8b\u5982 AMF\u3001SMF\u3001PCF \u7b49\uff09\u548c\u4f7f\u7528\u8005\u9762 NF\uff08UPF\uff09\u662f\u523b\u610f\u5206\u96e2\u7684\uff0c\u9019\u8b93\u71df\u904b\u5546\u53ef\u4ee5\u4f9d\u7167\u4e0d\u540c\u9700\u6c42\u8207\u5834\u666f\uff0c\u9748\u6d3b\u6c7a\u5b9a UPF \u7684\u6578\u91cf\u8207\u4f4d\u7f6e\u3002\u4f8b\u5982\uff1a</p> <ul> <li>\u6d41\u91cf\u5c31\u8fd1\u5206\u6d41\uff1a\u5728\u4e0d\u540c\u5730\u7406\u5340\u57df\u5404\u81ea\u653e\u4e00\u500b\u6216\u591a\u500b UPF\uff0c\u8b93\u7576\u5730 UE \u7684\u6d41\u91cf\u5728\u672c\u5730\u5c31\u80fd\u300c\u4e0b\u8eca\u300d\uff0c\u6e1b\u5c11\u56de\u7a0b\u5ef6\u9072\u3002</li> <li>\u908a\u7de3\u8a08\u7b97\uff08MEC\uff09\uff1a\u5728\u908a\u7de3\u7bc0\u9ede\u90e8\u7f72 UPF\uff0c\u76f4\u63a5\u628a\u90e8\u5206\u6d41\u91cf\u5c0e\u5411\u908a\u7de3\u61c9\u7528\u4f3a\u670d\u5668\uff0c\u800c\u4e0d\u662f\u5168\u90e8\u56de\u5230\u6838\u5fc3\u8cc7\u6599\u4e2d\u5fc3\u3002</li> <li>\u591a\u79df\u6236\u6216\u591a\u670d\u52d9\u5206\u9694\uff1a\u70ba\u4e0d\u540c\u4f01\u696d\u5c08\u7db2\u3001\u4e0d\u540c\u696d\u52d9\u985e\u578b\uff08\u4f8b\u5982\u8996\u8a0a\u3001IoT\uff09\u914d\u7f6e\u4e0d\u540c\u7684 UPF\uff0c\u642d\u914d\u5207\u7247\u8207\u7b56\u7565\u505a\u66f4\u7cbe\u7d30\u7684\u6d41\u91cf\u63a7\u5236\u3002</li> </ul> <p>\u8981\u9054\u5230\u9019\u4e9b\u76ee\u6a19\uff0c5G \u5728 UPF \u67b6\u69cb\u4e0a\u5f15\u5165\u4e86\u300c\u591a\u7bc0\u9ede\u3001\u591a\u5c64\u7d1a\u300d\u7684\u6982\u5ff5\uff0c\u5176\u4e2d\u4e00\u500b\u95dc\u9375\u5143\u4ef6\u5c31\u662f ULCL\uff08Uplink Classifier\uff09\u3002</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter9/#92-ulcluplink-classifier","title":"9.2 \u4ec0\u9ebc\u662f ULCL\uff08Uplink Classifier\uff09\uff1f","text":"<p>ULCL \u53ef\u4ee5\u88ab\u8996\u70ba\u4e00\u7a2e\u300c\u5177\u5099\u5206\u6d41\u80fd\u529b\u7684 UPF \u7bc0\u9ede\u300d\uff0c\u5b83\u7684\u4e3b\u8981\u4efb\u52d9\u662f\u5728\u4e0a\u884c\u65b9\u5411\uff08UE \u2192 \u7db2\u8def\uff09\u6839\u64da\u7279\u5b9a\u898f\u5247\uff0c\u628a\u6d41\u91cf\u5206\u914d\u5230\u4e0d\u540c\u7684\u4e0b\u6e38 UPF \u6216\u8cc7\u6599\u7db2\u8def\u3002\u5f9e\u529f\u80fd\u4e0a\u770b\uff0c\u5b83\u4ecd\u7136\u662f UPF \u7684\u4e00\u7a2e\uff0c\u4f46\u5728\u62d3\u6a38\u4f4d\u7f6e\u8207\u898f\u5247\u8a2d\u8a08\u4e0a\uff0c\u626e\u6f14\u7684\u662f\u300c\u532f\u5165\u9ede\u8207\u5206\u6d41\u5668\u300d\u7684\u89d2\u8272\u3002</p> <p>\u5f9e 3GPP \u7684\u89d2\u5ea6\u4f86\u770b\uff0cULCL \u5177\u5099\u4ee5\u4e0b\u5e7e\u500b\u7279\u5fb5\uff1a</p> <ul> <li>\u4f4d\u65bc\u4e0a\u6e38\u3001\u9760\u8fd1 RAN \u6216\u63a5\u5165\u7db2\u7684\u4e00\u5074\uff1a\u901a\u5e38\u6703\u63a5\u5728 gNB \u6216 N3IWF \u7684\u4e0b\u6e38\uff0c\u4f5c\u70ba UE \u4e0a\u884c\u6d41\u91cf\u9032\u5165 5GC \u7684\u7b2c\u4e00\u500b UPF\u3002</li> <li>\u6839\u64da 5\u2011tuple\u3001DNN\u3001S-NSSAI \u6216\u5176\u4ed6\u6b04\u4f4d\u505a\u5206\u985e\uff1a\u900f\u904e PDR\uff08Packet Detection Rule\uff09\u8207\u76f8\u95dc\u898f\u5247\uff0c\u5224\u65b7\u67d0\u500b\u5c01\u5305\u61c9\u8a72\u88ab\u9001\u5f80\u54ea\u4e00\u500b\u4e0b\u6e38 UPF\u3002</li> <li>\u53ef\u4ee5\u540c\u6642\u9023\u5230\u591a\u500b\u4e0b\u6e38 UPF\uff1a\u4f8b\u5982\u4e00\u689d\u8def\u5f91\u5f80\u300c\u4e00\u822c Internet\u300d\uff0c\u53e6\u4e00\u689d\u8def\u5f91\u5f80\u300c\u4f01\u696d\u5c08\u7db2\u300d\u6216\u300c\u908a\u7de3\u61c9\u7528\u300d\u3002</li> </ul> <p>\u5982\u679c\u7528\u4e00\u500b\u751f\u6d3b\u5316\u7684\u6bd4\u55bb\uff0cULCL \u6709\u9ede\u50cf\u662f\u300c\u9ad8\u901f\u516c\u8def\u4ea4\u6d41\u9053\u524d\u7684\u532f\u6d41\u7ad9\u300d\uff1a\u6240\u6709\u8eca\u5b50\uff08\u4e0a\u884c\u5c01\u5305\uff09\u5148\u4f86\u5230\u9019\u88e1\uff0c\u518d\u6839\u64da\u76ee\u7684\u5730\u8207\u8eca\u7a2e\uff0c\u88ab\u5c0e\u5411\u4e0d\u540c\u7684\u9ad8\u901f\u516c\u8def\u51fa\u53e3\u3002</p> <p>\u5728 free5GC \u7684\u5be6\u52d9\u90e8\u7f72\u4e2d\uff0cULCL \u4e5f\u5e38\u88ab\u7528\u4f86\u5be6\u4f5c\uff1a</p> <ul> <li>\u5c07\u90e8\u5206\u61c9\u7528\u6d41\u91cf\u5c0e\u5411\u672c\u5730 MEC UPF\uff0c\u5176\u9918\u6d41\u91cf\u8d70\u4e2d\u592e UPF</li> <li>\u4f9d\u64da\u4e0d\u540c DNN / Slice\uff0c\u5c07\u6d41\u91cf\u5206\u6d41\u5230\u4e0d\u540c\u7684\u4f01\u696d\u5c08\u7db2 UPF</li> </ul> <p>\u9019\u4e9b\u67b6\u69cb\u5728\u5f8c\u7e8c\u591a\u7bc0\u9ede\u90e8\u7f72\u7ae0\u7bc0\u4e2d\u6703\u7528\u5716\u793a\u8207\u8a2d\u5b9a\u7bc4\u4f8b\u518d\u52a0\u4ee5\u8aaa\u660e\u3002</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter9/#93-free5gc-upf","title":"9.3 free5GC \u591a\u7bc0\u9ede / \u591a UPF \u90e8\u7f72","text":"<p>\u7b46\u8005\u9019\u908a\u76f4\u63a5\u4ee5\u5b98\u65b9\u63d0\u4f9b\u7684 ULCL \u90e8\u7f72\u4f86\u505a\u4ecb\u7d39\uff0c\u5176\u6838\u5fc3\u4e3b\u8981\u5c31\u662f\u5728\u65bc\u914d\u7f6e SMF \u7684\u8cc7\u6599\u5e73\u9762\u8cc7\u8a0a\u65bc\u5be6\u969b\u555f\u52d5\u591a\u500b\u4e0d\u540c\u7684 UPF \u5be6\u4f8b\u3002</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter9/#931-smf","title":"9.3.1 SMF \u8a2d\u5b9a\u6a94\u7684\u6539\u52d5","text":"<p>\u5728 ULCL \u7684 SMF \u8a2d\u5b9a\u4e2d\uff0c\u6700\u95dc\u9375\u7684\u5340\u584a\u5c31\u662f <code>userplaneInformation</code>\u3002\u9019\u88e1\u6703\u5ba3\u544a\u6574\u500b\u4f7f\u7528\u8005\u9762\u62d3\u6a38\u88e1\u6709\u54ea\u4e9b\u7bc0\u9ede\uff08<code>upNodes</code>\uff09\uff0c\u4ee5\u53ca\u9019\u4e9b\u7bc0\u9ede\u4e4b\u9593\u7684\u9023\u7dda\u95dc\u4fc2\uff08<code>links</code>\uff09\u3002\u4ee5\u4e0b\u662f\u7cbe\u7c21\u5f8c\u7684\u7bc4\u4f8b\uff0c\u6211\u5011\u53ef\u4ee5\u770b\u5230\u6709\u4e09\u500b <code>upNodes</code>\uff1a</p> <pre><code>userplaneInformation:\n  upNodes:\n    gNB1:\n      ...\n    I-UPF:\n      ...\n    PSA-UPF:\n      ...\n</code></pre> <p>\u5728\u9019\u88e1\uff1a</p> <ul> <li><code>gNB1</code> \u4ee3\u8868\u4e00\u500b\u63a5\u5165\u7bc0\u9ede\uff08\u5c0d N3 \u4f86\u7684 gNB\uff09  </li> <li><code>I-UPF</code> \u662f\u4e0a\u6e38\u7684\u5206\u6d41\u7bc0\u9ede\uff08ULCL\uff09  </li> <li><code>PSA-UPF</code> \u5247\u662f\u4e0b\u6e38\u7684\u9328\u9ede UPF\uff08PDU Session Anchor\uff09</li> </ul> <p>\u900f\u904e\u9019\u6a23\u7684\u5ba3\u544a\uff0cSMF \u5c31\u77e5\u9053\u300c\u8cc7\u6599\u5e73\u9762\u4e0a\u6709\u54ea\u4e9b\u7bc0\u9ede\u53ef\u4ee5\u7528\u300d\uff0c\u4ee5\u53ca\u4e4b\u5f8c\u8981\u5728 PDU \u6703\u8a71\u4e2d\u5982\u4f55\u9078\u64c7\u8def\u5f91\u3002</p> <p>\u63a5\u8457\uff0c\u5728 <code>userplaneInformation</code> \u7684 <code>links</code> \u90e8\u5206\uff0c\u6211\u5011\u53ef\u4ee5\u7528 <code>A</code> / <code>B</code> \u4f86\u63cf\u8ff0\u7bc0\u9ede\u4e4b\u9593\u7684\u9023\u7dda\u95dc\u4fc2\uff1a</p> <pre><code>userplaneInformation:\n  upNodes:\n   ...\n  links:\n    - A: gNB1\n      B: I-UPF\n    - A: I-UPF\n      B: PSA-UPF\n</code></pre> <p>\u9019\u88e1\u8868\u793a\uff1a</p> <ul> <li><code>gNB1</code> \u900f\u904e N3 \u4ecb\u9762\u9023\u5230 <code>I-UPF</code></li> <li><code>I-UPF</code> \u518d\u5f80\u4e0b\u6e38\u9023\u5230 <code>PSA-UPF</code></li> </ul> <p>SMF \u555f\u52d5\u5f8c\u6703\u4f9d\u64da <code>upNodes</code> \u8207 <code>links</code> \u7684\u8cc7\u8a0a\u5efa\u7acb\u4e00\u5f35\u300c\u4f7f\u7528\u8005\u9762\u62d3\u6a38\u5716\u300d\uff0c\u4e4b\u5f8c\u5728\u8655\u7406 PDU \u6703\u8a71\u8207 ULCL \u5206\u6d41\u6642\uff0c\u90fd\u6703\u4ee5\u9019\u5f35\u62d3\u6a38\u70ba\u57fa\u790e\u4f86\u4e0b\u767c PFCP \u898f\u5247\u3002</p> <p>Caution</p> <p><code>links</code> \u88e1\u9762\u7684\u7bc0\u9ede\u540d\u7a31\u5fc5\u9808\u8207 <code>upNodes</code> \u4e2d\u5ba3\u544a\u7684\u540d\u7a31\u5b8c\u5168\u4e00\u81f4\uff08\u5305\u542b\u5927\u5c0f\u5beb\uff09\uff0c\u5426\u5247 SMF \u6703\u627e\u4e0d\u5230\u5c0d\u61c9\u7bc0\u9ede\uff0c\u6700\u5f8c\u5c0e\u81f4 PDU \u6703\u8a71\u5efa\u7acb\u5931\u6557\u6216\u6d41\u91cf\u7121\u6cd5\u6b63\u78ba\u8f49\u9001\u3002</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter9/#932-ue","title":"9.3.2 UE \u8def\u5f91\u8a2d\u5b9a","text":"<p>\u5728 ULCL \u7684\u57f7\u884c\u904e\u7a0b\uff0c\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4e8b\u5148\u5b9a\u7fa9\u898f\u5247\u7684\u65b9\u5f0f\u6307\u5b9a UE \u6709\u54ea\u4e9b\u6d41\u91cf\u9700\u8981\u5f9e I-UPF \u5c0e\u51fa\uff0c\u800c\u4e0d\u7d93\u904e PSA-UPF\uff0c\u6211\u5011\u53c3\u8003 <code>uerouting.yaml</code> \u7684\u8a2d\u5b9a\uff1a</p> <pre><code>info:\n  version: 1.0.7\n  description: Routing information for UE\n\nueRoutingInfo:\n  UE1:\n    members:\n      - imsi-208930000000001\n    topology:\n      - A: gNB1\n        B: I-UPF\n      - A: I-UPF\n        B: PSA-UPF\n    specificPath:\n      - dest: 1.0.0.1/32\n        path: [I-UPF]\n</code></pre> <p>\u9019\u500b\u8a2d\u5b9a\u6a94\u505a\u4e86\u5e7e\u4ef6\u4e8b\uff1a</p> <ul> <li>\u5728 <code>ueRoutingInfo</code> \u5e95\u4e0b\uff0c\u4ee5 <code>UE1</code> \u9019\u500b\u908f\u8f2f\u540d\u7a31\u4ee3\u8868\u4e00\u7d44 UE\uff0c<code>members</code> \u4e2d\u5217\u51fa\u5be6\u969b\u6210\u54e1\uff08\u9019\u88e1\u53ea\u6709\u4e00\u500b <code>imsi-208930000000001</code>\uff09\u3002\u4e4b\u5f8c\u5982\u679c\u6709\u66f4\u591a UE \u8981\u5171\u7528\u540c\u4e00\u7d44\u8def\u5f91\u8207\u5206\u6d41\u898f\u5247\uff0c\u53ea\u8981\u628a IMSI \u52a0\u9032\u9019\u500b\u6e05\u55ae\u5373\u53ef\u3002</li> <li><code>topology</code> \u63cf\u8ff0\u9019\u7d44 UE \u7684\u300c\u9810\u8a2d\u8cc7\u6599\u5e73\u9762\u62d3\u6a38\u300d\uff0c\u4e5f\u5c31\u662f\u5f9e gNB1 \u7d93\u904e I\u2011UPF \u518d\u5230 PSA\u2011UPF \u7684\u8def\u5f91\uff0c\u5c0d\u61c9\u524d\u9762 SMF <code>userplaneInformation.links</code> \u4e2d\u5ba3\u544a\u7684\u9023\u7dda\u95dc\u4fc2\u3002</li> <li><code>specificPath</code> \u5247\u662f ULCL \u7684\u95dc\u9375\uff1a\u5b83\u6307\u5b9a\u7576\u9019\u500b UE \u7684\u76ee\u7684\u4f4d\u5740\u662f <code>1.0.0.1/32</code> \u6642\uff0c\u8cc7\u6599\u8def\u5f91\u53ea\u8d70 <code>I-UPF</code>\uff0c\u4e5f\u5c31\u662f\u5728 I\u2011UPF \u5c31\u76f4\u63a5\u300c\u4e0b\u8eca\u300d\uff0c\u4e0d\u518d\u5f80 PSA\u2011UPF \u8f49\u9001\u3002\u63db\u53e5\u8a71\u8aaa\uff0c\u9019\u689d\u76ee\u7684\u5730\u6d41\u91cf\u6703\u88ab I\u2011UPF \u5206\u6d41\u51fa\u53bb\uff08\u4f8b\u5982\u5c0e\u5411\u672c\u5730 MEC \u6216\u7279\u5b9a\u670d\u52d9\uff09\uff0c\u800c\u5176\u4ed6\u6c92\u6709\u7279\u5225\u6307\u5b9a\u7684\u6d41\u91cf\u5247\u4ecd\u4f9d\u7167\u9810\u8a2d\u62d3\u6a38\u7d93\u904e PSA\u2011UPF\u3002</li> </ul> <p>\u7576 SMF \u555f\u52d5\u4e26\u8b80\u53d6 <code>uerouting.yaml</code> \u5f8c\uff0c\u5c31\u6703\u4f9d\u64da\u9019\u4e9b\u8a2d\u5b9a\u5728 ULCL\u2011UPF \u4e0a\u4e0b\u767c\u5c0d\u61c9\u7684 PDR/FAR \u898f\u5247\uff0c\u8b93 I\u2011UPF \u80fd\u5920\u8fa8\u8b58\u300c\u54ea\u4e9b\u5c01\u5305\u61c9\u8a72\u4f9d\u9810\u8a2d\u8def\u5f91\u8d70\u5230 PSA\u2011UPF\u3001\u54ea\u4e9b\u5c01\u5305\u53ef\u4ee5\u5728\u81ea\u5df1\u9019\u4e00\u5c64\u5c31\u88ab\u5206\u6d41\u8655\u7406\u300d\u3002</p>"},{"location":"doc-5g-core-book/zh/part3-deploy/chapter9/#94","title":"9.4 \u672c\u7ae0\u5c0f\u7d50","text":"<p>\u672c\u7ae0\u5f9e 5GC \u7684 CUPS \u67b6\u69cb\u51fa\u767c\uff0c\u8aaa\u660e\u4e86\u70ba\u4ec0\u9ebc\u5728\u5be6\u52d9\u4e0a\u5e38\u9700\u8981\u63a1\u7528\u591a\u7bc0\u9ede\u3001\u591a UPF \u7684\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e26\u4ee5 ULCL \u4f5c\u70ba\u5207\u5165\u9ede\uff0c\u4ecb\u7d39\u4e86\u4e0a\u884c\u5206\u6d41\u5728 5G \u6838\u5fc3\u7db2\u4e2d\u7684\u89d2\u8272\u8207\u5178\u578b\u61c9\u7528\u60c5\u5883\u3002\u63a5\u8457\uff0c\u6211\u5011\u900f\u904e free5GC \u5b98\u65b9\u7684 ULCL \u7bc4\u4f8b\uff0c\u89e3\u6790\u4e86 SMF \u8a2d\u5b9a\u6a94\u4e2d <code>userplaneInformation.upNodes</code> \u8207 <code>links</code> \u5982\u4f55\u63cf\u8ff0\u8cc7\u6599\u5e73\u9762\u62d3\u6a38\uff0c\u4ee5\u53ca <code>uerouting.yaml</code> \u5982\u4f55\u91dd\u5c0d\u7279\u5b9a UE \u8207\u76ee\u7684\u4f4d\u5740\uff0c\u5b9a\u7fa9\u54ea\u4e9b\u6d41\u91cf\u61c9\u8a72\u5728 I\u2011UPF \u76f4\u63a5\u5206\u6d41\u3001\u54ea\u4e9b\u5247\u7d93\u7531 PSA\u2011UPF \u7e7c\u7e8c\u8f49\u9001\u3002</p> <p>\u638c\u63e1\u9019\u4e9b\u6982\u5ff5\u4e4b\u5f8c\uff0c\u4f60\u61c9\u8a72\u5df2\u7d93\u80fd\u5920\u8b80\u61c2\u591a UPF / ULCL \u67b6\u69cb\u4e0b\u7684\u4e3b\u8981\u8a2d\u5b9a\u8207\u8def\u5f91\u8a2d\u8a08\u908f\u8f2f\uff0c\u4e26\u7406\u89e3\u300c\u5206\u6d41\u6c7a\u7b56\u5176\u5be6\u662f\u7531 SMF \u900f\u904e PFCP \u5728\u5404\u500b UPF \u4e0a\u4e0b\u767c\u898f\u5247\u300d\u9019\u4ef6\u4e8b\u3002\u672a\u4f86\u5728\u8a2d\u8a08\u66f4\u8907\u96dc\u7684\u62d3\u6a38\uff08\u4f8b\u5982\u591a\u5c64 UPF\u3001MEC\u3001\u4f01\u696d\u5c08\u7db2\u6216\u591a\u5207\u7247\u5834\u666f\uff09\u6642\uff0c\u53ea\u8981\u7262\u8a18\u9019\u4e00\u7ae0\u4ecb\u7d39\u7684\u601d\u7dad\u8207\u8a2d\u5b9a\u65b9\u5f0f\uff0c\u5c31\u53ef\u4ee5\u5728 free5GC \u4e0a\u9010\u6b65\u5be6\u4f5c\u4e26\u9a57\u8b49\u5404\u7a2e\u4f7f\u7528\u8005\u9762\u8def\u5f91\u7684\u8a2d\u8a08\u3002</p>"},{"location":"doc-5g-core-book/zh/part4-free-ran-ue/chapter10/","title":"\u7b2c 10 \u7ae0\uff1a\u70ba\u4ec0\u9ebc\u9700\u8981 RAN/UE \u6a21\u64ec\u5668\uff1f","text":""},{"location":"doc-5g-core-book/zh/part4-free-ran-ue/chapter11/","title":"\u7b2c 11 \u7ae0\uff1afree-ran-ue \u7684\u67b6\u69cb\u8a2d\u8a08","text":""},{"location":"doc-5g-core-book/zh/part4-free-ran-ue/chapter12/","title":"\u7b2c 12 \u7ae0\uff1a\u6a21\u64ec\u5668\u5982\u4f55\u8207 free5GC \u6574\u5408","text":""},{"location":"doc-contributors/","title":"Contributors","text":"<p>Note</p> <p>This is our contributors list. It is welcome for everyone to contribute.</p> <p>Feel free to open PULL REQUEST at free-ran-ue.</p> Avatar Contributor Affiliation Github Account Alonza Tu Committer @ free5GC Alonza0314 Lily Wu SWE @ Google lilywuuuuu Dan Hsieh M.S. @ NYCU Dan"},{"location":"doc-design-document/","title":"Design Document","text":"<p>Note</p> <p>Here will give the details about implementations of free-ran-ue.</p>"},{"location":"doc-design-document/#general-design-architecture","title":"General Design Architecture","text":""},{"location":"doc-design-document/#basic-architecture","title":"Basic Architecture","text":"<p>Both control plane and data plane connections exist among the core network, RAN, and UE.</p>"},{"location":"doc-design-document/#new-radio-dual-connectivity-architecture","title":"New Radio-Dual Connectivity Architecture","text":"<p>For dual connection, there will be addition data plane connections from core network to UE via RAN.</p>"},{"location":"doc-design-document/#detail-documents","title":"Detail Documents","text":"<ol> <li>Userspace GTP-U</li> <li>gNB(RAN)</li> <li>UE</li> <li>Static NR-DC</li> <li>Dynamic NR-DC</li> </ol>"},{"location":"doc-design-document/01-userspace-gtp-u/","title":"Userspace GTP-U","text":""},{"location":"doc-design-document/01-userspace-gtp-u/#introduction","title":"Introduction","text":"<p>In current open source RAN and UE simulators, the GTP-U function is usually implemented in kernel space. For example, PacketRusher uses the gtp5g kernel module to handle GTP packet forwarding.</p> <p>However, if we want more flexible control over GTP-U, moving it to user space is a better choice. The goal of this project is to test the dynamic NR-DC feature in free5GC. Although moving GTP-U to user space may incur some performance overhead, it offers greater flexibility for development and testing.</p>"},{"location":"doc-design-document/01-userspace-gtp-u/#overview","title":"Overview","text":"<p>Here is an example of the ICMP process, i.e., <code>ping</code>.</p>"},{"location":"doc-design-document/01-userspace-gtp-u/#uplink","title":"Uplink","text":"<pre><code>graph LR\n    UE_Kernel([\"&lt;b&gt;UE Kernel&lt;/b&gt;&lt;br/&gt;ping 8.8.8.8\"])\n    TUN([\"&lt;b&gt;TUN&lt;br/&gt;ueTun0&lt;/b&gt;\"])\n    UE_Sim([\"&lt;b&gt;UE Simulator&lt;/b&gt;\"])\n    RAN_Sim([\"&lt;b&gt;RAN Simulator&lt;/b&gt;\"])\n    UPF([\"&lt;b&gt;UPF&lt;/b&gt;&lt;br/&gt;UDP 2152\"])\n\n    UE_Kernel -.-&gt;|\"ICMP Packet\"| TUN\n    TUN -- \"User Data\" --&gt; UE_Sim\n    UE_Sim -- \"UDP\" --&gt; RAN_Sim\n    RAN_Sim -- \"Encapsulate GTP-U &lt;br/&gt; with TEID\" --&gt; UPF\n\n    %% \u6a23\u5f0f\u7f8e\u5316\n    classDef kernel fill:#e3f2fd,stroke:#1976d2,stroke-width:2px;\n    classDef tun fill:#fffde7,stroke:#fbc02d,stroke-width:2px;\n    classDef sim fill:#e8f5e9,stroke:#388e3c,stroke-width:2px;\n    classDef ran fill:#f3e5f5,stroke:#8e24aa,stroke-width:2px;\n    classDef gtpu fill:#fbe9e7,stroke:#d84315,stroke-width:2px;\n    classDef upf fill:#ede7f6,stroke:#5e35b1,stroke-width:2px;\n\n    class UE_Kernel kernel;\n    class TUN tun;\n    class UE_Sim sim;\n    class RAN_Sim ran;\n    class GTPU gtpu;\n    class UPF upf;</code></pre> <ol> <li>Create a TUN device in the UE to serve as a virtual network interface for user traffic.</li> <li>The UE reads packets from the TUN device in user space and sends them to the RAN simulator via UDP.</li> <li>The RAN simulator receives the data from the UE and encapsulates the packets as GTP-U packets with the assigned TEID.</li> <li>The RAN simulator sends the encapsulated GTP-U packets to the UPF over UDP (port 2152).</li> </ol>"},{"location":"doc-design-document/01-userspace-gtp-u/#downlink","title":"Downlink","text":"<pre><code>graph LR\n  UPF([\"&lt;b&gt;UPF&lt;/b&gt;&lt;br/&gt;UDP 2152\"])\n  RAN_Sim([\"&lt;b&gt;RAN Simulator&lt;/b&gt;\"])\n  UE_Sim([\"&lt;b&gt;UE Simulator&lt;/b&gt;\"])\n  TUN([\"&lt;b&gt;TUN&lt;br/&gt;ueTun0&lt;/b&gt;\"])\n  UE_Kernel([\"&lt;b&gt;UE Kernel&lt;/b&gt;&lt;br/&gt;ping reply\"])\n\n  UPF -- \"GTP-U Packet\" --&gt; RAN_Sim\n  RAN_Sim -- \"Decapsulate GTP-U&lt;br/&gt;with TEID\" --&gt; UE_Sim\n  UE_Sim -- \"User Data\" --&gt; TUN\n  TUN -.-&gt;|\"ICMP Reply\"| UE_Kernel\n\n  %% \u6a23\u5f0f\u7f8e\u5316\n  classDef upf fill:#ede7f6,stroke:#5e35b1,stroke-width:2px;\n  classDef ran fill:#e3f2fd,stroke:#1976d2,stroke-width:2px;\n  classDef sim fill:#e8f5e9,stroke:#388e3c,stroke-width:2px;\n  classDef tun fill:#fffde7,stroke:#fbc02d,stroke-width:2px;\n  classDef kernel fill:#f3e5f5,stroke:#8e24aa,stroke-width:2px;\n\n  class UPF upf;\n  class RAN_Sim ran;\n  class UE_Sim sim;\n  class TUN tun;\n  class UE_Kernel kernel;</code></pre> <ol> <li>When the UPF has data to send to the UE, it encapsulates the data into a GTP-U packet and sends it via UDP (port 2152) to the RAN simulator.</li> <li>The RAN simulator receives the GTP-U packet, decapsulates it based on the TEID, and forwards the original IP packet to the corresponding UE.</li> <li>The UE simulator receives the packet in user space and writes the raw packet into the TUN device.</li> <li>The UE kernel processes the packet and generates a response (e.g., ping reply).</li> </ol>"},{"location":"doc-design-document/01-userspace-gtp-u/#implementation","title":"Implementation","text":"<p>To describe the implementation, we will separate the infrastructure into UE and RAN components.</p> <p>Important</p> <p>The connections mentioned here only consider the data plane.</p>"},{"location":"doc-design-document/01-userspace-gtp-u/#at-ue","title":"At UE","text":"<p>After the PDU session establishment procedure, the UE will receive configuration messages, including the UE IP address.</p>"},{"location":"doc-design-document/01-userspace-gtp-u/#bring-up-a-network-device-in-kernel-space","title":"Bring up a network device in kernel space","text":"<p>This network device will act as an entry point for user traffic from kernel space to user space. We use the water library to create and manage TUN devices.</p> <ol> <li> <p>Using the water library to bring up a network device:</p> <pre><code>tunCfg := water.Config{ DeviceType: water.TUN }\ntunCfg.Name = ueTunnelDeviceName\n</code></pre> </li> <li> <p>Set up the device with UE IP:</p> <pre><code>cmds := [][]string{\n  {\"ip\", \"addr\", \"add\", fmt.Sprintf(\"%s/32\", ip), \"dev\", ueTunnelDeviceName},\n  {\"ip\", \"link\", \"set\", \"dev\", ueTunnelDeviceName, \"up\"},\n}\n\nfor _, cmd := range cmds {\n  if err := exec.Command(cmd[0], cmd[1:]...).Run(); err != nil {\n    return nil, fmt.Errorf(\"error bringing up tunnel device: %v\", err)\n  }\n}\n</code></pre> </li> </ol>"},{"location":"doc-design-document/01-userspace-gtp-u/#set-up-packet-forwarding-channels","title":"Set up packet forwarding channels","text":"<p>Here we will set up two channels to transmit packets between the READER and TRANSMITTER.</p> <ol> <li> <p>Uplink (read from tunnel device and send to RAN):</p> <pre><code>u.readFromTun = make(chan []byte)\ngo func() {\n  buffer := make([]byte, 4096)\n  for {\n    n, err := ueTunnelDevice.Read(buffer)\n    if err != nil {\n      return\n    }\n    u.readFromTun &lt;- buffer[:n]\n  }\n}()\n</code></pre> </li> <li> <p>Downlink (receive from RAN and write to tunnel device):</p> <pre><code>u.readFromRan = make(chan []byte)\ngo func() {\n  buffer := make([]byte, 4096)\n  for {\n    n, err := u.ranDataPlaneConn.Read(buffer)\n    if err != nil {\n      if errors.Is(err, net.ErrClosed) {\n        return\n      }\n      return\n    }\n    u.readFromRan &lt;- buffer[:n]\n  }\n}()\n</code></pre> </li> </ol>"},{"location":"doc-design-document/01-userspace-gtp-u/#data-plane-packet-handler-transmit-packets-between-tun-and-ran","title":"Data plane packet handler (transmit packets between TUN and RAN)","text":"<p>Using <code>select</code> statement with for loops to handle bidirectional traffic.</p> <pre><code>for {\n    select {\n    case buffer := &lt;-u.readFromTun:\n        n, err := u.ranDataPlaneConn.Write(buffer)\n        if err != nil {\n            if errors.Is(err, net.ErrClosed) {\n                return\n            }\n        }\n    case buffer := &lt;-u.readFromRan:\n        n, err := u.ueTunnelDevice.Write(buffer)\n        if err != nil {\n          return\n        }\n    }\n}\n</code></pre>"},{"location":"doc-design-document/01-userspace-gtp-u/#at-ran","title":"At RAN","text":"<p>The RAN will maintain a MAP for mapping each TEID to its corresponding UE connection.</p>"},{"location":"doc-design-document/01-userspace-gtp-u/#uplink-ran-receives-packets-from-ue-and-formats-them-as-gtp-packets-for-sending-to-upf","title":"Uplink (RAN receives packets from UE and formats them as GTP packets for sending to UPF)","text":"<ol> <li> <p>RAN continuously reads from the UE connection and formats the packet as a GTP packet:</p> <pre><code>func (g *Gnb) startDataPlaneProcessor() {\n    buffer := make([]byte, 4096)\n    for {\n        n, ueAddress, err := g.ranDataPlaneServer.ReadFromUDP(buffer)\n        if err != nil {\n            continue\n        }\n\n        if string(buffer[:n]) == constant.UE_DATA_PLANE_INITIAL_PACKET {\n            go g.handleUeDataPlaneInitialPacket(ueAddress)\n        } else {\n            go g.handleUeDataPlanePacket(ueAddress, buffer)\n        }\n    }\n}\n</code></pre> </li> <li> <p>RAN formats a GTP header with the corresponding TEID and encapsulates it in front of the original packet. Then this GTP packet will be written to the gtpChannel for later transmission:</p> <pre><code>gtpHeader := make([]byte, 12)\n\ngtpHeader[0] = 0x32\ngtpHeader[1] = 0xff\nbinary.BigEndian.PutUint16(gtpHeader[2:], uint16(len(packet)+4))\ncopy(gtpHeader[4:], teid)\ngtpHeader[8], gtpHeader[9], gtpHeader[10], gtpHeader[11] = 0x00, 0x00, 0x00, 0x00\n\ngtpPacket := append(gtpHeader, packet...)\ngtpChannel &lt;- gtpPacket\n</code></pre> </li> <li> <p>RAN reads GTP packets from gtpChannel and sends them to UPF (N3 Connection):</p> <pre><code>for {\n    select {\n    case &lt;-ctx.Done():\n        return\n    case packet := &lt;-gtpChannel:\n        n, err := n3Conn.Write(packet)\n        if err != nil {\n          return\n        }\n    }\n}\n</code></pre> </li> </ol>"},{"location":"doc-design-document/01-userspace-gtp-u/#downlink-ran-receives-packets-from-upf-and-removes-their-gtp-header-for-sending-to-ue","title":"Downlink (RAN receives packets from UPF and removes their GTP header for sending to UE)","text":"<ol> <li> <p>Receive the GTP packet from N3 connection and pass the packet to the forward function:</p> <pre><code>for {\n    n, err := n3Conn.Read(buffer)\n    if err != nil {\n        if errors.Is(err, net.ErrClosed) {\n            return\n        }\n    }\n    go forwardPacketToUe(buffer[:n], teidToConn, gnbLogger)\n}\n</code></pre> </li> <li> <p>Parse the GTP packet and forward to the UE by TEID (from MAP):</p> <pre><code>teid, payload, err := parseGtpPacket(gtpPacket)\nif err != nil {\n    return\n}\n\nue, exists := dlTeidToUe.Load(teid)\nif !exists {\n    return\n}\n\nswitch u := ue.(type) {\ncase *RanUe:\n    dataPlaneAddress := u.GetDataPlaneAddress()\n    if dataPlaneAddress == nil {\n        return\n    }\n    n, err := ranDataPlaneServer.WriteToUDP(payload, dataPlaneAddress)\n    if err != nil {\n        return\n    }\ncase *XnUe:\n    dataPlaneAddress := u.GetDataPlaneAddress()\n    if dataPlaneAddress == nil {\n        return\n    }\n    n, err := ranDataPlaneServer.WriteToUDP(payload, dataPlaneAddress)\n    if err != nil {\n        return\n    }\n}\n</code></pre> </li> <li> <p>GTP packet parsing function:</p> <pre><code>func parseGtpPacket(gtpPacket []byte) (string, []byte, error) {\n    basicHeader, headerLength := gtpPacket[:8], 8\n\n    isNextExtensionHeader, isSequenceNumber, isNPDUNumber := false, false, false\n\n    if basicHeader[0]&amp;IS_NEXT_EXTENSION_HEADER != 0 {\n        isNextExtensionHeader = true\n    }\n\n    if basicHeader[0]&amp;IS_SEQUENCE_NUMBER != 0 {\n        isSequenceNumber = true\n    }\n\n    if basicHeader[0]&amp;IS_N_PDU_NUMBER != 0 {\n        isNPDUNumber = true\n    }\n\n    if isNextExtensionHeader || isSequenceNumber || isNPDUNumber {\n        headerLength += 3\n    }\n\n    if !isNextExtensionHeader {\n        return hex.EncodeToString(basicHeader[4:]), gtpPacket[headerLength:], nil\n    }\n\n    for {\n        switch gtpPacket[headerLength] {\n        case NEXT_EXTENSION_HEADER_TYPE_NO_MORE_EXTENSION_HEADERS:\n            headerLength += 1\n            return hex.EncodeToString(basicHeader[4:]), gtpPacket[headerLength:], nil\n        case NEXT_EXTENSION_HEADER_TYPE_PDU_SESSION_CONTAINER:\n            extensionHeaderLength := gtpPacket[headerLength+1]\n            headerLength += 2 + int(extensionHeaderLength)*NEXT_EXTENSION_HEADER_TYPE_PDU_SESSION_CONTAINER_LENGTH\n        default:\n            return \"\", nil, fmt.Errorf(\"unknown GTP extension header type: %d\", gtpPacket[headerLength])\n        }\n    }\n}\n</code></pre> </li> </ol>"},{"location":"doc-design-document/01-userspace-gtp-u/#conclusion","title":"Conclusion","text":"<p>This document presents a comprehensive design for implementing GTP-U functionality in user space, providing greater flexibility for testing and development purposes, particularly for dynamic NR-DC features in free5GC. The implementation separates concerns between UE and RAN components, with clear packet forwarding mechanisms for both uplink and downlink traffic.</p> <p>The key benefits of this approach include:</p> <ul> <li>Enhanced control over GTP-U packet processing</li> <li>Better debugging and monitoring capabilities</li> <li>Easier integration with test frameworks</li> <li>Flexibility in implementing custom GTP-U behaviors</li> </ul> <p>While there may be some performance overhead compared to kernel-space implementations, the gained flexibility makes this approach valuable for research and development scenarios.</p>"},{"location":"doc-design-document/02-gnb/","title":"gNB (RAN)","text":"<p>Note</p> <p>The gNB (gNodeB) is a 5G base station that handles message transfer between the core network and User Equipment (UE). It serves as the radio access network node in 5G networks.</p>"},{"location":"doc-design-document/02-gnb/#architecture-overview","title":"Architecture Overview","text":""},{"location":"doc-design-document/02-gnb/#basic-connections","title":"Basic Connections","text":""},{"location":"doc-design-document/02-gnb/#connections","title":"Connections","text":"<p>The gNB (RAN) establishes four fundamental connections:</p> <ul> <li> <p>To Core Network:</p> <ul> <li>Control Plane: NGAP (Next Generation Application Protocol) with AMF (Access and Mobility Management Function)</li> <li>Data Plane: GTP-U (GPRS Tunneling Protocol - User Plane) with UPF (User Plane Function)</li> </ul> </li> <li> <p>To UE (User Equipment):</p> <ul> <li>Control Plane: NAS (Non-Access Stratum) signaling with UE</li> <li>Data Plane: Raw packet transmission with UE over the radio interface</li> </ul> </li> </ul>"},{"location":"doc-design-document/02-gnb/#procedures","title":"Procedures","text":"<ol> <li> <p>NG Setup with AMF (port: <code>38412</code>)</p> <ul> <li>The gNB establishes a connection with the AMF to set up basic operational parameters and register itself with the core network.</li> <li>This procedure includes exchanging supported features, served PLMNs (Public Land Mobile Networks), and TAC (Tracking Area Code) information.</li> </ul> </li> <li> <p>GTP Tunnel Establishment with UPF (port: <code>2152</code>)</p> <ul> <li>The gNB establishes GTP-U tunnels with the UPF for user data forwarding.</li> <li>These tunnels are identified by TEID (Tunnel Endpoint Identifier) values for proper packet routing.</li> </ul> </li> <li> <p>UE Connection Management</p> <p>Upon receiving a new UE control plane connection, the gNB initiates the following procedures:</p> <ul> <li>UE Registration: Authenticates and registers the UE with the network</li> <li>PDU Session Establishment: Creates data sessions for the UE's communication needs</li> </ul> </li> </ol>"},{"location":"doc-design-document/02-gnb/#xn-interface","title":"Xn Interface","text":"<p>In the current implementation, the Xn interface is specifically designed for exchanging TEID information to support the NR-DC (New Radio Dual Connectivity) feature.</p> <p>Now, the Xn interface on each gNB listens on the address and port specified in the YAML configuration file, for example:</p> <pre><code>xnIp: \"10.0.1.2\"\nxnPort: 31415\n</code></pre> <p>This listener uses TCP, allowing any request to connect to it as needed. The processing function is defined in <code>gnb/xn.go</code> and can be extended in the <code>swtch</code> section.</p> <p>The supported <code>NGAP</code> types are:</p> <ol> <li> <p><code>ngapType.NGAPPDUPresentInitiatingMessage</code></p> <ol> <li><code>ngapType.ProcedureCodePDUSessionResourceSetup</code>: used for static NR-DC set up.</li> <li><code>ngapType.ProcedureCodePDUSessionResourceModifyIndicatio</code>n: used for dynamic NR-DC initial set up.</li> </ol> </li> <li> <p><code>ngapType.NGAPPDUPresentSuccessfulOutcome</code></p> <ol> <li><code>ngapType.ProcedureCodePDUSessionResourceModifyIndication</code>: used for dynamic NR-DC final setup.</li> </ol> </li> </ol>"},{"location":"doc-design-document/02-gnb/#ue-types","title":"UE types","text":"<ul> <li> <p>RanUe</p> <ul> <li> <p>Structure</p> <pre><code>type RanUe struct {\n    amfUeNgapId int64\n    ranUeNgapId int64\n\n    mobileIdentity5GS nasType.MobileIdentity5GS\n\n    ulTeid aper.OctetString\n    dlTeid aper.OctetString\n\n    n1Conn           net.Conn\n    dataPlaneAddress *net.UDPAddr\n\n    nrdcIndicator    bool\n    nrdcIndicatorMtx sync.Mutex\n}\n</code></pre> </li> <li> <p>Function</p> <p>RanUE is used to record all infomation about the UE controlled be gNB.</p> </li> </ul> </li> <li> <p>XnUE</p> <ul> <li> <p>Struct</p> <pre><code>type XnUe struct {\n    imsi string\n\n    ulTeid aper.OctetString\n    dlTeid aper.OctetString\n\n    dataPlaneAddress *net.UDPAddr\n}\n</code></pre> </li> <li> <p>Function</p> <p>XnUE is used to record the infomation about the UE offload from master gNB. XnUE will only handle data plane message for forwarding the packets between core network and UE.</p> </li> </ul> </li> </ul>"},{"location":"doc-design-document/02-gnb/#gtp-forwarding","title":"GTP Forwarding","text":"<p>The gNB implements GTP-U forwarding to handle user plane data between the UE and the core network. This includes:</p> <ul> <li>Encapsulation and decapsulation of user packets</li> <li>TEID-based routing</li> </ul> <p>For more detailed information about GTP-U implementation, please refer to: Userspace GTP-U</p>"},{"location":"doc-design-document/03-ue/","title":"UE","text":"<p>Note</p> <p>UE acts as a terminal device, like a mobile phone or an IoT device.</p>"},{"location":"doc-design-document/03-ue/#architecture-overview","title":"Architecture Overview","text":""},{"location":"doc-design-document/03-ue/#basic-connections","title":"Basic Connections","text":""},{"location":"doc-design-document/03-ue/#connections","title":"Connections","text":"<p>There will be two connections from UE to gNB:</p> <ul> <li>Control Plane: Used for signaling messages, authentication, and session management procedures.</li> <li>Data Plane: Used for user data transmission through established PDU sessions.</li> </ul>"},{"location":"doc-design-document/03-ue/#procedures","title":"Procedures","text":"<ol> <li>UE Registration: Initial registration procedure to attach UE to the 5G network.</li> <li>PDU Session Establishment: Procedure to establish data sessions for user plane communication.</li> </ol>"},{"location":"doc-design-document/03-ue/#gtp-u","title":"GTP-U","text":"<p>In <code>free-ran-ue</code>, UE will not engage in any GTP procedures. All GTP procedures are handled at the gNB.</p> <p>For more detailed information about GTP-U implementation, please refer to: Userspace GTP-U</p>"},{"location":"doc-design-document/04-static-nr-dc/","title":"Static NR-DC","text":"<p>Note</p> <p>Static NR-DC means the DC feature (two tunnels in one PDU Session) will be established during the PDU Session Establishment Procedure</p>"},{"location":"doc-design-document/04-static-nr-dc/#at-gnb","title":"At gNB","text":"<p>In the PDU Session Establishment procedure, after the gNB receives the <code>ngapPduSessionResourceSetupRequest</code> and confirms that NR-DC is enabled, the master gNB will forward this REQUEST to the secondary gNB via the Xn interface.</p> <p>The master gNB will extract the first UL TEID, and the secondary gNB will extract the second UL TEID from the REQUEST.</p> <ul> <li> <p>For master gNB:</p> <pre><code>for _, item := range pduSessionResourceSetupRequestTransfer.ProtocolIEs.List {\n    switch item.Id.Value {\n    case ngapType.ProtocolIEIDPDUSessionAggregateMaximumBitRate:\n    case ngapType.ProtocolIEIDULNGUUPTNLInformation:\n        ranUe.SetUlTeid(item.Value.ULNGUUPTNLInformation.GTPTunnel.GTPTEID.Value)\n    case ngapType.ProtocolIEIDAdditionalULNGUUPTNLInformation:\n    case ngapType.ProtocolIEIDPDUSessionType:\n    case ngapType.ProtocolIEIDQosFlowSetupRequestList:\n    }\n}\n</code></pre> </li> <li> <p>For secondary gNB:</p> <pre><code>for _, ie := range pduSessionResourceSetupRequestTransfer.ProtocolIEs.List {\n    switch ie.Id.Value {\n    case ngapType.ProtocolIEIDPDUSessionAggregateMaximumBitRate:\n    case ngapType.ProtocolIEIDULNGUUPTNLInformation:\n    case ngapType.ProtocolIEIDAdditionalULNGUUPTNLInformation:\n        xnUe.SetUlTeid(ie.Value.AdditionalULNGUUPTNLInformation.List[0].NGUUPTNLInformation.GTPTunnel.GTPTEID.Value)\n    case ngapType.ProtocolIEIDPDUSessionType:\n    case ngapType.ProtocolIEIDQosFlowSetupRequestList:\n    }\n}\n</code></pre> </li> </ul> <p>After the secondary gNB extracts the UL TEID from <code>AdditionalULNGUUPTNLInformation.List[0]</code>, it will format its DL TEID as a <code>ngapType.QosFlowPerTNLInformationItem</code> and send this item as a response back to the master gNB.</p> <pre><code>// DC QoS Flow per TNL Information\ndcQosFlowPerTNLInformationItem := ngapType.QosFlowPerTNLInformationItem{}\ndcQosFlowPerTNLInformationItem.QosFlowPerTNLInformation.UPTransportLayerInformation.Present = ngapType.UPTransportLayerInformationPresentGTPTunnel\n\n// DC Transport Layer Information in QoS Flow per TNL Information\ndcUpTransportLayerInformation := &amp;dcQosFlowPerTNLInformationItem.QosFlowPerTNLInformation.UPTransportLayerInformation\ndcUpTransportLayerInformation.Present = ngapType.UPTransportLayerInformationPresentGTPTunnel\ndcUpTransportLayerInformation.GTPTunnel = new(ngapType.GTPTunnel)\ndcUpTransportLayerInformation.GTPTunnel.GTPTEID.Value = xnUe.GetDlTeid()\ndcUpTransportLayerInformation.GTPTunnel.TransportLayerAddress = ngapConvert.IPAddressToNgap(g.ranN3Ip, \"\")\n\n// DC Associated QoS Flow List in QoS Flow per TNL Information\ndcAssociatedQosFlowList := &amp;dcQosFlowPerTNLInformationItem.QosFlowPerTNLInformation.AssociatedQosFlowList\ndcAssociatedQosFlowItem := ngapType.AssociatedQosFlowItem{}\ndcAssociatedQosFlowItem.QosFlowIdentifier.Value = 1\ndcAssociatedQosFlowList.List = append(dcAssociatedQosFlowList.List, dcAssociatedQosFlowItem)\n\ndcQosFlowPerTNLInformationMarshal, err := aper.MarshalWithParams(dcQosFlowPerTNLInformationItem, \"valueExt\")\n</code></pre> <p>When the master gNB receives the response, it will encapsulate the item into the <code>ngapPduSessionResourceSetupResponseTransfer</code> and send it back to the core network.</p> <p>For the core network's implementation, please refer to: NR-DC Design Document.</p>"},{"location":"doc-design-document/04-static-nr-dc/#at-ue","title":"At UE","text":"<p>If the UE is checked to be NR-DC enabled, the UE will establish a secondary connection to the secondary RAN after the PDU session establishment procedure.</p> <p>In the data plane, when reading raw packets from the TUN device, all packets will go through a destination IP filter. If the packet matches the QoS flow list, it will be sent to the secondary RAN; otherwise, it will be sent to the master RAN by default.</p> <pre><code>if util.IsIpInQosFlow(buffer, u.nrdc.qosFlow) {\n    n, err := u.dcRanDataPlaneConn.Write(buffer)\n} else {\n    n, err := u.ranDataPlaneConn.Write(buffer)\n}\n</code></pre> <p></p>"},{"location":"doc-design-document/05-dynamic-nr-dc/","title":"Dynamic NR-DC","text":"<p>Note</p> <p>Dynamic NR-DC means the DC feature (two tunnels in one PDU Session) will be trigger after the initial PDU session establishment procedure.</p>"},{"location":"doc-design-document/05-dynamic-nr-dc/#at-gnb","title":"At gNB","text":"<p>If gNB get the signal to modify the UE's tunnel, it will iinteract with secondary gNB for retrieving the second tunnel's info, like <code>TEID</code>.</p> <ul> <li> <p>For master gNB:</p> <ol> <li> <p>Build the target <code>PDUSessionResourceModifyIndicationTransfer</code> message.</p> <pre><code>pduSessionModifyIndicationTransfer, err := getPDUSessionResourceModifyIndicationTransfer(ranUe.GetDlTeid(), g.ranN3Ip, 1)\n</code></pre> </li> <li> <p>Encapsulate into <code>PDUSessionResourceModifyIndication</code> NGAP message.</p> <pre><code>pduSessionModifyIndication, err := getPDUSessionResourceModifyIndication(ranUe.GetAmfUeId(), ranUe.GetRanUeId(), constant.PDU_SESSION_ID, pduSessionModifyIndicationTransfer)\n</code></pre> </li> <li> <p>Interact with secondary gNB.</p> <pre><code>pduSessionModifyIndication, err = g.xnPduSessionResourceModifyIndication(ranUe.GetMobileIdentityIMSI(), pduSessionModifyIndication)\n</code></pre> <p>This step will start communication with secondary gNB via Xn-interface.</p> </li> <li> <p>Send the modify indication message to AMF for core network DC setup.</p> <pre><code>n, err := g.n2Conn.Write(pduSessionModifyIndication)\n</code></pre> </li> <li> <p>Receive the confirm message and transmit it to secondary gNB</p> <pre><code>_, err = g.xnPduSessionResourceModifyConfirm(ranUe.GetMobileIdentityIMSI(), ngapPduSessionResourceModifyConfirmRaw[:n])\n</code></pre> </li> <li> <p>Send tunnel update message to UE</p> <pre><code>modifyMessage := []byte(util.TUNNEL_UPDATE)\nn, err = ranUe.GetN1Conn().Write(modifyMessage)\n</code></pre> <p>This message is just designed by free-ran-ue, not followed 3GPP. The purpose of the message is letting UE update the data plane configuration.</p> </li> </ol> </li> <li> <p>For secondary gNB:</p> <ol> <li>Receive the modify indication NGAP message and insert its tunnel's information.</li> <li>Receive the confirm NGAP message and update the uplink TEID.</li> </ol> <p>For more details implemtation, please refer to: xn.go</p> </li> </ul>"},{"location":"doc-design-document/05-dynamic-nr-dc/#at-ue","title":"At UE","text":"<p>After master gNB finishing the modify procedure, it will send an update message to UE. Once UE received this tunnel update message, it will update the data plane configuration.</p> <ul> <li> <p>Modify from non-DC to DC:</p> <ol> <li> <p>Dial a connection to secondary gNB's data plane connection.</p> <pre><code>conn, err := util.TcpDialWithOptionalLocalAddress(u.nrdc.dcRanDataPlane.ip, u.nrdc.dcRanDataPlane.port, u.nrdc.dcLocalDataPlaneIp)\n</code></pre> </li> <li> <p>Start the data plane read for secondaru gNB.</p> <pre><code>buffer := make([]byte, 4096)\nfor {\n    n, err := u.dcRanDataPlaneConn.Read(buffer)\n    u.readFromRan &lt;- buffer[:n]\n}\n</code></pre> </li> </ol> </li> <li> <p>Modify from DC to non-DC</p> <ol> <li> <p>Close the secondary gNB's data plane connection.</p> <pre><code>u.dcRanDataPlaneConn.Close()\n</code></pre> </li> </ol> </li> </ul> <p>The data plane handler will based on the <code>ue.nrdc.enable</code> flag to do the traffic flow split.</p>"},{"location":"doc-user-guide/","title":"User Guide","text":"<p>Note</p> <ul> <li>It is recommended to set up two separate machines: one dedicated to free5GC and the other to free-ran-ue.</li> <li>Alternatively, free-ran-ue offers a single-machine solution with namespaces. For more information, please refer to the Quick Start section.</li> </ul>"},{"location":"doc-user-guide/#baisc-usage","title":"Baisc Usage","text":"<ul> <li>free5GC</li> <li>free-ran-ue</li> <li>Console</li> <li>Logger Level</li> </ul>"},{"location":"doc-user-guide/#advanced-feature","title":"Advanced Feature","text":"<ul> <li>Static NR-DC</li> <li>Dynamic NR-DC</li> <li>Multiple UEs</li> </ul>"},{"location":"doc-user-guide/#quick-start","title":"Quick Start","text":"<ul> <li>free-ran-ue with Namespace</li> <li>Static NR-DC with Namespace</li> <li>Dynamic NR-DC with Namespace</li> </ul>"},{"location":"doc-user-guide/#docker","title":"Docker","text":"<ul> <li>Docker Deployment</li> <li>Docker ULCL Deployment</li> </ul>"},{"location":"doc-user-guide/01-free5gc/","title":"free5GC","text":"<p>Note</p> <p>For more free5GC's information, please refer to free5GC's official website</p>"},{"location":"doc-user-guide/01-free5gc/#a-build-and-install-free5gc","title":"A. Build and Install free5GC","text":"<p>Please refer to the official document: Install free5GC</p>"},{"location":"doc-user-guide/01-free5gc/#b-start-free5gc","title":"B. Start free5GC","text":"<ol> <li> <p>Setting Parameters</p> <ul> <li> <p>There will be three YAML file need modified:</p> <ul> <li>~/free5gc/config/amfcfg.yaml</li> <li>~/free5gc/config/smfcfg.yaml</li> <li>~/free5gc/config/upfcfg.yaml</li> </ul> </li> <li> <p>~/free5gc/config/amfcfg.yaml</p> <p>Replace <code>ngapIpList</code> IP from <code>127.0.0.18</code> to you export IP:</p> <pre><code>ngapIpList:\n  - &lt;your export IP&gt;\n</code></pre> </li> <li> <p>~/free5gc/config/smfcfg.yaml</p> <p>Replace N3 interface's endpoints IP from <code>127.0.0.8</code> to your export IP:</p> <pre><code>interfaces:\n  - interfaceType: N3\n    endpoints:\n      - &lt;your export IP&gt;\n</code></pre> </li> <li> <p>~/free5gc/config/upfcfg.yaml</p> <p>Replace N6 interface address IP from <code>127.0.0.8</code> to your export IP:</p> <pre><code>gtpu:\n  forwarder: gtp5g\n  ifList:\n    - addr: &lt;your export IP&gt;\n</code></pre> </li> </ul> </li> <li> <p>Check IP Forward is enabled</p> <p>If you have rebooted your machine, remember to run these command with setting your export network interface:</p> <pre><code>sudo sysctl -w net.ipv4.ip_forward=1\nsudo iptables -t nat -A POSTROUTING -o &lt;export network interface&gt; -j MASQUERADE\nsudo systemctl stop ufw\nsudo iptables -I FORWARD 1 -j ACCEPT\n</code></pre> </li> <li> <p>Execute <code>run.sh</code> in free5GC</p> <pre><code>./run.sh\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/01-free5gc/#c-create-a-subscriber-in-free5gc","title":"C. Create A Subscriber in free5GC","text":"<p>Please refer to the official document: Create Subscriber via Webconsole</p>"},{"location":"doc-user-guide/02-free-ran-ue/","title":"free-ran-ue","text":"<p>Caution</p> <p>Do not start the UE on the same machine as free5GC, as this will cause data plane forwarding failures.</p> <p>There are two options for deployment:</p> <ul> <li>Use two separate machines.</li> <li>Use namespace separation. For details, please refer to Quick Start.</li> </ul>"},{"location":"doc-user-guide/02-free-ran-ue/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Golang:</p> <ul> <li>free-ran-ue is built, tested and run with <code>go1.25.5 linux/amd64</code></li> <li> <p>If Golang is not installed on your system, please execute the following commands:</p> <ul> <li> <p>Install Golang:</p> <pre><code>wget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nmkdir -p ~/go/{bin,pkg,src}\n# The following assume that your shell is bash:\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export GOROOT=/usr/local/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' &gt;&gt; ~/.bashrc\necho 'export GO111MODULE=auto' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> </li> <li> <p>Check Installation. You should see the version information:</p> <pre><code>go version\n</code></pre> </li> </ul> </li> <li> <p>If another version of Golang is installed, please execute the following commands to replace it:</p> <pre><code>sudo rm -rf /usr/local/go\nwget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nsource $HOME/.bashrc\ngo version\n</code></pre> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/02-free-ran-ue/#b-clone-and-build-free-ran-ue","title":"B. Clone and Build free-ran-ue","text":"<ul> <li> <p>Clone</p> <pre><code>git clone https://github.com/free-ran-ue/free-ran-ue.git\n</code></pre> </li> <li> <p>Build</p> <pre><code>cd free-ran-ue\nmake\n</code></pre> <p>After building, a binary executable file will be generated in the <code>build</code> folder.</p> </li> </ul>"},{"location":"doc-user-guide/02-free-ran-ue/#c-start-gnb","title":"C. Start gNB","text":"<ul> <li> <p>Modify the configuration file for gNB:</p> <p>The configuration <code>YAML</code> file template is located at <code>free-ran-ue/config/gnb.yaml</code>.</p> <p>Ensure that the information matches your core network settings. For core network settings, please refer to: Start free5GC</p> </li> <li> <p>Start gNB:</p> <p>After configuring the <code>YAML</code> file, execute the binary in the <code>build</code> folder to start gNB with the specified configuration file:</p> <pre><code>./build/free-ran-ue gnb -c config/gnb.yaml\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/02-free-ran-ue/#d-start-ue","title":"D. Start UE","text":"<ul> <li> <p>Modify the configuration file for UE:</p> <p>The configuration <code>YAML</code> file template is located at <code>free-ran-ue/config/ue.yaml</code>.</p> <p>Ensure that the information matches your web console settings, especially the <code>authenticationSubscription</code> section. For web console settings, please refer to: Create Subscriber via Webconsole</p> <p>Pay attention to the <code>ueTunnelDevice</code> field, as this will be the name of the network interface created later.</p> </li> <li> <p>Start UE:</p> <p>After configuring the <code>YAML</code> file, execute the binary in the <code>build</code> folder to start UE with the specified configuration file:</p> <pre><code>./build/free-ran-ue ue -c config/ue.yaml\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/02-free-ran-ue/#e-icmp-test","title":"E. ICMP Test","text":"<p>After UE has started, a network interface will be available. Use <code>ifconfig</code> to check it:</p> <pre><code>ifconfig\n</code></pre> <p>Expected output included:</p> <pre><code>ueTun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n        inet 10.60.0.1  netmask 255.255.255.255  destination 10.60.0.1\n        inet6 fe80::b1e9:2933:3c64:b981  prefixlen 64  scopeid 0x20&lt;link&gt;\n        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 3  bytes 144 (144.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <p>ICMP test with <code>ueTun0</code>:</p> <pre><code>ping -I ueTun0 8.8.8.8 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 8.8.8.8 (8.8.8.8) from 10.60.0.1 ueTun0: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=3.99 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=116 time=3.90 ms\n64 bytes from 8.8.8.8: icmp_seq=3 ttl=116 time=3.84 ms\n64 bytes from 8.8.8.8: icmp_seq=4 ttl=116 time=4.07 ms\n64 bytes from 8.8.8.8: icmp_seq=5 ttl=116 time=3.62 ms\n\n--- 8.8.8.8 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 3.618/3.881/4.067/0.152 ms\n</code></pre> <p>Now, both gNB and UE are running seccussfully.</p>"},{"location":"doc-user-guide/03-quickstart-free-ran-ue/","title":"free-ran-ue with Namespace","text":"<p>Note</p> <p>Namespace provides an alternative to using a physical machine.</p> <p>With namespaces, you can simulate isolated network environments on a single machine, making it possible to run both free5GC and free-ran-ue without the need for multiple physical devices.</p> <p>For detailed namespace implementation, please refer to this implementation article: Namespace-Based GTP5G Conflict Resolution for free5GC and PacketRusher.</p>"},{"location":"doc-user-guide/03-quickstart-free-ran-ue/#architecture-overview","title":"Architecture Overview","text":"<p>Since the network port and routing table will get in conflict, we can set up three namespaces for free5GC/RAN/UE, which means you don't need to bring up real machines.</p> <p>Here is the deployment of these three namespaces:</p> <p></p>"},{"location":"doc-user-guide/03-quickstart-free-ran-ue/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Golang</p> <pre><code>wget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nmkdir -p ~/go/{bin,pkg,src}\n# The following assume that your shell is bash:\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export GOROOT=/usr/local/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' &gt;&gt; ~/.bashrc\necho 'export GO111MODULE=auto' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> </li> <li> <p>gtp5g</p> <pre><code>sudo apt -y update\nsudo apt -y install git gcc g++ cmake autoconf libtool pkg-config libmnl-dev libyaml-dev\ngit clone https://github.com/free5gc/gtp5g\ncd gtp5g\nmake\nsudo make install\n</code></pre> </li> <li> <p>MongoDB</p> <pre><code>sudo apt install -y gnupg curl\ncurl -fsSL https://www.mongodb.org/static/pgp/server-7.0.asc | \\\nsudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg --dearmor\necho \"deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\nsudo apt update\nsudo apt install -y mongodb-org\nsudo systemctl enable mongod --now\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/03-quickstart-free-ran-ue/#b-namespace-setup","title":"B. Namespace Setup","text":"<ol> <li> <p>Clone and build free-ran-ue</p> <pre><code>git clone https://github.com/free-ran-ue/free-ran-ue.git\ncd free-ran-ue\nmake\n</code></pre> </li> <li> <p>Bring up namespaces (under <code>free-ran-ue</code>)</p> <pre><code>make ns-up\n</code></pre> <p>After using, there is <code>down</code> command to clean up the namespaces:</p> <pre><code>make ns-down\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/03-quickstart-free-ran-ue/#c-configure-free5gc","title":"C. Configure free5GC","text":"<ol> <li> <p>Clone free5GC and build</p> <pre><code>git clone -j `nproc` --recursive https://github.com/free5gc/free5gc\ncd free5gc\nmake\n</code></pre> </li> <li> <p>Modify NF configuration:</p> <ul> <li> <p>~/free5gc/config/amfcfg.yaml</p> <p>Replace <code>ngapIpList</code> IP from <code>127.0.0.18</code> to <code>10.0.1.1</code>:</p> <pre><code>ngapIpList:\n  - 10.0.1.1\n</code></pre> </li> <li> <p>~/free5gc/config/smfcfg.yaml</p> <p>Replace N3 interface's endpoints IP from <code>127.0.0.8</code> to your <code>10.0.1.1</code>:</p> <pre><code>interfaces:\n  - interfaceType: N3\n    endpoints:\n      - 10.0.1.1\n</code></pre> </li> <li> <p>~/free5gc/config/upfcfg.yaml</p> <p>Replace N6 interface address IP from <code>127.0.0.8</code> to <code>10.0.1.1</code>:</p> <pre><code>gtpu:\n  forwarder: gtp5g\n  iifList:\n    - addr: 10.0.1.1\n</code></pre> </li> </ul> </li> <li> <p>Check IP Forward is enabled</p> <p>If you have rebooted your machine, remember to run these command with setting your export network interface:</p> <pre><code>sudo sysctl -w net.ipv4.ip_forward=1\nsudo iptables -t nat -A POSTROUTING -o &lt;export network interface&gt; -j MASQUERADE\nsudo systemctl stop ufw\nsudo iptables -I FORWARD 1 -j ACCEPT\n</code></pre> </li> <li> <p>Run free5GC (under <code>free5gc</code>)</p> <pre><code>./run.sh\n</code></pre> </li> <li> <p>Run webconsole and create a subscriber by default (under <code>free5gc</code>)</p> <pre><code>cd webconsole\n./run.sh\n</code></pre> <p>For creating a subscriber, please refer to: Create Subscriber via Webconsole</p> </li> </ol>"},{"location":"doc-user-guide/03-quickstart-free-ran-ue/#d-start-gnb","title":"D. Start gNB","text":"<p>The configuration file <code>config/gnb.yaml</code> has already been set up with the environment values. No need to modify the configuration.</p> <ol> <li> <p>Enter the RAN-namespace (under <code>free-ran-ue</code>)</p> <pre><code>make ns-ran\n</code></pre> </li> <li> <p>Start gNB</p> <pre><code>./build/free-ran-ue gnb -c config/gnb.yaml\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/03-quickstart-free-ran-ue/#e-start-ue","title":"E. Start UE","text":"<p>The configuration file <code>config/ue.yaml</code> has already been set up with the environment values. No need to modify the configuration.</p> <ol> <li> <p>Enter the UE-namespace (under <code>free-ran-ue</code>)</p> <pre><code>make ns-ue\n</code></pre> </li> <li> <p>Start UE</p> <pre><code>./build/free-ran-ue ue -c config/ue.yaml\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/03-quickstart-free-ran-ue/#f-icmp-test","title":"F. ICMP Test","text":"<ol> <li> <p>Enter the UE-namespace (under <code>free-ran-ue</code>)</p> <pre><code>make ns-ue\n</code></pre> </li> <li> <p>Check the <code>ueTun0</code> interface</p> <pre><code>ifconfig\n</code></pre> <p>Expected output included:</p> <pre><code>ueTun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n        inet 10.60.0.1  netmask 255.255.255.255  destination 10.60.0.1\n        inet6 fe80::b1e9:2933:3c64:b981  prefixlen 64  scopeid 0x20&lt;link&gt;\n        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 3  bytes 144 (144.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> </li> <li> <p><code>ping</code> test</p> <pre><code>ping -I ueTun0 8.8.8.8 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 8.8.8.8 (8.8.8.8) from 10.60.0.1 ueTun0: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=3.99 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=116 time=3.90 ms\n64 bytes from 8.8.8.8: icmp_seq=3 ttl=116 time=3.84 ms\n64 bytes from 8.8.8.8: icmp_seq=4 ttl=116 time=4.07 ms\n64 bytes from 8.8.8.8: icmp_seq=5 ttl=116 time=3.62 ms\n\n--- 8.8.8.8 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 3.618/3.881/4.067/0.152 ms\n</code></pre> </li> </ol> <p>Now, both gNB and UE are running successfully in the RAN-namespace and UE-namespace respectively.</p>"},{"location":"doc-user-guide/04-logger-level/","title":"Logger Level","text":"<p>For gNB, UE and console, there is a log level field in the configuration file:</p> <pre><code>logger:\n  level: \"info\" # error, warn, info, debug, trace, test\n</code></pre>"},{"location":"doc-user-guide/04-logger-level/#log-description","title":"Log Description","text":"<p>There are six log levels available for gNB, UE and console:</p> <ul> <li>error: Critical errors that cause the application to stop.</li> <li>warn: Unusual events that do not affect application functionality.</li> <li>info: General information that users should be aware of.</li> <li>debug: Information useful for developers during debugging.</li> <li>trace: Detailed step-by-step information for in-depth analysis.</li> <li>test: Logs for developer checking anywhere.</li> </ul> <p>This can be customized in the configuration files.</p>"},{"location":"doc-user-guide/05-static-nrdc/","title":"Static NR-DC","text":"<p>Caution</p> <ol> <li>Do not start the Master-gNB and Secondary-gNB on the same machine, as this will cause a GTP port conflict.</li> <li>Do not start the UE on the same machine as free5GC, as this will cause data plane forwarding failures.</li> </ol> <p>There are two options for deployment:</p> <ul> <li>Use separate machines.</li> <li>Use namespace separation. For details, please refer to Quick Start.</li> </ul>"},{"location":"doc-user-guide/05-static-nrdc/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Golang:</p> <ul> <li>free-ran-ue is built, tested and run with <code>go1.25.5 linux/amd64</code></li> <li> <p>If Golang is not installed on your system, please execute the following commands:</p> <ul> <li> <p>Install Golang:</p> <pre><code>wget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nmkdir -p ~/go/{bin,pkg,src}\n# The following assume that your shell is bash:\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export GOROOT=/usr/local/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' &gt;&gt; ~/.bashrc\necho 'export GO111MODULE=auto' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> </li> <li> <p>Check Installation. You should see the version information:</p> <pre><code>go version\n</code></pre> </li> </ul> </li> <li> <p>If another version of Golang is installed, please execute the following commands to replace it:</p> <pre><code>sudo rm -rf /usr/local/go\nwget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nsource $HOME/.bashrc\ngo version\n</code></pre> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/05-static-nrdc/#b-clone-and-build-free-ran-ue","title":"B. Clone and Build free-ran-ue","text":"<ul> <li> <p>Clone</p> <pre><code>git clone https://github.com/free-ran-ue/free-ran-ue.git\n</code></pre> </li> <li> <p>Build</p> <pre><code>cd free-ran-ue\nmake\n</code></pre> <p>After building, a binary executable file will be generated in the <code>build</code> folder.</p> </li> </ul>"},{"location":"doc-user-guide/05-static-nrdc/#c-start-gnbs","title":"C. Start gNBs","text":"<ul> <li> <p>Modify the configuration file for gNBs:</p> <p>The configuration <code>YAML</code> file template is located at:</p> <ul> <li><code>free-ran-ue/config/gnb-dc-static-master.yaml</code></li> <li><code>free-ran-ue/config/gnb-dc-static-secondary.yaml</code></li> </ul> <p>Ensure that the information matches your core network settings. For core network settings, please refer to: Start free5GC</p> <p>Please also pay attention to the <code>xnIp</code> and <code>xnPort</code> field, as these will be used for the Xn-interface between the gNBs.</p> <p>Also noticed the fields <code>staticNrdc</code> that should be set as <code>true</code> for enabling static NR-DC.</p> </li> <li> <p>Start gNB:</p> <p>After configuring the <code>YAML</code> file, execute the binary in the <code>build</code> folder to start gNBs with the specified configuration file:</p> <ul> <li> <p>Master-gNB:</p> <pre><code>./build/free-ran-ue gnb -c config/gnb-dc-static-master.yaml\n</code></pre> </li> <li> <p>Secondary-gNB:</p> <pre><code>./build/free-ran-ue gnb -c config/gnb-dc-static-secondary.yaml\n</code></pre> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/05-static-nrdc/#d-start-ue","title":"D. Start UE","text":"<ul> <li> <p>Modify the configuration file for UE:</p> <p>The configuration <code>YAML</code> file template is located at <code>free-ran-ue/config/ue-dc-static.yaml</code>.</p> <p>Ensure that the information matches your web console settings, especially the <code>authenticationSubscription</code> section. For web console settings, please refer to: Create Subscriber via Webconsole</p> <p>To test the dual connectivity feature, there should be at least one flow rule (e.g. <code>1.1.1.1/32</code>) configured under the subscriber.</p> <p>Pay attention to the <code>ueTunnelDevice</code> field, as this will be the name of the network interface created later. Also make sure the <code>nrdc</code> section is configure correctly.</p> </li> <li> <p>Start UE:</p> <p>After configuring the <code>YAML</code> file,execute the binary in the <code>build</code> folder to start UE with the specified configuration file:</p> <pre><code>./build/free-ran-ue ue -c config/ue-dc-static.yaml\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/05-static-nrdc/#e-icmp-test","title":"E. ICMP Test","text":"<p>After UE has started, a network interface will be available. Use <code>ifconfig</code> to check it:</p> <pre><code>ifconfig\n</code></pre> <p>Expected output included:</p> <pre><code>ueTun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n        inet 10.60.0.1  netmask 255.255.255.255  destination 10.60.0.1\n        inet6 fe80::b1e9:2933:3c64:b981  prefixlen 64  scopeid 0x20&lt;link&gt;\n        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 3  bytes 144 (144.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <p>ICMP test with <code>ueTun0</code> via Master-gNB:</p> <pre><code>ping -I ueTun0 8.8.8.8 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 8.8.8.8 (8.8.8.8) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=3.71 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=116 time=4.08 ms\n64 bytes from 8.8.8.8: icmp_seq=3 ttl=116 time=3.82 ms\n64 bytes from 8.8.8.8: icmp_seq=4 ttl=116 time=4.25 ms\n64 bytes from 8.8.8.8: icmp_seq=5 ttl=116 time=3.77 ms\n\n--- 8.8.8.8 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4006ms\nrtt min/avg/max/mdev = 3.706/3.926/4.252/0.206 ms\n</code></pre> <p>ICMP test with <code>ueTun0</code> via Secondary-gNB:</p> <pre><code>ping -I ueTun0 1.1.1.1 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 1.1.1.1 (1.1.1.1) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 1.1.1.1: icmp_seq=1 ttl=49 time=4.51 ms\n64 bytes from 1.1.1.1: icmp_seq=2 ttl=49 time=4.46 ms\n64 bytes from 1.1.1.1: icmp_seq=3 ttl=49 time=4.27 ms\n64 bytes from 1.1.1.1: icmp_seq=4 ttl=49 time=3.97 ms\n64 bytes from 1.1.1.1: icmp_seq=5 ttl=49 time=4.64 ms\n\n--- 1.1.1.1 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 3.972/4.371/4.644/0.232 ms\n</code></pre>"},{"location":"doc-user-guide/06-quickstart-static-nrdc/","title":"Static NR-DC with Namespace","text":"<p>Note</p> <p>Namespace provides an alternative to using a physical machine.</p> <p>With namespaces, you can simulate isolated network environments on a single machine, making it possible to run both free5GC and free-ran-ue without the need for multiple physical devices.</p> <p>For detailed namespace implementation, please refer to this implementation article: Namespace-Based GTP5G Conflict Resolution for free5GC and PacketRusher.</p>"},{"location":"doc-user-guide/06-quickstart-static-nrdc/#architecture-overview","title":"Architecture Overview","text":"<p>Since the GTP port and the routing table will get in conflict, we can set up four namespaces for free5GC/Master RAN/Secondary RAN/UE, which means you don't need to bring up real machines.</p> <p>Here is the deployment of these three namespaces:</p> <p></p>"},{"location":"doc-user-guide/06-quickstart-static-nrdc/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Golang</p> <pre><code>wget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nmkdir -p ~/go/{bin,pkg,src}\n# The following assume that your shell is bash:\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export GOROOT=/usr/local/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' &gt;&gt; ~/.bashrc\necho 'export GO111MODULE=auto' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> </li> <li> <p>gtp5g</p> <pre><code>sudo apt -y update\nsudo apt -y install git gcc g++ cmake autoconf libtool pkg-config libmnl-dev libyaml-dev\ngit clone https://github.com/free5gc/gtp5g\ncd gtp5g\nmake\nsudo make install\n</code></pre> </li> <li> <p>MongoDB</p> <pre><code>sudo apt install -y gnupg curl\ncurl -fsSL https://www.mongodb.org/static/pgp/server-7.0.asc | \\\nsudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg --dearmor\necho \"deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\nsudo apt update\nsudo apt install -y mongodb-org\nsudo systemctl enable mongod --now\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/06-quickstart-static-nrdc/#b-namespace-setup","title":"B. Namespace Setup","text":"<ol> <li> <p>Clone and build free-ran-ue</p> <pre><code>git clone https://github.com/free-ran-ue/free-ran-ue.git\ncd free-ran-ue\nmake\n</code></pre> </li> <li> <p>Bring up namespaces (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-u\n</code></pre> <p>After using, there is <code>down</code> command to clean up the namespaces:</p> <pre><code>make dc-ns-down\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/06-quickstart-static-nrdc/#c-configure-free5gc","title":"C. Configure free5GC","text":"<ol> <li> <p>Clone free5GC and build</p> <pre><code>git clone -j `nproc` --recursive https://github.com/free5gc/free5gc\ncd free5gc\nmake\n</code></pre> </li> <li> <p>Modify NF configuration:</p> <ul> <li> <p>~/free5gc/config/amfcfg.yaml</p> <p>Replace <code>ngapIpList</code> IP from <code>127.0.0.18</code> to <code>10.0.1.1</code>:</p> <pre><code>ngapIpList:\n  - 10.0.1.1\n</code></pre> </li> <li> <p>~/free5gc/config/smfcfg.yaml</p> <p>Replace N3 interface's endpoints IP from <code>127.0.0.8</code> to your <code>10.0.1.1</code>:</p> <pre><code>interfaces:\n  - interfaceType: N3\n    endpoints:\n      - 10.0.1.1\n</code></pre> </li> <li> <p>~/free5gc/config/upfcfg.yaml</p> <p>Replace N6 interface address IP from <code>127.0.0.8</code> to <code>10.0.1.1</code>:</p> <pre><code>gtpu:\n  forwarder: gtp5g\n  iifList:\n    - addr: 10.0.1.1\n</code></pre> </li> </ul> </li> <li> <p>Check IP Forward is enabled</p> <p>If you have rebooted your machine, remember to run these command with setting your export network interface:</p> <pre><code>sudo sysctl -w net.ipv4.ip_forward=1\nsudo iptables -t nat -A POSTROUTING -o &lt;export network interface&gt; -j MASQUERADE\nsudo systemctl stop ufw\nsudo iptables -I FORWARD 1 -j ACCEPT\n</code></pre> </li> <li> <p>Run free5GC (under <code>free5gc</code>)</p> <pre><code>./run.sh\n</code></pre> </li> <li> <p>Run webconsole and create a subscriber by default (under <code>free5gc</code>)</p> <pre><code>cd webconsole\n./run.sh\n</code></pre> <p>For creating a subscriber, please refer to: Create Subscriber via Webconsole</p> <p>Make sure there is a flow rule (e.g. <code>1.1.1.1/32</code>) under the network slice.</p> </li> </ol>"},{"location":"doc-user-guide/06-quickstart-static-nrdc/#d-start-gnbs","title":"D. Start gNBs","text":"<p>The configuration file <code>config/gnb.yaml</code> has already been set up with the environment values. No need to modify the configuration.</p> <ul> <li> <p>Master-gNB</p> <ol> <li> <p>Enter the Master-RAN namespace (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-mran\n</code></pre> </li> <li> <p>Start Master-gNB</p> <pre><code>./build/free-ran-ue gnb -c config/gnb-dc-static-master.yaml\n</code></pre> </li> </ol> </li> <li> <p>Secondary-gNB</p> <ol> <li> <p>Enter the Master-RAN namespace (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-sran\n</code></pre> </li> <li> <p>Start Master-gNB</p> <pre><code>./build/free-ran-ue gnb -c config/gnb-dc-static-secondary.yaml\n</code></pre> </li> </ol> </li> </ul>"},{"location":"doc-user-guide/06-quickstart-static-nrdc/#e-start-ue","title":"E. Start UE","text":"<p>The configuration file <code>config/ue-dc-static.yaml</code> has already been set up with the environment values. No need to modify the configuration.</p> <ol> <li> <p>Enter the UE-namespace (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-ue\n</code></pre> </li> <li> <p>Start UE</p> <pre><code>./build/free-ran-ue ue -c config/ue-dc-static.yaml\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/06-quickstart-static-nrdc/#f-icmp-test","title":"F. ICMP Test","text":"<ol> <li> <p>Enter the UE-namespace (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-ue\n</code></pre> </li> <li> <p>Check the <code>ueTun0</code> interface</p> <pre><code>ifconfig\n</code></pre> <p>Expected output included:</p> <pre><code>ueTun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n        inet 10.60.0.1  netmask 255.255.255.255  destination 10.60.0.1\n        inet6 fe80::b1e9:2933:3c64:b981  prefixlen 64  scopeid 0x20&lt;link&gt;\n        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 3  bytes 144 (144.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> </li> <li> <p><code>ping</code> test via Master-gMB</p> <pre><code>ping -I ueTun0 8.8.8.8 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 8.8.8.8 (8.8.8.8) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=3.71 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=116 time=4.08 ms\n64 bytes from 8.8.8.8: icmp_seq=3 ttl=116 time=3.82 ms\n64 bytes from 8.8.8.8: icmp_seq=4 ttl=116 time=4.25 ms\n64 bytes from 8.8.8.8: icmp_seq=5 ttl=116 time=3.77 ms\n\n--- 8.8.8.8 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4006ms\nrtt min/avg/max/mdev = 3.706/3.926/4.252/0.206 ms\n</code></pre> </li> <li> <p><code>ping</code> test via Secondary-gNB</p> <pre><code>ping -I ueTun0 1.1.1.1 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 1.1.1.1 (1.1.1.1) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 1.1.1.1: icmp_seq=1 ttl=49 time=4.51 ms\n64 bytes from 1.1.1.1: icmp_seq=2 ttl=49 time=4.46 ms\n64 bytes from 1.1.1.1: icmp_seq=3 ttl=49 time=4.27 ms\n64 bytes from 1.1.1.1: icmp_seq=4 ttl=49 time=3.97 ms\n64 bytes from 1.1.1.1: icmp_seq=5 ttl=49 time=4.64 ms\n\n--- 1.1.1.1 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 3.972/4.371/4.644/0.232 ms\n</code></pre> </li> </ol> <p>Now, both the Master-gNB and Secondary-gNB are running successfully in their respective namespaces. The UE also works well with dual path connections.</p>"},{"location":"doc-user-guide/07-console/","title":"Console","text":"<p>Note</p> <p>This is free-ran-ue management tool. The console will used to check the gNB and UE status and manually control UE's DC status.</p>"},{"location":"doc-user-guide/07-console/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Golang:</p> <ul> <li>free-ran-ue is built, tested and run with <code>go1.25.5 linux/amd64</code></li> <li> <p>If Golang is not installed on your system, please execute the following commands:</p> <ul> <li> <p>Install Golang:</p> <pre><code>wget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nmkdir -p ~/go/{bin,pkg,src}\n# The following assume that your shell is bash:\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export GOROOT=/usr/local/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' &gt;&gt; ~/.bashrc\necho 'export GO111MODULE=auto' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> </li> <li> <p>Check Installation. You should see the version information:</p> <pre><code>go version\n</code></pre> </li> </ul> </li> <li> <p>If another version of Golang is installed, please execute the following commands to replace it:</p> <pre><code>sudo rm -rf /usr/local/go\nwget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nsource $HOME/.bashrc\ngo version\n</code></pre> </li> </ul> </li> <li> <p>Node.js</p> <ul> <li>free-ran-ue's console is built, test and run with <code>node v20.19.2</code> / <code>yarn v1.22.22</code>.</li> <li> <p>If node and yarn is not installed on your system, olease execute the following commands:</p> <ul> <li> <p>Install node and yarn:</p> <pre><code>curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - \nsudo apt update\nsudo apt install -y nodejs\nsudo corepack enable\n</code></pre> </li> <li> <p>Check Installation. You should see the version information:</p> <pre><code>node -v\nyarn -v\n</code></pre> </li> </ul> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/07-console/#b-clone-and-build-free-ran-ue","title":"B. Clone and Build free-ran-ue","text":"<ul> <li> <p>Clone</p> <pre><code>git clone https://github.com/free-ran-ue/free-ran-ue.git\n</code></pre> </li> <li> <p>Build</p> <pre><code>cd free-ran-ue\nmake all\n</code></pre> <p>After building, a binary executable file and frontend static files will be generated in the <code>build</code> folder.</p> </li> </ul>"},{"location":"doc-user-guide/07-console/#c-start-console","title":"C. Start Console","text":"<ul> <li> <p>Modify the configuration file for console:</p> <p>The configuration <code>YAML</code> file template is located at <code>free-ran-ue/config/console.yaml</code>.</p> <p>The port field will be used for accessing the console page.</p> <p>Make sure the gNB's configuration YAML has the <code>api</code> section for console access, like:</p> <pre><code>api:\n  ip: \"10.0.1.2\"\n  port: 40104\n</code></pre> </li> <li> <p>Start Console</p> <p>After configuring the <code>YAML</code> file, execute the binary in the <code>build</code> folder to start console with the specified configuration file:</p> <pre><code>./build/free-ran-ue console -c config/console.yaml\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/07-console/#d-access-console","title":"D. Access Console","text":"<p>Start your browser, and access your host's ip with the port configure in the <code>YAML</code> file.</p> <p>You will see the page like this:</p> <p></p> <p>Enter username and password:</p> <ul> <li>username: <code>admin</code></li> <li>password: <code>free-ran-ue</code></li> </ul> <p>Then you will see the dashboard:</p> <p></p>"},{"location":"doc-user-guide/07-console/#e-add-gnb","title":"E. Add gNB","text":"<p>Enter the gNB page:</p> <p></p> <p>Click the <code>Add gNB</code> button and enter the target gNB's API IP and port based the configuration file:</p> <p></p> <p>Add success:</p> <p></p>"},{"location":"doc-user-guide/07-console/#f-ue","title":"F. UE","text":"<p>At UE page, you can see the UE which is connected to gNB or be XnUE at secondary gNB.</p> <ul> <li> <p>RAN UE List means there is basic UE connection via gNB:</p> <p></p> </li> <li> <p>Xn UE List means there is DC UE connection at gNB:</p> <p></p> </li> </ul>"},{"location":"doc-user-guide/08-dynamic-nrdc/","title":"Dynamic NR-DC","text":"<p>Caution</p> <ol> <li>Do not start the Master-gNB and Secondary-gNB on the same machine, as this will cause a GTP port conflict.</li> <li>Do not start the UE on the same machine as free5GC, as this will cause data plane forwarding failures.</li> </ol> <p>There are two options for deployment:</p> <ul> <li>Use separate machines.</li> <li>Use namespace separation. For details, please refer to Quick Start.</li> </ul>"},{"location":"doc-user-guide/08-dynamic-nrdc/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Golang:</p> <ul> <li>free-ran-ue is built, tested and run with <code>go1.25.5 linux/amd64</code></li> <li> <p>If Golang is not installed on your system, please execute the following commands:</p> <ul> <li> <p>Install Golang:</p> <pre><code>wget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nmkdir -p ~/go/{bin,pkg,src}\n# The following assume that your shell is bash:\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export GOROOT=/usr/local/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' &gt;&gt; ~/.bashrc\necho 'export GO111MODULE=auto' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> </li> <li> <p>Check Installation. You should see the version information:</p> <pre><code>go version\n</code></pre> </li> </ul> </li> <li> <p>If another version of Golang is installed, please execute the following commands to replace it:</p> <pre><code>sudo rm -rf /usr/local/go\nwget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nsource $HOME/.bashrc\ngo version\n</code></pre> </li> </ul> </li> <li> <p>Node.js</p> <ul> <li>free-ran-ue's console is built, test and run with <code>node v20.19.2</code> / <code>yarn v1.22.22</code>.</li> <li> <p>If node and yarn is not installed on your system, olease execute the following commands:</p> <ul> <li> <p>Install node and yarn:</p> <pre><code>curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - \nsudo apt update\nsudo apt install -y nodejs\nsudo corepack enable\n</code></pre> </li> <li> <p>Check Installation. You should see the version information:</p> <pre><code>node -v\nyarn -v\n</code></pre> </li> </ul> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/08-dynamic-nrdc/#b-clone-and-build-free-ran-ue","title":"B. Clone and Build free-ran-ue","text":"<ul> <li> <p>Clone</p> <pre><code>git clone https://github.com/free-ran-ue/free-ran-ue.git\n</code></pre> </li> <li> <p>Build</p> <pre><code>cd free-ran-ue\nmake all\n</code></pre> <p>After building, a binary executable file and frontend static files will be generated in the <code>build</code> folder.</p> </li> </ul>"},{"location":"doc-user-guide/08-dynamic-nrdc/#c-start-gnbs","title":"C. Start gNBs","text":"<ul> <li> <p>Modify the configuration file for gNBs:</p> <p>The configuration <code>YAML</code> file template is located at:</p> <ul> <li><code>free-ran-ue/config/gnb-dc-dynamic-master.yaml</code></li> <li><code>free-ran-ue/config/gnb-dc-dynamic-secondary.yaml</code></li> </ul> <p>Ensure that the information matches your core network settings. For core network settings, please refer to: Start free5GC</p> <p>Please also pay attention to the <code>xnIp</code> and <code>xnPort</code> field, as these will be used for the Xn-interface between the gNBs.</p> <p>Also noticed the fields <code>staticNrdc</code> that should be set as <code>false</code> for disabling static NR-DC.</p> </li> <li> <p>Start gNB:</p> <p>After configuring the <code>YAML</code> file, execute the binary in the <code>build</code> folder to start gNBs with the specified configuration file:</p> <ul> <li> <p>Master-gNB:</p> <pre><code>./build/free-ran-ue gnb -c config/gnb-dc-dynamic-master.yaml\n</code></pre> </li> <li> <p>Secondary-gNB:</p> <pre><code>./build/free-ran-ue gnb -c config/gnb-dc-dynamic-secondary.yaml\n</code></pre> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/08-dynamic-nrdc/#d-start-ue","title":"D. Start UE","text":"<ul> <li> <p>Modify the configuration file for UE:</p> <p>The configuration <code>YAML</code> file template is located at <code>free-ran-ue/config/ue-dc-dynamic.yaml</code>.</p> <p>Ensure that the information matches your web console settings, especially the <code>authenticationSubscription</code> section. For web console settings, please refer to: Create Subscriber via Webconsole</p> <p>To test the dual connectivity feature, there should be at least one flow rule (e.g. <code>1.1.1.1/32</code>) configured under the subscriber.</p> <p>Pay attention to the <code>ueTunnelDevice</code> field, as this will be the name of the network interface created later. Also make sure the <code>nrdc</code> section is configure correctly. In dynamic case, the nrdc should be set as <code>false</code> in the beginning.</p> </li> <li> <p>Start UE:</p> <p>After configuring the <code>YAML</code> file,execute the binary in the <code>build</code> folder to start UE with the specified configuration file:</p> <pre><code>./build/free-ran-ue ue -c config/ue-dc-dynamic.yaml\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/08-dynamic-nrdc/#e-start-console","title":"E. Start Console","text":"<ul> <li> <p>Modify the configuration file for console:</p> <p>The configuration <code>YAML</code> file template is located at <code>free-ran-ue/config/console.yaml</code>.</p> <p>The port field will be used for accessing the console page.</p> <p>Make sure the gNB's configuration YAML has the <code>api</code> section for console access, like:</p> <pre><code>api:\n  ip: \"10.0.1.2\"\n  port: 40104\n</code></pre> </li> <li> <p>Start Console</p> <p>After configuring the <code>YAML</code> file, execute the binary in the <code>build</code> folder to start console with the specified configuration file:</p> <pre><code>./build/free-ran-ue console -c config/console.yaml\n</code></pre> <ul> <li> <p>Sign in console:</p> <ul> <li>username: <code>admin</code></li> <li>password: <code>free-ran-ue</code></li> </ul> <p></p> </li> <li> <p>Add gNB:</p> <p>Enter the gNB page:</p> <p></p> <p>Click the <code>Add gNB</code> button and enter the target gNB's API IP and port based the configuration file:</p> <p></p> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/08-dynamic-nrdc/#f-icmp-test","title":"F. ICMP Test","text":"<p>After UE has started, a network interface will be available. Use <code>ifconfig</code> to check it:</p> <pre><code>ifconfig\n</code></pre> <p>Expected output included:</p> <pre><code>ueTun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n        inet 10.60.0.1  netmask 255.255.255.255  destination 10.60.0.1\n        inet6 fe80::b1e9:2933:3c64:b981  prefixlen 64  scopeid 0x20&lt;link&gt;\n        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 3  bytes 144 (144.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <ul> <li> <p>Before DC enabled:</p> <p>ICMP test with <code>ueTun0</code> via Master-gNB:</p> <pre><code>ping -I ueTun0 8.8.8.8 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 8.8.8.8 (8.8.8.8) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=3.71 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=116 time=4.08 ms\n64 bytes from 8.8.8.8: icmp_seq=3 ttl=116 time=3.82 ms\n64 bytes from 8.8.8.8: icmp_seq=4 ttl=116 time=4.25 ms\n64 bytes from 8.8.8.8: icmp_seq=5 ttl=116 time=3.77 ms\n\n--- 8.8.8.8 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4006ms\nrtt min/avg/max/mdev = 3.706/3.926/4.252/0.206 ms\n</code></pre> <p>ICMP test with <code>ueTun0</code> via Secondary-gNB:</p> <pre><code>ping -I ueTun0 1.1.1.1 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 1.1.1.1 (1.1.1.1) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 1.1.1.1: icmp_seq=1 ttl=49 time=4.51 ms\n64 bytes from 1.1.1.1: icmp_seq=2 ttl=49 time=4.46 ms\n64 bytes from 1.1.1.1: icmp_seq=3 ttl=49 time=4.27 ms\n64 bytes from 1.1.1.1: icmp_seq=4 ttl=49 time=3.97 ms\n64 bytes from 1.1.1.1: icmp_seq=5 ttl=49 time=4.64 ms\n\n--- 1.1.1.1 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 3.972/4.371/4.644/0.232 ms\n</code></pre> </li> <li> <p>Use console to start DC:</p> <ol> <li> <p>Enter master gNB's information page:</p> <p></p> </li> <li> <p>Turn on the DC of UE:</p> <p></p> </li> <li> <p>Check XnUe is exist in secondary gNB:</p> <p></p> </li> </ol> </li> <li> <p>After DC enabled:</p> <p>ICMP test with <code>ueTun0</code> via Master-gNB:</p> <pre><code>ping -I ueTun0 8.8.8.8 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 8.8.8.8 (8.8.8.8) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=4.12 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=116 time=4.11 ms\n64 bytes from 8.8.8.8: icmp_seq=3 ttl=116 time=3.99 ms\n64 bytes from 8.8.8.8: icmp_seq=4 ttl=116 time=3.68 ms\n64 bytes from 8.8.8.8: icmp_seq=5 ttl=116 time=3.63 ms\n\n--- 8.8.8.8 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 3.627/3.905/4.120/0.212 ms\n</code></pre> <p>ICMP test with <code>ueTun0</code> via Secondary-gNB:</p> <pre><code>ping -I ueTun0 1.1.1.1 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 1.1.1.1 (1.1.1.1) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 1.1.1.1: icmp_seq=1 ttl=49 time=4.80 ms\n64 bytes from 1.1.1.1: icmp_seq=2 ttl=49 time=4.43 ms\n64 bytes from 1.1.1.1: icmp_seq=3 ttl=49 time=4.42 ms\n64 bytes from 1.1.1.1: icmp_seq=4 ttl=49 time=4.21 ms\n64 bytes from 1.1.1.1: icmp_seq=5 ttl=49 time=4.78 ms\n\n--- 1.1.1.1 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4006ms\nrtt min/avg/max/mdev = 4.210/4.527/4.797/0.225 ms\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/","title":"Dynamic NR-DC with Namespace","text":"<p>Note</p> <p>Namespace provides an alternative to using a physical machine.</p> <p>With namespaces, you can simulate isolated network environments on a single machine, making it possible to run both free5GC and free-ran-ue without the need for multiple physical devices.</p> <p>For detailed namespace implementation, please refer to this implementation article: Namespace-Based GTP5G Conflict Resolution for free5GC and PacketRusher.</p>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/#architecture-overview","title":"Architecture Overview","text":"<p>Since the GTP port and the routing table will get in conflict, we can set up four namespaces for free5GC/Master RAN/Secondary RAN/UE, which means you don't need to bring up real machines.</p> <p>Here is the deployment of these three namespaces:</p> <p></p>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Golang / Node.js / Yarn</p> <pre><code>wget https://dl.google.com/go/go1.25.5.linux-amd64.tar.gz\nsudo tar -C /usr/local -zxvf go1.25.5.linux-amd64.tar.gz\nmkdir -p ~/go/{bin,pkg,src}\n# The following assume that your shell is bash:\necho 'export GOPATH=$HOME/go' &gt;&gt; ~/.bashrc\necho 'export GOROOT=/usr/local/go' &gt;&gt; ~/.bashrc\necho 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' &gt;&gt; ~/.bashrc\necho 'export GO111MODULE=auto' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - \nsudo apt update\nsudo apt install -y nodejs\nsudo corepack enable\n</code></pre> </li> <li> <p>gtp5g</p> <pre><code>sudo apt -y update\nsudo apt -y install git gcc g++ cmake autoconf libtool pkg-config libmnl-dev libyaml-dev\ngit clone https://github.com/free5gc/gtp5g\ncd gtp5g\nmake\nsudo make install\n</code></pre> </li> <li> <p>MongoDB</p> <pre><code>sudo apt install -y gnupg curl\ncurl -fsSL https://www.mongodb.org/static/pgp/server-7.0.asc | \\\nsudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg --dearmor\necho \"deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list\nsudo apt update\nsudo apt install -y mongodb-org\nsudo systemctl enable mongod --now\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/#b-namespace-setup","title":"B. Namespace Setup","text":"<ol> <li> <p>Clone and build free-ran-ue</p> <pre><code>git clone https://github.com/free-ran-ue/free-ran-ue.git\ncd free-ran-ue\nmake all\n</code></pre> </li> <li> <p>Bring up namespaces (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-u\n</code></pre> <p>After using, there is <code>down</code> command to clean up the namespaces:</p> <pre><code>make dc-ns-down\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/#c-configure-free5gc","title":"C. Configure free5GC","text":"<ol> <li> <p>Clone free5GC and build</p> <pre><code>git clone -j `nproc` --recursive https://github.com/free5gc/free5gc\ncd free5gc\nmake\n</code></pre> </li> <li> <p>Modify NF configuration:</p> <ul> <li> <p>~/free5gc/config/amfcfg.yaml</p> <p>Replace <code>ngapIpList</code> IP from <code>127.0.0.18</code> to <code>10.0.1.1</code>:</p> <pre><code>ngapIpList:\n  - 10.0.1.1\n</code></pre> </li> <li> <p>~/free5gc/config/smfcfg.yaml</p> <p>Replace N3 interface's endpoints IP from <code>127.0.0.8</code> to your <code>10.0.1.1</code>:</p> <pre><code>interfaces:\n  - interfaceType: N3\n    endpoints:\n      - 10.0.1.1\n</code></pre> </li> <li> <p>~/free5gc/config/upfcfg.yaml</p> <p>Replace N6 interface address IP from <code>127.0.0.8</code> to <code>10.0.1.1</code>:</p> <pre><code>gtpu:\n  forwarder: gtp5g\n  iifList:\n    - addr: 10.0.1.1\n</code></pre> </li> </ul> </li> <li> <p>Check IP Forward is enabled</p> <p>If you have rebooted your machine, remember to run these command with setting your export network interface:</p> <pre><code>sudo sysctl -w net.ipv4.ip_forward=1\nsudo iptables -t nat -A POSTROUTING -o &lt;export network interface&gt; -j MASQUERADE\nsudo systemctl stop ufw\nsudo iptables -I FORWARD 1 -j ACCEPT\n</code></pre> </li> <li> <p>Run free5GC (under <code>free5gc</code>)</p> <pre><code>./run.sh\n</code></pre> </li> <li> <p>Run webconsole and create a subscriber by default (under <code>free5gc</code>)</p> <pre><code>cd webconsole\n./run.sh\n</code></pre> <p>For creating a subscriber, please refer to: Create Subscriber via Webconsole</p> <p>Make sure there is a flow rule (e.g. <code>1.1.1.1/32</code>) under the network slice.</p> </li> </ol>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/#d-start-gnbs","title":"D. Start gNBs","text":"<p>The configuration file <code>config/gnb.yaml</code> has already been set up with the environment values. No need to modify the configuration.</p> <ul> <li> <p>Master-gNB</p> <ol> <li> <p>Enter the Master-RAN namespace (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-mran\n</code></pre> </li> <li> <p>Start Master-gNB</p> <pre><code>./build/free-ran-ue gnb -c config/gnb-dc-dynamic-master.yaml\n</code></pre> </li> </ol> </li> <li> <p>Secondary-gNB</p> <ol> <li> <p>Enter the Master-RAN namespace (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-sran\n</code></pre> </li> <li> <p>Start Master-gNB</p> <pre><code>./build/free-ran-ue gnb -c config/gnb-dc-dynamic-secondary.yaml\n</code></pre> </li> </ol> </li> </ul>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/#e-start-ue","title":"E. Start UE","text":"<p>The configuration file <code>config/ue-dc-dynamic.yaml</code> has already been set up with the environment values. No need to modify the configuration.</p> <ol> <li> <p>Enter the UE-namespace (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-ue\n</code></pre> </li> <li> <p>Start UE</p> <pre><code>./build/free-ran-ue ue -c config/ue-dc-dynamic.yaml\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/#f-start-console","title":"F. Start Console","text":"<ol> <li>Run in the host namespace</li> <li> <p>Start Console</p> <pre><code>./build/free-ran-ue console -c config/console.yaml\n</code></pre> </li> <li> <p>Add gNB</p> <ul> <li> <p>Sign in the console:</p> <ul> <li>username: <code>admin</code></li> <li>password: <code>free-ran-ue</code></li> </ul> <p></p> </li> <li> <p>Add gNB-master and gNB-secondary:</p> <ul> <li> <p>gNB-master</p> <ul> <li>IP Address: <code>10.0.1.2</code></li> <li>Port: <code>40104</code></li> </ul> </li> <li> <p>gNB-secondary</p> <ul> <li>IP Address: <code>10.0.1.3</code></li> <li>Port: <code>40104</code></li> </ul> </li> </ul> <p></p> </li> <li> <p>Check add success:</p> <p></p> </li> </ul> </li> </ol>"},{"location":"doc-user-guide/09-quickstart-dynamic-nrdc/#g-icmp-test","title":"G. ICMP Test","text":"<ol> <li> <p>Enter the UE-namespace (under <code>free-ran-ue</code>)</p> <pre><code>make dc-ns-ue\n</code></pre> </li> <li> <p>Check the <code>ueTun0</code> interface</p> <pre><code>ifconfig\n</code></pre> <p>Expected output included:</p> <pre><code>ueTun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n        inet 10.60.0.1  netmask 255.255.255.255  destination 10.60.0.1\n        inet6 fe80::b1e9:2933:3c64:b981  prefixlen 64  scopeid 0x20&lt;link&gt;\n        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 3  bytes 144 (144.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> </li> <li> <p>Before DC enabled:</p> <p>ICMP test with <code>ueTun0</code> via Master-gNB:</p> <pre><code>ping -I ueTun0 8.8.8.8 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 8.8.8.8 (8.8.8.8) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=3.71 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=116 time=4.08 ms\n64 bytes from 8.8.8.8: icmp_seq=3 ttl=116 time=3.82 ms\n64 bytes from 8.8.8.8: icmp_seq=4 ttl=116 time=4.25 ms\n64 bytes from 8.8.8.8: icmp_seq=5 ttl=116 time=3.77 ms\n\n--- 8.8.8.8 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4006ms\nrtt min/avg/max/mdev = 3.706/3.926/4.252/0.206 ms\n</code></pre> <p>ICMP test with <code>ueTun0</code> via Secondary-gNB:</p> <pre><code>ping -I ueTun0 1.1.1.1 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 1.1.1.1 (1.1.1.1) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 1.1.1.1: icmp_seq=1 ttl=49 time=4.51 ms\n64 bytes from 1.1.1.1: icmp_seq=2 ttl=49 time=4.46 ms\n64 bytes from 1.1.1.1: icmp_seq=3 ttl=49 time=4.27 ms\n64 bytes from 1.1.1.1: icmp_seq=4 ttl=49 time=3.97 ms\n64 bytes from 1.1.1.1: icmp_seq=5 ttl=49 time=4.64 ms\n\n--- 1.1.1.1 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 3.972/4.371/4.644/0.232 ms\n</code></pre> </li> <li> <p>Use console to start DC:</p> <ol> <li> <p>Enter gNB-master's information page:</p> <p></p> </li> <li> <p>Turn on the DC of UE:</p> <p></p> </li> <li> <p>Check XnUE exist in gNB-secondary:</p> <p></p> </li> </ol> </li> <li> <p>After DC enabled:</p> <p>ICMP test with <code>ueTun0</code> via Master-gNB:</p> <pre><code>ping -I ueTun0 8.8.8.8 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 8.8.8.8 (8.8.8.8) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=4.12 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=116 time=4.11 ms\n64 bytes from 8.8.8.8: icmp_seq=3 ttl=116 time=3.99 ms\n64 bytes from 8.8.8.8: icmp_seq=4 ttl=116 time=3.68 ms\n64 bytes from 8.8.8.8: icmp_seq=5 ttl=116 time=3.63 ms\n\n--- 8.8.8.8 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4007ms\nrtt min/avg/max/mdev = 3.627/3.905/4.120/0.212 ms\n</code></pre> <p>ICMP test with <code>ueTun0</code> via Secondary-gNB:</p> <pre><code>ping -I ueTun0 1.1.1.1 -c 5\n</code></pre> <p>Expected successful output:</p> <pre><code>PING 1.1.1.1 (1.1.1.1) from 10.60.0.2 ueTun0: 56(84) bytes of data.\n64 bytes from 1.1.1.1: icmp_seq=1 ttl=49 time=4.80 ms\n64 bytes from 1.1.1.1: icmp_seq=2 ttl=49 time=4.43 ms\n64 bytes from 1.1.1.1: icmp_seq=3 ttl=49 time=4.42 ms\n64 bytes from 1.1.1.1: icmp_seq=4 ttl=49 time=4.21 ms\n64 bytes from 1.1.1.1: icmp_seq=5 ttl=49 time=4.78 ms\n\n--- 1.1.1.1 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 4006ms\nrtt min/avg/max/mdev = 4.210/4.527/4.797/0.225 ms\n</code></pre> </li> </ol>"},{"location":"doc-user-guide/10-docker/","title":"Docker Deployment","text":"<p>Note</p> <p>Docker offers an alternative way to deploy free5GC with free-ran-ue on a single machine without any network setting conflicts.</p> <p>For free5GC NF images, compose will pull the latest version from free5GC's Docker Hub.</p>"},{"location":"doc-user-guide/10-docker/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Docker:</p> <ul> <li> <p>Install</p> <pre><code>sudo apt update\nsudo apt install apt-transport-https ca-certificates curl software-properties-common\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\nsudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\nsudo apt update\nsudo apt install docker-ce\nsudo systemctl start docker\nsudo docker --version\n</code></pre> </li> <li> <p>Docker group (avoid sudo problem)</p> <pre><code>sudo groupadd docker\nsudo usermod -aG docker $USER\nnewgrp docker\n</code></pre> </li> </ul> </li> <li> <p>gtp5g</p> <ul> <li> <p>Packages</p> <pre><code>sudo apt -y update\nsudo apt -y install git gcc g++ cmake autoconf libtool pkg-config libmnl-dev libyaml-dev\n</code></pre> </li> <li> <p>Clone, Build and Install</p> <pre><code>git clone https://github.com/free5gc/gtp5g\ncd gtp5g\nmake\nsudo make install\n</code></pre> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/10-docker/#b-optional-build-free-ran-ue-image","title":"B. (Optional) Build free-ran-ue Image","text":"<p>If you want to build the image from source code, you need to run this step; otherwise, the compose file will pull the image from docker hub with the latest tag. You can also modify the tag in the compose file for specified version.</p> <ul> <li> <p>Clone</p> <pre><code>git clone https://github.com/free-ran-ue/fru-compose.git\n</code></pre> </li> <li> <p>Clone the source code and put it under <code>fru-compose</code> directory</p> <pre><code>cd fru-compose\ngit clone https://github.com/free-ran-ue/free-ran-ue\n</code></pre> </li> <li> <p>Build image under <code>fru-compose</code> directory locally</p> <pre><code>make\n</code></pre> <p>After building, use <code>docker images</code> cli to check image. The image will be named with <code>alonza0314/free-ran-ue:latest</code>.</p> </li> </ul>"},{"location":"doc-user-guide/10-docker/#c-start-compose","title":"C. Start Compose","text":"<p>Clone the compose repo:</p> <pre><code>git clone https://github.com/free-ran-ue/fru-compose\n</code></pre> <p>There are three types of docker compose:</p> <ul> <li> <p>Basic free-ran-ue</p> <pre><code>cd fru-compose\ndocker compose -f docker-compose.yaml up\n</code></pre> </li> <li> <p>Static NR-DC</p> <pre><code>cd fru-compose\ndocker compose -f docker-compose-dc-static.yaml up\n</code></pre> </li> <li> <p>Dynamic NR-DC</p> <pre><code>cd fru-compose\ndocker compose -f docker-compose-dc-dynamic.yaml up\n</code></pre> </li> </ul>"},{"location":"doc-user-guide/10-docker/#d-only-dynamic-nr-dc-console","title":"D. (Only Dynamic NR-DC) Console","text":"<p>Start your browser, and access your host's with the port configure in the <code>config/fru-consolecfg.yaml</code>. (defaule is <code>40104</code>)</p> <p>The gNBs default configuration are:</p> <ul> <li> <p>gNB-master:</p> <ul> <li>IP Address: <code>10.0.4.3</code></li> <li>Port: <code>40104</code></li> </ul> </li> <li> <p>gNB-secondary:</p> <ul> <li>IP Address: <code>10.0.4.5</code></li> <li>Port: <code>40104</code></li> </ul> </li> </ul> <p>For console usage, please refer to: console</p>"},{"location":"doc-user-guide/10-docker/#e-ue","title":"E. UE","text":"<p>After docker compose started, UE can be started by entering the <code>ue</code> container.</p> <ol> <li> <p>Enter <code>ue</code> container</p> <pre><code>docker exec -it ue bash\n</code></pre> </li> <li> <p>Start UE</p> <pre><code>./free-ran-ue ue -c uecfg.yaml\n</code></pre> </li> <li> <p>Check Network Interface</p> <pre><code>ifconfig\n</code></pre> <p>Expected output included:</p> <pre><code>ueTun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n    inet 10.60.0.1  netmask 255.255.255.255  destination 10.60.0.1\n    inet6 fe80::b1e9:2933:3c64:b981  prefixlen 64  scopeid 0x20&lt;link&gt;\n    unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n    RX packets 0  bytes 0 (0.0 B)\n    RX errors 0  dropped 0  overruns 0  frame 0\n    TX packets 0  bytes 0 (0.0 B)\n    TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> </li> <li> <p>Application</p> <p>Now, the whole deployment is finished. Network interface <code>ueTun0</code> can be used for any application, e.g. ICMP / iperf.</p> </li> </ol>"},{"location":"doc-user-guide/11-docker-ulcl/","title":"Docker ULCL Deployment","text":"<p>Note</p> <p>ULCL provides an Uplink Classifier for splitting the traffic of specific DN.</p>"},{"location":"doc-user-guide/11-docker-ulcl/#architecture-overview","title":"Architecture Overview","text":"<p>In ULCL, we define a specific traffic route for the destination <code>1.1.1.1/32</code>. All traffic destined for <code>1.1.1.1/32</code> will be routed through the path <code>gNB - I-UPF - DN</code>. Other traffic will be routed through <code>gNB - I-UPF - PSA-UPF - DN</code>.</p> <p>Here is the deployment of ULCL version:</p> <p></p>"},{"location":"doc-user-guide/11-docker-ulcl/#a-prerequisites","title":"A. Prerequisites","text":"<ul> <li> <p>Docker:</p> <ul> <li> <p>Install</p> <pre><code>sudo apt update\nsudo apt install apt-transport-https ca-certificates curl software-properties-common\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\nsudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\nsudo apt update\nsudo apt install docker-ce\nsudo systemctl start docker\nsudo docker --version\n</code></pre> </li> <li> <p>Docker group (avoid sudo problem)</p> <pre><code>sudo groupadd docker\nsudo usermod -aG docker $USER\nnewgrp docker\n</code></pre> </li> </ul> </li> <li> <p>gtp5g</p> <ul> <li> <p>Packages</p> <pre><code>sudo apt -y update\nsudo apt -y install git gcc g++ cmake autoconf libtool pkg-config libmnl-dev libyaml-dev\n</code></pre> </li> <li> <p>Clone, Build and Install</p> <pre><code>git clone https://github.com/free5gc/gtp5g\ncd gtp5g\nmake\nsudo make install\n</code></pre> </li> </ul> </li> </ul>"},{"location":"doc-user-guide/11-docker-ulcl/#b-optional-build-free-ran-ue-image","title":"B. (Optional) Build free-ran-ue Image","text":"<p>If you want to build the image from source code, you need to run this step; otherwise, the compose file will pull the image from docker hub with the latest tag. You can also modify the tag in the compose file for specified version.</p> <ul> <li> <p>Clone</p> <pre><code>git clone https://github.com/free-ran-ue/fru-compose.git\n</code></pre> </li> <li> <p>Clone the source code and put it under <code>fru-compose</code> directory</p> <pre><code>cd fru-compose\ngit clone https://github.com/free-ran-ue/free-ran-ue\n</code></pre> </li> <li> <p>Build image under <code>fru-compose</code> directory locally</p> <pre><code>make\n</code></pre> <p>After building, use <code>docker images</code> cli to check image. The image will be named with <code>alonza0314/free-ran-ue:latest</code>.</p> </li> </ul>"},{"location":"doc-user-guide/11-docker-ulcl/#c-start-ulcl-compose","title":"C. Start ULCL Compose","text":"<p>Clone the compose repo:</p> <pre><code>git clone https://github.com/free-ran-ue/fru-compose\n</code></pre> <p>Start the compose:</p> <pre><code>cd fru-compose\ndocker compose -f docker-compose-ulcl.yaml up\n</code></pre> <p>For the specific ue routes, please configure at <code>fru-compose/config/ULCL/uerouting.yaml</code>.</p> <p>In default, there is a specific path for destination <code>1.1.1.1/32</code>.</p>"},{"location":"doc-user-guide/11-docker-ulcl/#d-ue","title":"D. UE","text":"<p>After docker compose started, UE can be started by entering the <code>ue</code> container.</p> <ol> <li> <p>Enter <code>ue</code> container</p> <pre><code>docker exec -it ue bash\n</code></pre> </li> <li> <p>Start UE</p> <pre><code>./free-ran-ue ue -c uecfg.yaml\n</code></pre> </li> <li> <p>Check Network Interface</p> <pre><code>ifconfig\n</code></pre> <p>Expected output included:</p> <pre><code>ueTun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n    inet 10.60.0.1  netmask 255.255.255.255  destination 10.60.0.1\n    inet6 fe80::b1e9:2933:3c64:b981  prefixlen 64  scopeid 0x20&lt;link&gt;\n    unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n    RX packets 0  bytes 0 (0.0 B)\n    RX errors 0  dropped 0  overruns 0  frame 0\n    TX packets 0  bytes 0 (0.0 B)\n    TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> </li> <li> <p>Application</p> <p>Now, the whole deployment is finished. Network interface <code>ueTun0</code> can be used for any application, e.g. ICMP / iperf.</p> </li> </ol>"},{"location":"doc-user-guide/12-multi-ue/","title":"Multiple UEs","text":"<p>Note</p> <p>Multiple UEs means you can launch more than one UE instance with a single command.</p> <p>Before using the multiple UEs command, please refer to free-ran-ue or free-ran-ue with Namespace for basic usage.</p>"},{"location":"doc-user-guide/12-multi-ue/#insert-subscribers","title":"Insert Subscribers","text":"<p>Before starting UEs, you need to go to free5GC's Webconsole and create subscribers.</p> <p>free-ran-ue also provides insertion scripts under the <code>script/10k-test-script</code> directory for quickly inserting subscribers:</p> <pre><code>./script/10k-test-script/insert-subscribors.sh 1000 # here we use 1000 UEs as an example## UE Command Usage\n</code></pre>"},{"location":"doc-user-guide/12-multi-ue/#start-multiple-ues","title":"Start Multiple UEs","text":"<p>The <code>ue</code> command provides parameters for launching multiple UEs at once:</p> <pre><code>Usage:\n  free-ran-ue ue [flags]\n\nExamples:\n  free-ran-ue ue\n\nFlags:\n  -p, --concurrent int   max concurrent UEs to start simultaneously (default 10)\n  -c, --config string    config file path (default \"config/ue.yaml\")\n  -h, --help             help for ue\n  -n, --num int          number of UEs (default 1)\n</code></pre> <ul> <li><code>-p</code>, <code>--concurrent</code>: maximum number of UEs to start concurrently (default 10)</li> <li><code>-n</code>, <code>--num</code>: total number of UEs to start (default 1)</li> </ul> <p>If you want to launch 1000 UEs with up to 25 UEs starting concurrently:</p> <pre><code>./build/free-ran-ue ue -c config/ue.yaml -n 1000 -p 25\n</code></pre> <p>Tip</p> <p>The <code>-p</code> parameter should be tuned according to your machine's capacity to achieve faster and more stable launches.</p>"}]}